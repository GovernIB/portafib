{
  "openapi" : "3.0.1",
  "info" : {
    "title" : "API Interna de PortaFIB de consulta de serveis d'utilitat",
    "description" : "Conjunt de Serveis REST de PortaFIB per atendre consultes generiques de Portafib",
    "contact" : {
      "name" : "Departament de Govern Digital a la Fundació Bit",
      "url" : "http://governdigital.fundaciobit.org",
      "email" : "otae@fundaciobit.org"
    },
    "license" : {
      "name" : "European Union Public Licence (EUPL v1.2)",
      "url" : "https://joinup.ec.europa.eu/sites/default/files/custom-page/attachment/eupl_v1.2_es.pdf"
    },
    "version" : "1.0-SNAPSHOT"
  },
  "externalDocs" : {
    "description" : "Java API Interna Client (Github Source Code)",
    "url" : "https://github.com/GovernIB/portafib/tree/portafib-2.2/"
  },
  "servers" : [ {
    "url" : "/portafibapi/interna"
  }, {
    "url" : "http://localhost:8080/portafibapi/interna"
  }, {
    "url" : "https://dev.caib.es/portafibapi/interna"
  }, {
    "url" : "https://proves.caib.es/portafibapi/interna"
  }, {
    "url" : "https://se.caib.es/portafibapi/interna"
  }, {
    "url" : "https://www.caib.es/portafibapi/interna"
  } ],
  "tags" : [ {
    "name" : "Firma en Servidor v1",
    "description" : "Firma en servidor"
  }, {
    "name" : "Utils v1",
    "description" : "Utilitats"
  } ],
  "paths" : {
    "/secure/firmaenservidor/v1/signdocument" : {
      "post" : {
        "tags" : [ "Firma en Servidor v1" ],
        "summary" : "Operacio de firma simple en servidor d'un document",
        "operationId" : "signdocument",
        "requestBody" : {
          "description" : "Operacio de firma simple en servidor d'un document",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/FirmaSimpleSignDocumentRequest"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "Operació realitzada correctament",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/FirmaSimpleSignatureRest"
                }
              }
            }
          },
          "400" : {
            "description" : "Paràmetres incorrectes",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/RestExceptionInfo"
                }
              }
            }
          },
          "500" : {
            "description" : "Error no controlat",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/RestExceptionInfo"
                }
              }
            }
          }
        },
        "security" : [ {
          "BasicAuth" : [ ]
        } ]
      }
    },
    "/secure/firmaenservidor/v1/versio" : {
      "get" : {
        "tags" : [ "Firma en Servidor v1" ],
        "summary" : "Retorna la versió d'aquest Servei",
        "operationId" : "versio",
        "responses" : {
          "200" : {
            "description" : "Retornada correctament la versió d'aquest Servei",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          },
          "401" : {
            "description" : "No Autenticat",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          },
          "403" : {
            "description" : "No Autoritzat",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          },
          "500" : {
            "description" : "Error no controlat",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/RestExceptionInfo"
                }
              }
            }
          },
          "510" : {
            "description" : "Només s'utilitza per crear fitxer de constants...",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ConstantsWs"
                }
              }
            }
          }
        },
        "security" : [ {
          "BasicAuth" : [ ]
        } ]
      }
    },
    "/secure/utils/v1/getAvailableLanguages" : {
      "get" : {
        "tags" : [ "Utils v1" ],
        "summary" : "Retorna els idiomes disponibles.",
        "operationId" : "getAvailableLanguages",
        "parameters" : [ {
          "name" : "language",
          "in" : "query",
          "description" : "Idioma en que s'han de retornar les dades(Només suportat 'ca' o 'es')",
          "schema" : {
            "type" : "string",
            "default" : "ca"
          },
          "examples" : {
            "Català" : {
              "description" : "Català",
              "value" : "ca"
            },
            "Castellano" : {
              "description" : "Castellano",
              "value" : "es"
            }
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Operació realitzada correctament",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AvailableLanguagesRest"
                }
              }
            }
          },
          "400" : {
            "description" : "Paràmetres incorrectes",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/RestExceptionInfo"
                }
              }
            }
          },
          "500" : {
            "description" : "Error no controlat",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/RestExceptionInfo"
                }
              }
            }
          }
        },
        "security" : [ {
          "BasicAuth" : [ ]
        } ]
      }
    },
    "/secure/utils/v1/getAvailableProfiles" : {
      "get" : {
        "tags" : [ "Utils v1" ],
        "summary" : "Retorna els perfils de firma.",
        "operationId" : "getAvailableProfiles",
        "parameters" : [ {
          "name" : "language",
          "in" : "query",
          "description" : "Idioma en que s'han de retornar les dades(Només suportat 'ca' o 'es')",
          "schema" : {
            "type" : "string",
            "default" : "ca"
          },
          "examples" : {
            "Català" : {
              "description" : "Català",
              "value" : "ca"
            },
            "Castellano" : {
              "description" : "Castellano",
              "value" : "es"
            }
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Operació realitzada correctament",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AvailableProfilesRest"
                }
              }
            }
          },
          "400" : {
            "description" : "Paràmetres incorrectes",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/RestExceptionInfo"
                }
              }
            }
          },
          "500" : {
            "description" : "Error no controlat",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/RestExceptionInfo"
                }
              }
            }
          }
        },
        "security" : [ {
          "BasicAuth" : [ ]
        } ]
      }
    },
    "/secure/utils/v1/tipusdocumentalslist" : {
      "get" : {
        "tags" : [ "Utils v1" ],
        "summary" : "Retorna la llista de tipus documentals disponibles.",
        "operationId" : "tipusdocumentalslist",
        "parameters" : [ {
          "name" : "language",
          "in" : "query",
          "description" : "Idioma en que s'han de retornar les dades(Només suportat 'ca' o 'es')",
          "schema" : {
            "type" : "string",
            "default" : "ca"
          },
          "examples" : {
            "Català" : {
              "description" : "Català",
              "value" : "ca"
            },
            "Castellano" : {
              "description" : "Castellano",
              "value" : "es"
            }
          }
        }, {
          "name" : "appuser",
          "in" : "query",
          "description" : "Filtre pel nom de l'usuari aplicacio. Opcional.",
          "schema" : {
            "type" : "string"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Operació realitzada correctament",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/LlistaTipusDocumentalRest"
                }
              }
            }
          },
          "400" : {
            "description" : "Paràmetres incorrectes",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/RestExceptionInfo"
                }
              }
            }
          },
          "500" : {
            "description" : "Error no controlat",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/RestExceptionInfo"
                }
              }
            }
          }
        },
        "security" : [ {
          "BasicAuth" : [ ]
        } ]
      }
    }
  },
  "components" : {
    "schemas" : {
      "FirmaSimpleCommonInfo" : {
        "type" : "object",
        "properties" : {
          "signProfile" : {
            "type" : "string"
          },
          "languageUI" : {
            "type" : "string"
          },
          "username" : {
            "type" : "string"
          },
          "administrationID" : {
            "type" : "string"
          },
          "organizationID" : {
            "type" : "string"
          },
          "signerEmail" : {
            "type" : "string"
          }
        }
      },
      "FirmaSimpleFile" : {
        "type" : "object",
        "properties" : {
          "nom" : {
            "type" : "string"
          },
          "mime" : {
            "type" : "string"
          },
          "data" : {
            "type" : "string",
            "description" : "Contingut del fitxer. En llistats aquest camp vendrà buit.",
            "format" : "byte"
          }
        }
      },
      "FirmaSimpleFileInfoSignature" : {
        "type" : "object",
        "properties" : {
          "fileToSign" : {
            "$ref" : "#/components/schemas/FirmaSimpleFile"
          },
          "previusSignatureDetachedFile" : {
            "$ref" : "#/components/schemas/FirmaSimpleFile"
          },
          "signID" : {
            "type" : "string"
          },
          "name" : {
            "type" : "string"
          },
          "reason" : {
            "type" : "string"
          },
          "location" : {
            "type" : "string"
          },
          "signNumber" : {
            "type" : "integer",
            "format" : "int32"
          },
          "languageSign" : {
            "type" : "string"
          },
          "expedientCodi" : {
            "type" : "string"
          },
          "expedientNom" : {
            "type" : "string"
          },
          "expedientUrl" : {
            "type" : "string"
          },
          "procedimentCodi" : {
            "type" : "string"
          },
          "procedimentNom" : {
            "type" : "string"
          },
          "documentType" : {
            "type" : "integer",
            "format" : "int64"
          },
          "additionalInformation" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/FirmaSimpleKeyValue"
            }
          }
        }
      },
      "FirmaSimpleKeyValue" : {
        "type" : "object",
        "properties" : {
          "key" : {
            "type" : "string"
          },
          "value" : {
            "type" : "string"
          }
        }
      },
      "FirmaSimpleSignDocumentRequest" : {
        "type" : "object",
        "properties" : {
          "commonInfo" : {
            "$ref" : "#/components/schemas/FirmaSimpleCommonInfo"
          },
          "fileInfoSignature" : {
            "$ref" : "#/components/schemas/FirmaSimpleFileInfoSignature"
          }
        }
      },
      "FirmaSimpleCustodyInfo" : {
        "type" : "object",
        "properties" : {
          "custodyID" : {
            "type" : "string"
          },
          "csv" : {
            "type" : "string"
          },
          "csvValidationWeb" : {
            "type" : "string"
          },
          "validationFileUrl" : {
            "type" : "string"
          },
          "csvGenerationDefinition" : {
            "type" : "string"
          },
          "originalFileDirectURL" : {
            "type" : "string"
          },
          "printableFileDirectUrl" : {
            "type" : "string"
          },
          "eniFileDirectUrl" : {
            "type" : "string"
          },
          "expedientID" : {
            "type" : "string"
          },
          "documentID" : {
            "type" : "string"
          }
        }
      },
      "FirmaSimpleSignatureRest" : {
        "type" : "object",
        "properties" : {
          "signID" : {
            "type" : "string"
          },
          "status" : {
            "$ref" : "#/components/schemas/FirmaSimpleStatus"
          },
          "signedFile" : {
            "$ref" : "#/components/schemas/FirmaSimpleFile"
          },
          "signedFileInfo" : {
            "$ref" : "#/components/schemas/FirmaSimpleSignedFileInfo"
          }
        }
      },
      "FirmaSimpleSignedFileInfo" : {
        "type" : "object",
        "properties" : {
          "signOperation" : {
            "type" : "integer",
            "format" : "int32"
          },
          "signType" : {
            "type" : "string"
          },
          "signAlgorithm" : {
            "type" : "string"
          },
          "signMode" : {
            "type" : "integer",
            "format" : "int32"
          },
          "signaturesTableLocation" : {
            "type" : "integer",
            "format" : "int32"
          },
          "timeStampIncluded" : {
            "type" : "boolean"
          },
          "policyIncluded" : {
            "type" : "boolean"
          },
          "eniTipoFirma" : {
            "type" : "string"
          },
          "eniPerfilFirma" : {
            "type" : "string"
          },
          "signerInfo" : {
            "$ref" : "#/components/schemas/FirmaSimpleSignerInfo"
          },
          "custodyInfo" : {
            "$ref" : "#/components/schemas/FirmaSimpleCustodyInfo"
          },
          "validationInfo" : {
            "$ref" : "#/components/schemas/FirmaSimpleValidationInfo"
          }
        }
      },
      "FirmaSimpleSignerInfo" : {
        "type" : "object",
        "properties" : {
          "eniRolFirma" : {
            "type" : "string"
          },
          "eniSignerName" : {
            "type" : "string"
          },
          "eniSignerAdministrationId" : {
            "type" : "string"
          },
          "eniSignLevel" : {
            "type" : "string"
          },
          "signDate" : {
            "type" : "string",
            "format" : "date-time"
          },
          "serialNumberCert" : {
            "type" : "string"
          },
          "issuerCert" : {
            "type" : "string"
          },
          "subjectCert" : {
            "type" : "string"
          },
          "additionalInformation" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/FirmaSimpleKeyValue"
            }
          }
        }
      },
      "FirmaSimpleStatus" : {
        "type" : "object",
        "properties" : {
          "status" : {
            "type" : "integer",
            "format" : "int32"
          },
          "errorMessage" : {
            "type" : "string"
          },
          "errorStackTrace" : {
            "type" : "string"
          }
        }
      },
      "FirmaSimpleValidationInfo" : {
        "type" : "object",
        "properties" : {
          "checkAdministrationIDOfSigner" : {
            "type" : "boolean"
          },
          "checkDocumentModifications" : {
            "type" : "boolean"
          },
          "checkValidationSignature" : {
            "type" : "boolean"
          },
          "noCheckValidationReason" : {
            "type" : "string"
          }
        }
      },
      "RestExceptionInfo" : {
        "required" : [ "code", "errorMessage" ],
        "type" : "object",
        "properties" : {
          "code" : {
            "type" : "integer",
            "description" : "Codi de HTTP de l'error. Veure https://en.wikipedia.org/wiki/List_of_HTTP_status_codes.",
            "format" : "int32"
          },
          "errorMessage" : {
            "type" : "string",
            "description" : "Missatge de l'error"
          },
          "stackTrace" : {
            "type" : "string",
            "description" : "Stacktrace de l'excepció si n'hi hagués."
          },
          "causeException" : {
            "type" : "string",
            "description" : "Tipus de l'excepció origen (cause) si n'hi hagués."
          },
          "causeStackTrace" : {
            "type" : "string",
            "description" : "Stacktrace de l'excepció origen (cause) si n'hi hagués."
          }
        },
        "description" : "Estructura de dades utilitzada per passar informació d'un error"
      },
      "ConstantsWs" : {
        "required" : [ "STATUS_CANCELLED", "STATUS_FINAL_ERROR", "STATUS_FINAL_OK", "STATUS_INITIALIZING", "STATUS_IN_PROGRESS" ],
        "type" : "object",
        "properties" : {
          "STATUS_INITIALIZING" : {
            "type" : "integer",
            "description" : "Codi d'estat d'una petició de firma que indica un que s'esta inicialitzant",
            "format" : "int32",
            "readOnly" : true,
            "default" : 0
          },
          "STATUS_IN_PROGRESS" : {
            "type" : "integer",
            "description" : "Codi d'estat d'una petició de firma que indica un que esta en procés",
            "format" : "int32",
            "readOnly" : true,
            "default" : 1
          },
          "STATUS_FINAL_OK" : {
            "type" : "integer",
            "description" : "Codi d'estat d'una petició de firma que indica que ha finalitzat correctament",
            "format" : "int32",
            "readOnly" : true,
            "default" : 2
          },
          "STATUS_FINAL_ERROR" : {
            "type" : "integer",
            "description" : "Codi d'estat d'una petició de firma que indica que ha finalitzat amb errors",
            "format" : "int32",
            "readOnly" : true,
            "default" : -1
          },
          "STATUS_CANCELLED" : {
            "type" : "integer",
            "description" : "Codi d'estat d'una petició de firma que indica que ha sigut cancelada",
            "format" : "int32",
            "readOnly" : true,
            "default" : -2
          }
        }
      },
      "ApisIBKeyValue" : {
        "type" : "object",
        "properties" : {
          "key" : {
            "type" : "string"
          },
          "value" : {
            "type" : "string"
          }
        }
      },
      "AvailableLanguagesRest" : {
        "type" : "object",
        "properties" : {
          "list" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/ApisIBKeyValue"
            }
          }
        }
      },
      "AvailableProfile" : {
        "type" : "object",
        "properties" : {
          "code" : {
            "type" : "string"
          },
          "name" : {
            "type" : "string"
          },
          "description" : {
            "type" : "string"
          }
        }
      },
      "AvailableProfilesRest" : {
        "type" : "object",
        "properties" : {
          "data" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/AvailableProfile"
            }
          },
          "language" : {
            "type" : "string"
          }
        }
      },
      "LlistaTipusDocumentalRest" : {
        "type" : "object",
        "properties" : {
          "data" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/TipusDocumentalRest"
            }
          },
          "language" : {
            "type" : "string"
          }
        }
      },
      "TipusDocumentalRest" : {
        "type" : "object",
        "properties" : {
          "tipusDocumentID" : {
            "type" : "integer",
            "format" : "int64"
          },
          "nom" : {
            "type" : "string"
          },
          "tipusDocumentNTI" : {
            "type" : "integer",
            "format" : "int64"
          }
        }
      }
    },
    "securitySchemes" : {
      "BasicAuth" : {
        "type" : "http",
        "scheme" : "basic"
      }
    }
  }
}