<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Home - Kit de Bienvenida eIDAS Ceres</title>

    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>


<link rel="stylesheet" href="assets/css/content-style.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

    </head>

<body pageid="93981248">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">SPBONNIE</span>
                    <img class="space-logo" src="spacelogo.png" />
                </h1>
                <a href="#src-93981248" class="ht-space-link">
                    <h2>Kit de Bienvenida eIDAS Ceres</h2>
                </a>
            </header>

            <nav class="ht-pages-nav">
                <ul class="ht-pages-nav-top">
                                                <li class="leaf">
        <a class="ht-nav-page-link" href="#src-93981254">Introducci&oacute;n a OAuth 2.0</a>

            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-93981252">Entorno de integraci&oacute;n</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-97124703">Alta en el entorno de integraci&oacute;n</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-97124735">Par&aacute;metros de servicio</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-93981256">Casos de uso para Empleados P&uacute;blicos</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-95322397">Autenticaci&oacute;n de empleados p&uacute;blicos</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-93981260">Obtenci&oacute;n de documentos firmado</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-97124674">Obtenci&oacute;n de un &uacute;nico documento firmado</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-97124683">Obtenci&oacute;n de un lote de documentos firmados</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-93981258">Obtenci&oacute;n de firma raw o PKCS#1</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-97124688">Obtenci&oacute;n de una &uacute;nica firma PKCS#1</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-97124690">Obtenci&oacute;n de un lote de firmas PKCS#1</a>

            </li>
                            </ul>
            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-93981262">Utilidades para desarrolladores</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96239899">Colecci&oacute;n Postman del Kit de Bienvenida</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96239904">Casos de uso para empleados</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240036">Flujo para autenticar a un usuario y obtener informaci&oacute;n de sus atributos de identidad</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240046">Firma de documentos</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240052">Flujo para firmar un &uacute;nico documento</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240054">Flujo de firma de un lote de documentos</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240049">Firmas raw</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240268">Flujo de firma en formato raw</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240270">Flujo de firma en formato raw de un lote</a>

            </li>
                            </ul>
            </li>
                            </ul>
            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240574">Portales Minimalist - Aplicaciones web de ejemplo</a>

            </li>
                            </ul>
            </li>
                                                <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240585">Documentaci&oacute;n de las APIs de TrustedX eIDAS</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240654">TX_EIDAS_4.1.4.0 - Integraci&oacute;n con aplicaciones</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240663">TX_EIDAS_4.1.4.0 - API de autorizaci&oacute;n OAuth 2.0</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240664">TX_EIDAS_4.1.4.0 - API de autorizaci&oacute;n OAuth 2.0 - Operaciones</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240666">TX_EIDAS_4.1.4.0 - Obtener un token de acceso</a>

            </li>
                            </ul>
            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240667">TX_EIDAS_4.1.4.0 - API de informaci&oacute;n de usuario</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240668">TX_EIDAS_4.1.4.0 - Scopes de informaci&oacute;n de usuario</a>

            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240669">TX_EIDAS_4.1.4.0 - API de informaci&oacute;n de usuario - Operaciones</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240670">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n del usuario autenticado</a>

            </li>
                            </ul>
            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240696">TX_EIDAS_4.1.4.0 - API de firma de documentos</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240697">TX_EIDAS_4.1.4.0 - API de firma de documentos - Recursos</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240701">TX_EIDAS_4.1.4.0 - API de firma de documentos - Operaciones</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240703">TX_EIDAS_4.1.4.0 - Crear un recurso Documento y definiciones de firmas</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240704">TX_EIDAS_4.1.4.0 - Ejecutar un proceso de firma de documentos</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240705">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de documentos firmados</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240706">TX_EIDAS_4.1.4.0 - Obtener un documento</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240707">TX_EIDAS_4.1.4.0 - Eliminar un recurso Documento y definiciones de firmas</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240708">TX_EIDAS_4.1.4.0 - Eliminar un proceso de firma de documentos</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240709">TX_EIDAS_4.1.4.0 - Crear una definici&oacute;n de firma</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240710">TX_EIDAS_4.1.4.0 - Actualizar una definici&oacute;n de firma</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240712">TX_EIDAS_4.1.4.0 - Obtener el hash de una firma para solicitar un sello de tiempo</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240713">TX_EIDAS_4.1.4.0 - API de firma de documentos - Autorizaci&oacute;n</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240719">TX_EIDAS_4.1.4.0 - API de firma digital</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240720">TX_EIDAS_4.1.4.0 - API de firma digital - Recursos</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240721">TX_EIDAS_4.1.4.0 - Proceso de creaci&oacute;n de firma</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240722">TX_EIDAS_4.1.4.0 - API de firma digital - Operaciones</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240723">TX_EIDAS_4.1.4.0 - Crear una firma digital en servidor</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240724">TX_EIDAS_4.1.4.0 - Crear un lote de firmas digitales en servidor</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240728">TX_EIDAS_4.1.4.0 - Obtener el resultado de un proceso de creaci&oacute;n de firma</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240729">TX_EIDAS_4.1.4.0 - Eliminar un proceso de creaci&oacute;n de firma</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240730">TX_EIDAS_4.1.4.0 - API de firma digital - Autorizaci&oacute;n</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240739">TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240740">TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma - Recursos</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240741">TX_EIDAS_4.1.4.0 - Identidad de firma</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240742">TX_EIDAS_4.1.4.0 - Lista de identidades de firma</a>

            </li>
                            </ul>
            </li>
                                        <li class="collapsed">
        <a class="ht-nav-page-link" href="#src-96240743">TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma - Operaciones</a>

                    <span class="sp-toggle sp-aui-icon-small ht-pages-nav-toggle">
                <svg id="icon-minus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
                <svg id="icon-plus" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#CCCCCC">
                        <rect x="11" y="7" width="2" height="10"></rect>
                        <rect x="7" y="11" width="10" height="2"></rect>
                    </g>
                </svg>
            </span>

            <ul class="nav ht-pages-nav-sub">
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240750">TX_EIDAS_4.1.4.0 - Obtener identidades de firma</a>

            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240751">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de una identidad de firma</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240753">TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma - Autorizaci&oacute;n</a>

            </li>
                            </ul>
            </li>
                                        <li class="leaf">
        <a class="ht-nav-page-link" href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a>

            </li>
                            </ul>
            </li>
                            </ul>
            </li>
                                    </ul>
            </nav>
        </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="#src-93981248">Kit de Bienvenida eIDAS Ceres</a></li>
                                        </ul>
</div>            <h1 id="src-93981248"> <span>Home</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

    <p  >El <strong class=" ">servicio de identificaci&oacute;n y firma de FNMT</strong> ofrece la posibilidad de emplear la autenticaci&oacute;n en aplicaciones cliente con identidades digitales emitidas por FNMT y realizar firma digital con claves en servidor. El entorno de integraci&oacute;n ofrece la posibilidad de adaptar su aplicaci&oacute;n a los servicios de FNMT en un escenario controlado donde contar&aacute; con: gu&iacute;as basadas en casos de uso, ejemplos de las llamadas a implementar y soporte t&eacute;cnico a su integraci&oacute;n.    </p>
    <p  >    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" "><a   href="#src-93981254">Introducci&oacute;n a OAuth 2.0</a></strong><br/>Si es la primera vez que emplea servicios REST o no tiene experiencia con el protocolo OAuth, esta secci&oacute;n introduce los conceptos b&aacute;sicos.    </p>
</li><li class=" ">    <p  ><strong class=" "><a   href="#src-93981252">Alta en el entorno de integraci&oacute;n</a></strong><br/>Gu&iacute;a r&aacute;pida de alta en el sistema y servicios disponibles.    </p>
</li><li class=" ">    <p  ><strong class=" "><a   href="#src-93981256">Empleados P&uacute;blicos</a></strong><br/>Descripci&oacute;n de los servicios disponibles para Empleados P&uacute;blicos y gu&iacute;a de implementaci&oacute;n de cada caso de uso.    </p>
</li></ul><ul class=" "><li class=" ">    <p  ><strong class=" "><a   href="#src-93981262">Utilidades para desarrolladores</a></strong><br/>Herramientas para proveer de ejemplos pr&aacute;cticos a los desarrolladores de aplicaciones que consuman los servicios de FNMT.    </p>
</li></ul>    <div class="section section-1" id="src-93981254">
        <h1 class="heading "><span>Introducci&oacute;n a OAuth 2.0</span></h1>
    <p  >Los servicios de FNMT (TrustedX eIDAS) se basan en el framework de autorizaci&oacute;n <strong class=" "><a  class="external-link" href="https://tools.ietf.org/html/rfc6749">OAuth 2.0</a></strong>, el cual proporciona una capa de protecci&oacute;n para aquellos recursos que son propiedad de los usuarios, de manera que aplicativos de terceros no tengan acceso directo a ellos.    </p>
    <p  >Esta gu&iacute;a informativa ayuda a aprender c&oacute;mo manejar los distintos flujos otorgamiento de autorizaci&oacute;n que implementa TrustedX eIDAS para securizar su API RESTful.    </p>
    <p  >Gracias a OAuth 2.0 los servicios de TrustedX eIDAS disponen un m&eacute;todo estandarizado para solicitar recursos protegidos que pertenezcan:    </p>
<ul class=" "><li class=" ">    <p  >a un usuario del sistema .    </p>
</li><li class=" ">    <p  >al servicio del sistema en general.    </p>
</li></ul>    <p  >Cuando se da acceso a un recurso, se hace en nombre de alguien (el propietario del recurso), identificado mediante un token de acceso que representa qu&eacute; usuario ha aprobado que la aplicaci&oacute;n cliente pueda acceder a los recursos protegidos del usuario o del sistema.    </p>
    <div class="section section-2" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1CZW5lZmljaW9z">
        <h2 class="heading "><span>Beneficios</span></h2>
    <p  >Los principales beneficios de emplear el framework de autorizaci&oacute;n OAuth 2.0 aplican a los siguientes campos:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1NZWpvcmFkZWxhU2VndXJpZGFk">Mejora de la seguridad</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1GZWRlcmFjacOzbmRlSWRlbnRpZGFkZXM">Federaci&oacute;n de identidades</a>    </p>
</li></ul>    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1NZWpvcmFkZWxhU2VndXJpZGFk">
        <h3 class="heading "><span>Mejora de la Seguridad</span></h3>
    <div class="section section-4" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1Ub2tlbnNkZWFjY2Vzbw">
        <h4 class="heading "><span>Tokens de acceso</span></h4>
    <p  >Para consumir los servicios del sistema, cada aplicaci&oacute;n cliente debe incorporar en la llamada a la API un <strong class=" ">token de acceso</strong> en vez de las credenciales del usuario final. La obtenci&oacute;n de este token podr&aacute; variar en funci&oacute;n de quien sea el propietario del recurso al que se quiere acceder pero permitir&aacute; que la aplicaci&oacute;n act&uacute;e en nombre de dicho propietario durante un tiempo determinado (gracias a que cuenta con la autorizaci&oacute;n que representa dicho token).    </p>
    <p  >Cada token, a su vez, se asocia a un <strong class=" ">scope</strong>, que indica qu&eacute; recursos del sistema estar&aacute;n disponibles para determinado token. De este modo es posible restringir el uso de determinados servicios de la API de TrustedX eIDAS en funci&oacute;n del token emitido para cada aplicaci&oacute;n cliente.    </p>
    </div>
    <div class="section section-4" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1DdXN0b2RpYWRlY3JlZGVuY2lhbGVz">
        <h4 class="heading "><span>Custodia de credenciales</span></h4>
    <p  >Las aplicaciones redirigen a los usuarios a un <strong class=" ">Servidor de Autorizaci&oacute;n</strong> y este al <strong class=" ">Proveedor de Identidad</strong> donde podr&aacute;n iniciar la sesi&oacute;n; as&iacute;, cada aplicaci&oacute;n cliente, en lugar de almacenar las credenciales de los usuarios s&oacute;lo almacenar&aacute;n sus tokens de acceso. Si un password es robado, el usuario tiene que resetearlo, que tiene mucho m&aacute;s impacto que si un token es robado y posteriormente invalidado por caducidad. Este comportamiento es especialmente &uacute;til en escenarios de movilidad, evitando que el password del usuario se vea expuesto en caso de robo o compromiso del dispositivo m&oacute;vil.    </p>
    </div>
    </div>
    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1GZWRlcmFjacOzbmRlSWRlbnRpZGFkZXM">
        <h3 class="heading "><span>Federaci&oacute;n de Identidades</span></h3>
    <p  >Los usuarios pueden iniciar sesi&oacute;n en el sistema utilizando credenciales de proveedores de identidad externos reconocidos, evitando as&iacute; gestionar nuevas credenciales.    </p>
    </div>
    </div>
    <div class="section section-2" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1Db25jZXB0b3M">
        <h2 class="heading "><span>Conceptos</span></h2>
    <p  >A continuaci&oacute;n se introducen los conceptos principales relativos al protocolo OAuth 2.0 que se emplear&aacute;n en este documento:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1Qcm9waWV0YXJpb2RldW5yZWN1cnNv">Propietario de un recurso</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1BcGxpY2FjacOzbkNsaWVudGU">Aplicaci&oacute;n Cliente</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1TZXJ2aWRvcmRlQXV0b3JpemFjacOzbg">Servidor de Autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1TZXJ2aWRvcmRlUmVjdXJzb3M">Servidor de Recursos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1TY29wZXNkZWFjY2Vzbw">Scopes de acceso</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1FbmRwb2ludHM">Endpoints</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1GbHVqb2RlQXV0b3JpemFjacOzbg">Flujo de Autorizaci&oacute;n</a>    </p>
</li></ul>    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1Qcm9waWV0YXJpb2RldW5yZWN1cnNv">
        <h3 class="heading "><span>Propietario de un recurso</span></h3>
    <p  >El propietario de un recurso es la entidad que es capaz de otorgar acceso a un recurso protegido.    </p>
    <p  >Ejemplo: las claves de firma de un usuario s&oacute;lo pueden emplearse con el consentimiento de dicho usuario.    </p>
    </div>
    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1BcGxpY2FjacOzbkNsaWVudGU">
        <h3 class="heading "><span>Aplicaci&oacute;n Cliente</span></h3>
    <p  >Una aplicaci&oacute;n cliente es aquella que realiza peticiones sobre recursos del sistema en nombre del propietario de dicho recurso.    </p>
    <p  >Las aplicaciones cliente pueden ser una aplicaciones web o aplicaciones nativas, ya sean de escritorio o para dispositivos m&oacute;viles. La especificaci&oacute;n OAuth 2.0 no impone limitaciones con respecto al entorno en el cual se ejecute el cliente, aunque por seguridad si cambiar&aacute; la forma en la que deban autenticarse frente al sistema.    </p>
    </div>
    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1TZXJ2aWRvcmRlQXV0b3JpemFjacOzbg">
        <h3 class="heading "><span>Servidor de Autorizaci&oacute;n</span></h3>
    <p  >Para que una aplicaci&oacute;n cliente pueda acceder a un recurso protegido antes debe ser autorizado por el propietario del recurso. Esa autorizaci&oacute;n es gestionada por el Servidor de Autorizaci&oacute;n que pregunta al propietario del recurso si concede acceso al recurso en cuesti&oacute;n a la aplicaci&oacute;n cliente que lo ha solicitado.    </p>
    <p  >Si el propietario concede la autorizaci&oacute;n, el servidor emitir&aacute; un token de acceso para la aplicaci&oacute;n cliente. Este token ser&aacute; v&aacute;lido durante un periodo de tiempo determinado y estar&aacute; asociado al recurso espec&iacute;fico al que se ha concedido acceso.    </p>
    </div>
    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1TZXJ2aWRvcmRlUmVjdXJzb3M">
        <h3 class="heading "><span>Servidor de Recursos</span></h3>
    <p  >Es el encargado de servir los recursos protegidos cuando recibe peticiones de las aplicaciones cliente que presentan el correspondiente token de acceso.    </p>
    </div>
    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1TY29wZXNkZWFjY2Vzbw">
        <h3 class="heading "><span>Scopes de acceso</span></h3>
    <p  >Par&aacute;metro utilizado por las aplicaciones cliente para indicar a qu&eacute; partes o tipos de recursos protegidos quiere acceder en nombre del propietario, lo que supone una buena pr&aacute;ctica de seguridad para evitar el acceso a todos los recursos disponibles.    </p>
    </div>
    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1FbmRwb2ludHM">
        <h3 class="heading "><span>Endpoints</span></h3>
    <p  >URLs involucradas en los flujos de autorizaci&oacute;n de OAuth 2.0.    </p>
    <p  >Existen dos tipos de endpoints a tener en cuenta:    </p>
    <div class="section section-4" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1TZXJ2ZXJlbmRwb2ludHM">
        <h4 class="heading "><span>Server endpoints</span></h4>
<ul class=" "><li class=" ">    <p  ><strong class=" ">Authorization endpoint</strong>: utilizado por las aplicaciones cliente para solicitar la autorizaci&oacute;n al propietario de los recursos.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">/trustedx-authserver/oauth/{as}</code></div>
</div>
    </div>
</li><li class=" ">    <p  ><strong class=" ">Token endpoint</strong>: utilizado por los aplicativos cliente para poder suministrar el otorgamiento de autorizaci&oacute;n conseguido y conseguir como resultado el token de acceso.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">/trustedx-authserver/oauth/{as}/token</code></div>
</div>
    </div>
</li></ul>    </div>
    <div class="section section-4" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1DbGllbnRlbmRwb2ludHM">
        <h4 class="heading "><span>Client endpoints</span></h4>
<ul class=" "><li class=" ">    <p  ><strong class=" ">Redirection (callback) endpoint</strong>: utilizado por el servidor de autenticaci&oacute;n para devolver las credenciales de autorizaci&oacute;n a la aplicaci&oacute;n cliente. Cada aplicaci&oacute;n podr&aacute; establecer la URL de callback que vaya a emplear. En entornos en producci&oacute;n, dicha URL deber&aacute; proporcionarse al Proveedor de Identidad por seguridad.    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En los endpoints mostrados, el campo {as} representa al identificador del Servidor de Autorizaci&oacute;n. En el apartado <a   href="#src-93981252">Entorno de integraci&oacute;n</a>, puedes consultar el identificador de esta entidad en el servicio de FNMT.    </p>
        </div>
    </div>
    </div>
    </div>
    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1GbHVqb2RlQXV0b3JpemFjacOzbg">
        <h3 class="heading "><span>Flujo de Autorizaci&oacute;n</span></h3>
    <p  >Los flujos de autorizaci&oacute;n modelan las distintas formas en las que una aplicaci&oacute;n cliente puede solicitar el token de acceso al servidor de autorizaci&oacute;n. TrustedX eIDAS implementa dos flujos de autorizaci&oacute;n que deber&aacute;n invocarse seg&uacute;n la operaci&oacute;n que se desea realizar.    </p>
    <div class="section section-4" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1BdXRob3JpemF0aW9uQ29kZUdyYW50KEFDRyk">
        <h4 class="heading "><span>Authorization Code Grant (ACG)</span></h4>
    <p  >Es necesario siempre que el propietario del recurso sea el usuario final y, por tanto, deba otorgar su consentimiento para que la aplicaci&oacute;n obtenga el token. Consta de <strong class=" ">dos pasos</strong>:    </p>
<ol class=" "><li class=" ">    <p  >La aplicaci&oacute;n cliente redirige el User Agent (t&iacute;picamente el navegador del usuario) al endpoint de autorizaci&oacute;n. &Eacute;ste gestiona la autenticaci&oacute;n del propietario del recurso, haciendo que se autentique para posteriormente darle a escoger si autoriza o no la petici&oacute;n de la aplicaci&oacute;n cliente, t&iacute;picamente mediante una ventana en el navegador web. Posteriormente, si el usuario autoriza la petici&oacute;n, se redirige su User Agent al endpoint de redirecci&oacute;n suministrado como par&aacute;metro en la redirecci&oacute;n inicial devolviendo un c&oacute;digo de autorizaci&oacute;n.    </p>
</li><li class=" ">    <p  >La aplicaci&oacute;n cliente solicita al servidor de autorizaci&oacute;n el token de acceso presentando sus credenciales de autenticaci&oacute;n as&iacute; como el c&oacute;digo de autenticaci&oacute;n anterior.    <span style="color: #ff0000;">
    </span>
    </p>
</li></ol>    <p  >    <span style="color: #ff0000;">
    <img  class="confluence-embedded-image" src="images/download/attachments/93981254/image2017-12-4_14_19_23.png" alt="images/download/attachments/93981254/image2017-12-4_14_19_23.png"   />
    </span>
    </p>
    <p  >    <span style="color: #ff0000;">
    </span>
    </p>
    </div>
    <div class="section section-4" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1DbGllbnRDcmVkZW50aWFsc0dyYW50KENDRyk">
        <h4 class="heading "><span>Client Credentials Grant (CCG)</span></h4>
    <p  >    <span style="color: #ff0000;">
    <span style="color: #333333;">
Se debe emplear cuando es necesario acceder a recursos sin la intervenci&oacute;n del usuario final. En este caso, el acceso a los recursos se realiza en nombre de la propia aplicaci&oacute;n cliente y no del usuario final.    </span>
     <span style="color: #333333;">
Consta de <strong class=" ">un &uacute;nico paso</strong>:    </span>
<br/>    </span>
    </p>
<ol class=" "><li class=" ">    <p  >La aplicaci&oacute;n cliente realiza una petici&oacute;n al servidor de autenticaci&oacute;n presentando sus credenciales de autenticaci&oacute;n. Tras la autenticaci&oacute;n gestionada por el servidor de autorizaci&oacute;n se obtiene como respuesta el token de acceso.    </p>
</li></ol>    <p  >    <span style="color: #ff0000;">
    <img  class="confluence-embedded-image" src="images/download/attachments/93981254/image2017-12-4_14_21_52.png" alt="images/download/attachments/93981254/image2017-12-4_14_21_52.png"   />
    </span>
    </p>
    <p  >    <span style="color: #ff0000;">
<br/>    </span>
    </p>
    </div>
    </div>
    </div>
    <div class="section section-2" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1Db25zaWRlcmFjaW9uZXNkZXNlZ3VyaWRhZA">
        <h2 class="heading "><span>Consideraciones de seguridad</span></h2>
    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC3Cv1F1w6lpbmZvcm1hY2nDs25oYXlxdWVwcm90ZWdlcj8">
        <h3 class="heading "><span>&iquest;Qu&eacute; informaci&oacute;n hay que proteger?</span></h3>
<ul class=" "><li class=" ">    <p  >El identificador y password del aplicativo cliente, ya que podr&iacute;an usarse para suplantar al cliente original.    </p>
</li><li class=" ">    <p  >El token de acceso, ya que podr&iacute;a utilizarse para acceder a recursos protegidos en nombre del usuario y realizar operaciones fraudulentas con ellos.    </p>
</li><li class=" ">    <p  >Las credenciales de los usuarios finales ya que un atacante podr&iacute;a utilizarlas de varias maneras maliciosas.    </p>
</li></ul>    </div>
    <div class="section section-3" id="src-93981254_safe-id-SW50cm9kdWNjacOzbmFPQXV0aDIuMC1Tb2JyZWVscHJvdG9jb2xvT0F1dGgyLjA">
        <h3 class="heading "><span>Sobre el protocolo OAuth 2.0</span></h3>
<ul class=" "><li class=" ">    <p  >Los scopes especifican aquellos recursos a los que una aplicaci&oacute;n cliente tendr&aacute; acceso en nombre del usuario. Funcionalidades:    </p>
<ul class=" "><li class=" ">    <p  >Limitan el acceso a &uacute;nicamente aquellos recursos que son realmente necesarios.    </p>
</li><li class=" ">    <p  >Minimizan el da&ntilde;o que podr&aacute; causar un atacante si se hiciera con un token de acceso.    </p>
</li><li class=" ">    <p  >Proporcionan una visi&oacute;n general de las funcionalidades del API que son accesibles por las aplicaciones clientes mediante los correspondientes tokens de acceso.    </p>
</li></ul></li><li class=" ">    <p  >Si los tokens de acceso emitidos por el sistema son de &quot;vida corta&quot; (segundos) se reduce el tiempo durante el cual un atacante podr&aacute; realizar acciones perjudiciales.    </p>
</li><li class=" ">    <p  >El c&oacute;digo de autorizaci&oacute;n del flujo ACG se incluye en la redirecci&oacute;n del navegador web del usuario a la URL de redirecci&oacute;n especificada como par&aacute;metro en la petici&oacute;n de autorizaci&oacute;n, tambi&eacute;n llamada URI de callback. Los atacantes pueden intentar acceder a ese par&aacute;metro de la URI, la cach&eacute; de navegador, etc.    </p>
</li><li class=" ">    <p  >La URI de redirecci&oacute;n, tambi&eacute;n llamada de callback, es un par&aacute;metro especificado por la aplicaci&oacute;n cliente al servidor de autorizaci&oacute;n e indica la direcci&oacute;n donde &eacute;ste tiene que devolver la informaci&oacute;n resultante de la petici&oacute;n realizada. De esta manera se previenen ataques de phishing (suplantaci&oacute;n de la identidad) ya que en el sistema se registran tambi&eacute;n estas URIs, realiz&aacute;ndose la comprobaci&oacute;n de que coincidan. Adem&aacute;s en el caso de los flujos ACG se comprueban que las URIs de callback del primer y segundo paso del flujo coincidan.    </p>
</li><li class=" ">    <p  >En el primer paso del flujo ACG el par&aacute;metro &quot;state&quot; contendr&aacute; un valor aleatorio especificado por la aplicaci&oacute;n cliente de manera que el servidor simplemente lo devuelva en la respuesta de callback. De esta manera el cliente puede comprobar que coincidan, previniendo as&iacute; lo ataques de tipo CSRF (cross-site request forgery)    </p>
</li><li class=" ">    <p  >El identificador del cliente es un par&aacute;metro m&aacute;s de las peticiones que entre otros permite al servidor de autorizaci&oacute;n gestionar su autenticaci&oacute;n.    </p>
</li><li class=" ">    <p  >Todas las peticiones enviadas por las aplicaciones cliente se recomienda que se hagan sobre TLS para mantener la confidencialidad de los datos intercambiados por la red correspondiente, previniendo ataques de man-in-the-middle y replay attacks de peticiones previas.    </p>
</li></ul>    <p  >    </p>
    <p  >    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-93981252">
        <h1 class="heading "><span>Entorno de integraci&oacute;n</span></h1>
    <p  >El entorno de integraci&oacute;n se compone de tres elementos:    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" ">Proveedor de identidad y servicios de firma</strong>: servicios de autenticaci&oacute;n y firma digital ofrecidos por FNMT para los <a   href="#src-93981256">Empleados P&uacute;blicos</a>.    </p>
</li><li class=" ">    <p  ><strong class=" ">Aplicaci&oacute;n de firma</strong>: aplicaci&oacute;n de ejemplo para probar la autenticaci&oacute;n del usuario con las credenciales proporcionadas y la firma digital de documentos con la clave en servidor.    </p>
</li><li class=" ">    <p  ><strong class=" ">Portal del usuario</strong>: aplicaci&oacute;n de gesti&oacute;n para la emisi&oacute;n de identidades de firma y actualizaci&oacute;n del PIN.    </p>
</li></ul>    <p  >    <img  class="confluence-embedded-image image-center" src="images/download/attachments/93981252/image2017-11-21_15_23_10.png" alt="images/download/attachments/93981252/image2017-11-21_15_23_10.png"  height="250" />
        </p>
    <p  >Las siguientes secciones te guiar&aacute;n sobre el registro en el entorno y su uso:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-97124703">Alta en el entorno de integraci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-97124735">Par&aacute;metros de servicio</a>    </p>
</li></ul>    <p  >    </p>
    <div class="section section-2" id="src-97124703">
        <h2 class="heading "><span>Alta en el entorno de integraci&oacute;n</span></h2>
    <p  >El alta en el entorno de integraci&oacute;n se realiza bajo demanda. Para ello, deber&aacute;s solicitarle el alta a FNMT mandando un correo electr&oacute;nico a la siguiente direcci&oacute;n: nube.ceres@fnmt.es.    </p>
    <p  >En dicho correo, deber&aacute;s incluir la informaci&oacute;n que se asociar&aacute; a tu usuario de pruebas:    </p>
<ul class=" "><li class=" ">    <p  >Nombre de pila.    </p>
</li><li class=" ">    <p  >Primer apellido.    </p>
</li><li class=" ">    <p  >DNI.    </p>
</li><li class=" ">    <p  >Direcci&oacute;n de correo electr&oacute;nico.    </p>
</li><li class=" ">    <p  >Usuario: alias en el sistema.    </p>
</li><li class=" ">    <p  >Dominio: Empleado P&uacute;blico.    </p>
</li><li class=" ">    <p  >CIF: S&oacute;lo si el dominio es Empleado P&uacute;blico.    </p>
</li><li class=" ">    <p  >Nombre de la organizaci&oacute;n: S&oacute;lo si el dominio es Empleado P&uacute;blico.    </p>
</li></ul>    <div class="section section-3" id="src-97124703_safe-id-QWx0YWVuZWxlbnRvcm5vZGVpbnRlZ3JhY2nDs24tRGF0b3NkZXBydWViYQ">
        <h3 class="heading "><span>Datos de prueba</span></h3>
    <p  >Tras el alta en el servicio dispondr&aacute;s de los siguientes elementos, cuyos datos obtendr&aacute;s tambi&eacute;n por correo electr&oacute;nico.    </p>
<ul class=" "><li class=" ">    <p  >Usuario de prueba &rarr; usuario y password asociado a los datos proporcionados.    </p>
</li><li class=" ">    <p  >Aplicaci&oacute;n de prueba &rarr; identificador de tu aplicaci&oacute;n cliente (<tt class=" ">client_id</tt>) y <tt class=" ">API_KEY</tt>. Deber&aacute;s usar estos elementos en las llamadas que realices a los servicios de FNMT.    </p>
</li></ul>    <p  >Para comprobar que los datos recibidos est&aacute;n operativos, dirigite al <a  class="external-link" href="https://cloudid.demo.ceres.fnmt.es/regportal/home">Portal de usuario</a> (https://cloudid.demo.ceres.fnmt.es/regportal/home). En esta aplicaci&oacute;n podr&aacute;s acceder con cualquiera de los flujos de autenticaci&oacute;n disponibles en el entorno y comprobar que tus datos son correctos.    </p>
    <p  >    <span style="color: #ff0000;">
    <img  class="confluence-embedded-image" src="images/download/attachments/97124703/regportal.png" alt="images/download/attachments/97124703/regportal.png"  height="250" />
    </span>
    </p>
    <p  >    <span style="color: #ff0000;">
    <img  class="confluence-embedded-image" src="images/download/attachments/97124703/authN.png" alt="images/download/attachments/97124703/authN.png"  height="400" />
    </span>
    </p>
    </div>
    <div class="section section-3" id="src-97124703_safe-id-QWx0YWVuZWxlbnRvcm5vZGVpbnRlZ3JhY2nDs24tRW1pc2nDs25kZWNyZWRlbmNpYWxlcw">
        <h3 class="heading "><span>Emisi&oacute;n de credenciales</span></h3>
    <p  >Para emitir claves de firma en el servidor, dir&iacute;gete al men&uacute; IDENTIDAD EN LA NUBE. Si no dispones de ninguna clave en el sistema s&oacute;lo aparecer&aacute; el bot&oacute;n Generar Identidad.    </p>
    <p  >    <span style="color: #ff0000;">
    <img  class="confluence-embedded-image" src="images/download/attachments/97124703/regportal-generar-serverid.png" alt="images/download/attachments/97124703/regportal-generar-serverid.png"  height="150" />
    </span>
    </p>
    <p  >Si ya dispones de claves en el sistema, puedes revocarlas generando nuevas claves con el mismo bot&oacute;n.    </p>
    <p  >    </p>
    <p  >    <span style="color: #000000;">
    <span style="color: #333333;">
Puedes usar el <a  class="external-link" href="https://cloudid.demo.ceres.fnmt.es/docsign/home">Portal de firmas de ejemplo</a> (https://cloudid.demo.ceres.fnmt.es/docsign/home) para comprobar que tus claves de firma son correctas as&iacute; como el PIN de firma.    </span>
    </span>
    </p>
    <p  >    <span style="color: #000000;">
    <img  class="confluence-embedded-image" src="images/download/attachments/97124703/portalfirma.png" alt="images/download/attachments/97124703/portalfirma.png"  height="150" />
    </span>
    </p>
    <p  >    </p>
    <p  >    <span style="color: #000000;">
    <img  class="confluence-embedded-image" src="images/download/attachments/97124703/portalfirma-menu.png" alt="images/download/attachments/97124703/portalfirma-menu.png"  height="150" />
    </span>
    </p>
    </div>
    </div>
    <div class="section section-2" id="src-97124735">
        <h2 class="heading "><span>Par&aacute;metros de servicio</span></h2>
    <p  >    <span style="color: #333333;">
A continuaci&oacute;n se listan y describen el conjunto de literales que interviene en las llamadas a los servicios de identificaci&oacute;n y firma de FNMT.<br/>    </span>
    </p>
    <div class="section section-3" id="src-97124735_safe-id-UGFyw6FtZXRyb3NkZXNlcnZpY2lvLURhdG9zZGVjb25leGnDs24">
        <h3 class="heading "><span>Datos de conexi&oacute;n </span></h3>
    <div  class="tablewrap">
        <table class="wrapped relative-table confluenceTable">
                    <colgroup>
                                    <col  width="36%"/>
                                    <col  width="63%"/>
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >URLs de servicio    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a  class="external-link" href="https://cloudid.demo.ceres.fnmt.es">https://cloudid.demo.ceres.fnmt.es</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Servicios de autenticaci&oacute;n y firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a  class="external-link" href="https://cloudid-auth.demo.ceres.fnmt.es">https://cloudid-auth.demo.ceres.fnmt.es</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Servicios de autenticaci&oacute;n que exigen SSL mutuo (Autenticaci&oacute;n con certificado).    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-3" id="src-97124735_safe-id-UGFyw6FtZXRyb3NkZXNlcnZpY2lvLUlkZW50aWZpY2Fkb3Jlc2ludGVybm9z">
        <h3 class="heading "><span>Identificadores internos</span></h3>
    <div class="section section-4" id="src-97124735_safe-id-UGFyw6FtZXRyb3NkZXNlcnZpY2lvLUVudGlkYWRlc2RlbHNpc3RlbWE">
        <h4 class="heading "><span>Entidades del sistema</span></h4>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Identificador    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">as-employee</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Servidor de autorizaci&oacute;n para empleados p&uacute;blicos    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">idp-employee</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Proveedor de identidad para empleados p&uacute;blicos    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-4" id="src-97124735_safe-id-UGFyw6FtZXRyb3NkZXNlcnZpY2lvLU5pdmVsZXNkZWNvbmZpYW56YQ">
        <h4 class="heading "><span>Niveles de confianza</span></h4>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Identificador    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:tws:policies:authentication:level:low</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Todos los mecanismos de autenticaci&oacute;n de nivel bajo y superior.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:tws:policies:authentication:level:medium</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Todos los mecanismos de autenticaci&oacute;n de nivel medio y superior.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:tws:policies:authentication:level:high</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Todos los mecanismos de autenticaci&oacute;n de nivel alto y superior.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:tws:policies:authentication:level:very_high</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Todos los mecanismos de autenticaci&oacute;n de nivel muy alto.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-4" id="src-97124735_safe-id-UGFyw6FtZXRyb3NkZXNlcnZpY2lvLUZsdWpvc2RlYXV0ZW50aWNhY2nDs24">
        <h4 class="heading "><span>Flujos de autenticaci&oacute;n</span></h4>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Identificador    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:fnmt:authentication:flow:password_otp</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Autenticaci&oacute;n con contrase&ntilde;a y OTP v&iacute;a email.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:fnmt:authentication:flow:cert</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Autenticaci&oacute;n con certificado electr&oacute;nico de FNMT.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:fnmt:authentication:flow:password</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Autenticaci&oacute;n con contrase&ntilde;a    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-4" id="src-97124735_safe-id-UGFyw6FtZXRyb3NkZXNlcnZpY2lvLVNjb3Blcw">
        <h4 class="heading "><span>Scopes</span></h4>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Identificador    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Flujo OAuth permitido    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:fnmt:employee</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener los datos de usuarios de empleados p&uacute;blicos    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:authn_details</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener detalles de la autenticaci&oacute;n    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:sign:process:document</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener documentos firmados    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >CCG, ACG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:sign:identity:use:server</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener una firma raw (PKCS#1)    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:sign:identity:profile</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener los atributos de identidad de firma    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >CCG, ACG    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-4" id="src-97124735_safe-id-UGFyw6FtZXRyb3NkZXNlcnZpY2lvLUV0aXF1ZXRhcw">
        <h4 class="heading "><span>Etiquetas</span></h4>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Identificador    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >fnmt    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Cualquier identidad de firma que tenga el usuario    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >cloudid    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identidad de firma en servidor    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-93981256">
        <h1 class="heading "><span>Casos de uso para Empleados P&uacute;blicos</span></h1>
    <p  >Si los usuarios de tu aplicaci&oacute;n son Empleados P&uacute;blicos, FNMT pone a tu disposici&oacute;n un Proveedor de Identidad y un Servidor de Autorizaci&oacute;n (vea <a   href="#src-93981254">Introducci&oacute;n a OAuth 2.0</a>) para mas detalles sobre estos conceptos) en el que gestionar los servicios para este colectivo.    </p>
    <p  >Las operaciones que los Empleados P&uacute;blicos pueden realizar son:    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" "><a   href="#src-95322397">Autenticaci&oacute;n de empleados p&uacute;blicos</a></strong><br/>Uso de los servicios de autenticaci&oacute;n de FNMT para controlar el acceso de los empleados p&uacute;blicos a tu aplicaci&oacute;n.    </p>
</li><li class=" ">    <p  ><strong class=" "><a   href="#src-93981260">Obtenci&oacute;n de documentos firmado</a></strong><br/>Firma de documentos con las claves en servidor de los usuarios finales de tu aplicaci&oacute;n. La firma de los documentos puede realizarse en dos modalidades:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-97124674">Firma de un documento</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-97124683">Firma de un lote de documentos</a>    </p>
</li></ul>    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Los formatos soportados actualmente son: PAdES y XAdES (XMLDSig, EPES y BES, con y sin sello de tiempo y en las opciones enveloped y detached).    </p>
        </div>
    </div>
</li></ul><ul class=" "><li class=" ">    <p  class="with-breadcrumbs"><strong class=" "><a   href="#src-93981258">Obtenci&oacute;n de firma raw o PKCS#1</a></strong><br/>Firma PKCS#1 con las claves en servidor de los usuarios finales de tu aplicaci&oacute;n. La firma PKCS#1 puede realizarse en dos modalidades:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-97124688">Firma de un hash</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-97124690">Firma de un lote de hashes</a>    </p>
</li></ul>    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >Para conseguir un documento final firmado, recuerda que deber&aacute;s realizar los procesos de pre-firma (obtenci&oacute;n del hash) y post-firma (inclusi&oacute;n del PKCS#1 en el documento). Estos procedimientos tambi&eacute;n es posible realizarlos con el API del sistema mediante una integraci&oacute;n avanazada. Si deseas probar esta funcionalidad, por favor, consulta con el servicio de soporte t&eacute;cnico los detalles.    </p>
        </div>
    </div>
</li></ul>    <p  >    </p>
    <div class="section section-2" id="src-95322397">
        <h2 class="heading "><span>Autenticaci&oacute;n de empleados p&uacute;blicos</span></h2>
    <p  >Autenticaci&oacute;n de empleados p&uacute;blicos mediante el servicio de identificaci&oacute;n de FNMT.    </p>
    <div class="section section-3" id="src-95322397_safe-id-QXV0ZW50aWNhY2nDs25kZWVtcGxlYWRvc3DDumJsaWNvcy1Db25zaWRlcmFjaW9uZXNwcmV2aWFz">
        <h3 class="heading "><span>Consideraciones previas</span></h3>
    <p  class="confluence-link">Aseg&uacute;rate de contar con el <strong class=" "><tt class=" ">client_id</tt></strong> y el <strong class=" "><tt class=" ">API_KEY</tt></strong> con el que se dio de alta la aplicaci&oacute;n cliente en el entorno de integraci&oacute;n (ver <a   href="#src-97124703">Alta en el entorno de integraci&oacute;n</a>).    </p>
    </div>
    <div class="section section-3" id="src-95322397_safe-id-QXV0ZW50aWNhY2nDs25kZWVtcGxlYWRvc3DDumJsaWNvcy1GbHVqb2RlbGxhbWFkYXM">
        <h3 class="heading "><span>Flujo de llamadas</span></h3>
    <p  >A continuaci&oacute;n se muestra un diagrama con el flujo de mensajer&iacute;a que intervienen en este caso de uso    </p>
    <p  >    <img  class="confluence-embedded-image image-center" src="images/download/attachments/95322397/OAuthForAuthn.png" alt="images/download/attachments/95322397/OAuthForAuthn.png"   />
        </p>
    <p  >Documentaci&oacute;n de referencia de las operaciones que se deben implementar:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240665">Obtener autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666">Obtener un token de acceso</a> (flujo Authorization Code Grant)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240670">Obtener informaci&oacute;n del usuario autenticado</a>    </p>
</li></ul>    <p  >Ejemplo <a   href="#src-96240036">Postman</a>.    </p>
    </div>
    </div>
    <div class="section section-2" id="src-93981260">
        <h2 class="heading "><span>Obtenci&oacute;n de documentos firmado</span></h2>
    <p  >Uso del servicio de firma remota de documentos.    </p>
    <div class="section section-3" id="src-93981260_safe-id-T2J0ZW5jacOzbmRlZG9jdW1lbnRvc2Zpcm1hZG8tQ29uc2lkZXJhY2lvbmVzcHJldmlhcw">
        <h3 class="heading "><span>Consideraciones previas</span></h3>
<ul class=" "><li class=" ">    <p  >Aseg&uacute;rate de contar con el <strong class=" "><tt class=" ">client_id</tt></strong> y el <strong class=" "><tt class=" ">API_KEY</tt></strong> con el que se dio de alta la aplicaci&oacute;n cliente en el entorno de integraci&oacute;n (ver <a   href="#src-97124703">Alta en el entorno de integraci&oacute;n</a>).    </p>
</li><li class=" ">    <p  >Este servicio implica el env&iacute;o de los documentos al sistema de FNMT. Verifica que dicho env&iacute;o no entra en conflicto con la pol&iacute;tica de seguridad de tu organizaci&oacute;n.    </p>
</li><li class=" ">    <p  >Los usuarios del sistema deber&aacute;n disponer de claves provisionadas. Si no dispones de claves, genere las claves de su usuario como se explica en <a   href="#src-97124703">Alta en el entorno de integraci&oacute;n</a>.    </p>
</li></ul>    </div>
    <div class="section section-3" id="src-93981260_safe-id-T2J0ZW5jacOzbmRlZG9jdW1lbnRvc2Zpcm1hZG8tQ2Fzb3NkaXNwb25pYmxlcw">
        <h3 class="heading confluence-link"><span>Casos disponibles</span></h3>
    <p  >Los casos de uso disponibles en el sistema son:    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" "><a   href="#src-97124674">Obtenci&oacute;n de un &uacute;nico documento firmado</a></strong><br/>Firma digital de un documento con las claves en servidor del usuario.    </p>
</li></ul><ul class=" "><li class=" ">    <p  ><strong class=" "><a   href="#src-97124683">Obtenci&oacute;n de un lote de documentos firmados</a></strong><br/>Firma digital de un lote de documentos con las claves en servidor del usuario.    </p>
</li></ul>    </div>
    <div class="section section-3" id="src-97124674">
        <h3 class="heading "><span>Flujo de llamadas</span></h3>
    <p  >A continuaci&oacute;n se muestra un diagrama con el flujo de mensajer&iacute;a que intervienen en este caso de uso.    </p>
    <p  >    </p>
    <p  >    <img  class="confluence-embedded-image image-center" src="images/download/attachments/97124674/SingleDocumentSignature.png" alt="images/download/attachments/97124674/SingleDocumentSignature.png"   />
        </p>
    <p  >Documentaci&oacute;n de referencia de las operaciones que se deben implementar:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240666">Obtener un token de acceso</a> (flujo Client Credentials Grant)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702">Crear un proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240704">Ejecutar un proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240706">Obtener un documento</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240708">Eliminar un proceso de firma de documentos</a>    </p>
</li></ul>    <p  >Ejemplo <a   href="#src-96240052">Postman</a>.    </p>
    </div>
    <div class="section section-3" id="src-97124683">
        <h3 class="heading "><span>Flujo de llamadas</span></h3>
    <p  >A continuaci&oacute;n se muestra un diagrama con el flujo de mensajer&iacute;a que intervienen en este caso de uso.    </p>
    <p  >    </p>
    <p  >    <img  class="confluence-embedded-image image-center" src="images/download/attachments/97124683/BatchDocumentSignature.png" alt="images/download/attachments/97124683/BatchDocumentSignature.png"   />
        </p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >El s&iacute;mbolo     <img  class="confluence-embedded-image confluence-thumbnail" src="images/download/thumbnails/97124683/image2017-12-21_15-48-12.png" alt="images/download/thumbnails/97124683/image2017-12-21_15-48-12.png"  height="21" />
 marca aquellas llamadas que deber&aacute;n repetirse en funci&oacute;n del n&uacute;mero de documentos que componga el lote. As&iacute;, el lote lo conforman tres documentos, son llamadas que habr&aacute; que realizar 3 veces, una por documento.    </p>
        </div>
    </div>
    <p  >Documentaci&oacute;n de referencia de las operaciones que se deben implementar:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240666">Obtener un token de acceso</a> (flujo Client Credentials Grant)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703">Crear un recurso Documento y definiciones de firmas</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702">Crear un proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240704">Ejecutar un proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240705">Obtener informaci&oacute;n de documentos firmados</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240706">Obtener un documento</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240707">Eliminar un recurso Documento y definiciones de firmas</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240708">Eliminar un proceso de firma de documentos</a>    </p>
</li></ul>    <p  >Ejemplo <a   href="#src-96240054">Postman</a>.    </p>
    <p  >    </p>
    </div>
    </div>
    <div class="section section-2" id="src-93981258">
        <h2 class="heading "><span>Obtenci&oacute;n de firma raw o PKCS#1</span></h2>
    <p  >Uso del servicio de firma digital de FNMT.    </p>
    <div class="section section-3" id="src-93981258_safe-id-T2J0ZW5jacOzbmRlZmlybWFyYXdvUEtDUyMxLUNvbnNpZGVyYWNpb25lc3ByZXZpYXM">
        <h3 class="heading "><span>Consideraciones previas</span></h3>
<ul class=" "><li class="confluence-link ">    <p  >Aseg&uacute;rate de contar con el <strong class=" "><tt class=" ">client_id</tt></strong> y el <strong class=" "><tt class=" ">API_KEY</tt></strong> con el que se dio de alta la aplicaci&oacute;n cliente en el entorno de integraci&oacute;n (ver <a   href="#src-97124703">Alta en el entorno de integraci&oacute;n</a>).    </p>
</li><li class=" ">    <p  >Los usuarios del sistema deber&aacute;n disponer de claves provisionadas. Si no dispones de claves, genere las claves de su usuario como se explica en <a   href="#src-97124703">Alta en el entorno de integraci&oacute;n</a>.    </p>
</li></ul>    </div>
    <div class="section section-3" id="src-93981258_safe-id-T2J0ZW5jacOzbmRlZmlybWFyYXdvUEtDUyMxLUNhc29zZGlzcG9uaWJsZXM">
        <h3 class="heading confluence-link"><span>Casos disponibles</span></h3>
    <p  >Los casos de uso disponibles en el sistema son:    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" "><a   href="#src-97124688">Obtenci&oacute;n de una &uacute;nica firma PKCS#1</a></strong><br/>Generaci&oacute;n de una firma raw con los servicios de FNMT.    </p>
</li><li class=" ">    <p  ><strong class=" "><a   href="#src-97124690">Obtenci&oacute;n de un lote de firmas PKCS#1</a></strong><br/>Generaci&oacute;n de un lote de firmas raw con los servicios de FNMT.    </p>
</li></ul>    </div>
    <div class="section section-3" id="src-97124688">
        <h3 class="heading "><span>Flujo de llamadas</span></h3>
    <p  >A continuaci&oacute;n se muestra un diagrama con el flujo de mensajer&iacute;a que intervienen en este caso de uso.    </p>
    <p  >    </p>
    <p  >    <img  class="confluence-embedded-image image-center" src="images/download/attachments/97124688/SingleRawSignature2.png" alt="images/download/attachments/97124688/SingleRawSignature2.png"   />
        </p>
    <p  >    </p>
    <p  >    </p>
    <p  >Documentaci&oacute;n de referencia de las operaciones que se deben implementar:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240665">Obtener autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666">Obtener un token de acceso</a> (flujo Authorizaci&oacute;n Code Grant)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240670">Obtener informaci&oacute;n del usuario autenticado</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666">Obtener un token de acceso</a> (flujo Client Credentials Grant)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240750">Obtener identidades de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240751">Obtener informaci&oacute;n de una identidad de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240665">Obtener autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666">Obtener un token de acceso</a> (flujo Authorizaci&oacute;n Code Grant)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240723">Crear una firma digital en servidor</a>    </p>
</li></ul>    <p  >Ejemplo <a   href="#src-97124688">Postman</a>.    </p>
    <p  >    </p>
    </div>
    <div class="section section-3" id="src-97124690">
        <h3 class="heading "><span>Flujo de llamadas</span></h3>
    <p  >A continuaci&oacute;n se muestra un diagrama con el flujo de mensajer&iacute;a que intervienen en este caso de uso.    </p>
    <p  >    </p>
    <p  >    </p>
    <p  >    <img  class="confluence-embedded-image image-center" src="images/download/attachments/97124690/BatchRawSignatures.png" alt="images/download/attachments/97124690/BatchRawSignatures.png"   />
        </p>
    <p  >    </p>
    <p  >Documentaci&oacute;n de referencia de las operaciones que se deben implementar:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240665">Obtener autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666">Obtener un token de acceso</a> (flujo Authorizaci&oacute;n Code Grant)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240670">Obtener informaci&oacute;n del usuario autenticado</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666">Obtener un token de acceso</a> (flujo Client Credentials Grant)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240750">Obtener identidades de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240751">Obtener informaci&oacute;n de una identidad de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240665">Obtener autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666">Obtener un token de acceso</a> (flujo Authorizaci&oacute;n Code Grant)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240724">Crear un lote de firmas digitales en servidor</a>    </p>
</li></ul>    <p  >Ejemplo <a   href="#src-97124690">Postman</a>.    </p>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-93981262">
        <h1 class="heading "><span>Utilidades para desarrolladores</span></h1>
    <p  >El objetivo es facilitar a los integradores el desarrollo de aplicaciones clientes que hagan uso de la API REST eIDAS. Gracias a la introducci&oacute;n realizada acerca de los flujos OAuth 2.0 descritos anteriormente (ACG y CCG) as&iacute; como las consideraciones de seguridad indicadas, se dispone del conocimiento para implementar la obtenci&oacute;n de tokens de acceso necesarios para hacer uso del resto de APIs del sistema.    </p>
    <p  >A modo de ejemplo se enumeran dos tipos de herramientas distintas que el kit de bienvenida pone a disposici&oacute;n de los desarrolladores con ejemplos detallados de las peticiones asociadas a distintos casos de uso de utilidad:    </p>
    <div class="section section-2" id="src-93981262_Utilidadesparadesarrolladores-Postman">
        <h2 class="heading "><span>Postman</span></h2>
    <p  >Es una herramienta de naturaleza neutral con respecto a los distintos lenguajes de programaci&oacute;n existentes. Se debe a que trabaja directamente con peticiones HTTP.    </p>
    <p  >Con el kit de bienvenida se suministra una completa colecci&oacute;n de peticiones agrupadas por caso de uso.    </p>
    <p  ><a   href="#src-96239899">Colecci&oacute;n Postman del Kit de Bienvenida</a>    </p>
    </div>
    <div class="section section-2" id="src-93981262_Utilidadesparadesarrolladores-Java">
        <h2 class="heading "><span>Java</span></h2>
    <p  >Se suministran ejemplos de c&oacute;digo en este lenguaje de programaci&oacute;n en forma de los llamados &quot;Portales Minimalist&quot;.    </p>
    <p  ><a   href="#src-96240574">Portales Minimalist - Aplicaciones web de ejemplo</a>    </p>
    <p  >    </p>
    <p  >    </p>
    </div>
    <div class="section section-2" id="src-96239899">
        <h2 class="heading "><span>Colecci&oacute;n Postman del Kit de Bienvenida</span></h2>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96239904">Casos de uso para empleados</a>    </p>
</li></ul>    <div class="section section-3" id="src-96239904">
        <h3 class="heading "><span>Casos de uso para empleados</span></h3>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240036">Flujo para autenticar a un usuario y obtener informaci&oacute;n de sus atributos de identidad</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240046">Firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240049">Firmas raw</a>    </p>
</li></ul>    <div class="section section-4" id="src-96240036">
        <h4 class="heading "><span>Flujo para autenticar a un usuario y obtener informaci&oacute;n de sus atributos de identidad</span></h4>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Pasos    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 1</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >En el navegador, copiamos la url resultado de pulsar la opci&oacute;n Code de Postman.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n asociado al dominio.    </p>
</li><li class=" ">    <p  >identificador de la aplicaci&oacute;n cliente    </p>
</li><li class=" ">    <p  >uri de redirecci&oacute;n    </p>
</li><li class=" ">    <p  >state    </p>
</li><li class=" ">    <p  >el contexto de autenticaci&oacute;n que cumple con los requisitos del aplicativo (acr)    </p>
</li><li class=" ">    <p  >scope que representa el recurso de los atributos del usuario.    </p>
</li></ul>    <p  >TrustedX eIDAS autenticar&aacute; al usuario (de acuerdo con el acr solicitado) y le pedir&aacute; consentimiento para obtener el c&oacute;digo de autorizaci&oacute;n de manera que el aplicativo en cuesti&oacute;n act&uacute;e en nombre de dicho usuario sobre el recurso de su propiedad y que est&aacute; representado por el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:fnmt:employee: los atributos del usuario verificados por Ceres.    </p>
</li></ul>    <p  >Este es el primer paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <p  >Si la autenticaci&oacute;n es satisfactoria el sistema redirigir&aacute; al usuario a la uri de redirecci&oacute;n con un code.    </p>
    <p  >Deberemos copiar su valor para incluirlo en el siguiente paso de manera manual.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 2</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener el token de acceso para acceder a la informaci&oacute;n del usuario.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n    </p>
</li><li class=" ">    <p  >el c&oacute;digo de autorizaci&oacute;n resultado del paso anterior (valor changeit)    </p>
</li><li class=" ">    <p  >la uri de redirecci&oacute;n    </p>
</li></ul>    <p  >Es el segundo paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el token de acceso de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 3</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener informaci&oacute;n sobre los atributos de la cuenta usuario del scope autorizado para el aplicativo en cuesti&oacute;n    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >token de acceso ACG (valor incluido autom&aacute;ticamente gracias a la variable global creada en el paso anterior)    </p>
</li></ul>    <p  >    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-4" id="src-96240046">
        <h4 class="heading "><span>Firma de documentos</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240052">Flujo para firmar un &uacute;nico documento</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240054">Flujo de firma de un lote de documentos</a>    </p>
</li></ul>    <div class="section section-5" id="src-96240052">
        <h5 class="heading "><span>Flujo para firmar un &uacute;nico documento</span></h5>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Pasos    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 1</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtenemos un token de autorizaci&oacute;n para el scope propiedad del sistema:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document    </p>
</li></ul>    <p  >mediante el flujo CCG de la API OAuth de TrustedX eIDAS.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de trustedx eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n asociado al dominio.    </p>
</li><li class=" ">    <p  >username y password del aplicativo cliente.    </p>
</li><li class=" ">    <p  >scope que representa el recurso proceso de firma de documentos.    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el token de acceso de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 2</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Creaci&oacute;n del proceso de firma de un documento    </p>
    <p  >Mediante la API de firma electr&oacute;nica de documentos y gracias al token de acceso CCG obtenido anteriormente.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de Trustedx eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n    </p>
</li><li class=" ">    <p  >el c&oacute;digo de autorizaci&oacute;n resultado del paso anterior    </p>
</li><li class=" ">    <p  >json con el tipo de proceso, definici&oacute;n del tipo de firma requerida, identificador de la pol&iacute;tica de firma, filtro para indicar las labels de las identidades de firma deseadas, informaci&oacute;n para el usuario, url de callback, etc.    </p>
<ul class=" "><li class=" ">    <p  >se incluyen ejemplos para firmas PAdES-BES y PAdES-EPES con apariencia.    </p>
</li></ul></li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar los par&aacute;metros de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
<ul class=" "><li class=" ">    <p  >el identificador del proceso de firma creado    </p>
</li><li class=" ">    <p  >la url donde podremos acceder al contenido del documento firmado    </p>
</li></ul>        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 3</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >En el navegador, copiamos la url resultado de pulsar la opci&oacute;n Code de Postman.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de trustedx eIDAS    </p>
</li><li class=" ">    <p  >identificador del proceso de firma    </p>
</li></ul>    <p  >TrustedX eIDAS gestionar&aacute; la ejecuci&oacute;n del proceso de firma del documento, autenticando al usuario, mostr&aacute;ndole el documento a firmar, solicit&aacute;ndole al usuario el pin de firma, etc.    </p>
    <p  >Cuando el proceso de firma termine se redireccionar&aacute; al usuario a la url de callback con el par&aacute;metro status finished y el identificador del proceso de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 4</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >La aplicaci&oacute;n cliente puede obtener el documento firmado mediante una petici&oacute;n a la url almacenada como variable global en el segundo paso.    </p>
    <p  >Debe incluir el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document    </p>
</li></ul>    <p  >obtenido en el paso 1 o solicitar uno nuevo si dicho token ha expirado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 5</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Finalmente la aplicaci&oacute;n cliente debe eliminar el proceso de firma en el sistema.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de trustedx eIDAS    </p>
</li><li class=" ">    <p  >identificador del proceso de firma    </p>
</li><li class=" ">    <p  >el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document<br/>(obtenido en el paso 1 o solicitar uno nuevo si dicho token ha expirado)    </p>
</li></ul></li></ul>            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >    </p>
    <p  >    </p>
    </div>
    <div class="section section-5" id="src-96240054">
        <h5 class="heading "><span>Flujo de firma de un lote de documentos</span></h5>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Pasos    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 1</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtenemos un token de autorizaci&oacute;n para el scope propiedad del sistema:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document    </p>
</li></ul>    <p  >mediante el flujo CCG de la API OAuth de TrustedX eIDAS.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de trustedx eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n asociado al dominio.    </p>
</li><li class=" ">    <p  >username y password del aplicativo cliente.    </p>
</li><li class=" ">    <p  >scope que representa el recurso proceso de firma de documentos.    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En caso de que se produzca un error en el resto de pasos del flujo que requieran este token debido a la expiraci&oacute;n del mismo deber&aacute; solicitarse de nuevo.    </p>
        </div>
    </div>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el token de acceso de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Step 2    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Creaci&oacute;n de los recursos con los documentos a firmar mediante la API de firma electr&oacute;nica de documentos.    </p>
    <p  >Casos posibles:    </p>
    <p  >a) Una misma configuraci&oacute;n de firma para todos los documentos (tres en el ejemplo)    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Por cada documento se env&iacute;a una petici&oacute;n con los par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de Trustedx eIDAS    </p>
</li><li class=" ">    <p  >el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document (obtenido en el paso 1)    </p>
</li></ul></li><li class=" ">    <p  >el documento en binario    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el identificador del documento de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >b) Una configuraci&oacute;n de firma distinta para cada documento (tres en el ejemplo)    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Por cada documento se env&iacute;a una petici&oacute;n con los par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de Trustedx eIDAS    </p>
</li><li class=" ">    <p  >el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document (obtenido en el paso 1)    </p>
</li></ul></li><li class=" ">    <p  >la configuraci&oacute;n de firma requerida en formato json    </p>
<ul class=" "><li class=" ">    <p  >se incluye un ejemplo para firma PAdES-BES con apariencia    </p>
</li></ul></li><li class=" ">    <p  >el documento en binario    </p>
</li></ul>    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el identificador del documento de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Step 3    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Creaci&oacute;n del proceso de firma del lote de documentos mediante la API de firma electr&oacute;nica de documentos.    </p>
    <p  >Casos posibles:    </p>
    <p  >a) Una misma configuraci&oacute;n de firma para todos los documentos (tres en el ejemplo)    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >La petici&oacute;n incluye los par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document (obtenido en el paso 1)    </p>
</li></ul></li><li class=" ">    <p  >json de configuraci&oacute;n del proceso de firma con el tipo de proceso, las labels que permiten filtrar las identidades de firma requeridas, los identificadores de los documentos del lote, la configuraci&oacute;n del formato de firma y apariencia, la url de callback, etc.    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el identificador del proceso del firma del lote de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >    </p>
    <p  >b) Una configuraci&oacute;n de firma distinta para cada documento (tres en el ejemplo)    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Por cada documento se env&iacute;a una petici&oacute;n con los par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de Trustedx eIDAS    </p>
</li><li class=" ">    <p  >el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document (obtenido en el paso 1)    </p>
</li></ul></li><li class=" ">    <p  >json de configuraci&oacute;n del proceso de firma con el tipo de proceso, identificador de la pol&iacute;tica de firma, las labels que permiten filtrar las identidades de firma requeridas y los identificadores de los documentos del lote, la url de callback, etc.    </p>
</li></ul>    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el identificador del documento de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Step 4    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >En el navegador, copiamos la url resultado de pulsar la opci&oacute;n Code de Postman.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de trustedx eIDAS    </p>
</li><li class=" ">    <p  >identificador del proceso de firma    </p>
</li></ul>    <p  >TrustedX eIDAS gestionar&aacute; la ejecuci&oacute;n del proceso de firma del lote de documentos, autenticando al usuario, mostr&aacute;ndole los documentos a firmar, solicit&aacute;ndole al usuario el pin de firma, etc.    </p>
    <p  >Cuando el proceso de firma termine se redireccionar&aacute; al usuario a la url de callback con el par&aacute;metro status finished y el identificador del proceso de firma del lote.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Step 5    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >La aplicaci&oacute;n cliente solicita informaci&oacute;n sobre los documentos mediante la API de firma electr&oacute;nica de documentos.    </p>
    <p  >La petici&oacute;n incluye los par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de Trustedx eIDAS    </p>
</li><li class=" ">    <p  >el identificador del proceso de firma    </p>
</li><li class=" ">    <p  >el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document (obtenido en el paso 1)    </p>
</li></ul></li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar las URLs que permiten obtener cada uno los tres documentos firmados del ejemplo en variables globales, de manera que puedan utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Step 6    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >La aplicaci&oacute;n cliente realiza peticiones para obtener cada uno de los documentos firmados del lote.    </p>
    <p  >A cada URL de las almacenadas en el paso anterior se le a&ntilde;ade el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document (obtenido en el paso 1)    </p>
</li></ul>    <p  >    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Step 7    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >La aplicaci&oacute;n cliente elimina cada uno de los recursos documento que cre&oacute; mediante la API de firma electr&oacute;nica de documentos.    </p>
    <p  >Para cada uno de los tres documentos la petici&oacute;n incluye los par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de Trustedx eIDAS    </p>
</li><li class=" ">    <p  >el identificador del documento    </p>
</li><li class=" ">    <p  >el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document (obtenido en el paso 1)    </p>
</li></ul></li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Step 8    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >La aplicaci&oacute;n cliente borra el proceso de firma del lote de documentos mediante la API de firma electr&oacute;nica de documentos.    </p>
    <p  >La petici&oacute;n incluye los par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de Trustedx eIDAS    </p>
</li><li class=" ">    <p  >el identificador del proceso de firma    </p>
</li><li class=" ">    <p  >el token de acceso CCG para el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:process:document (obtenido en el paso 1)    </p>
</li></ul></li></ul>            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >    </p>
    <p  >    </p>
    </div>
    </div>
    <div class="section section-4" id="src-96240049">
        <h4 class="heading "><span>Firmas raw</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240268">Flujo de firma en formato raw</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240270">Flujo de firma en formato raw de un lote</a>    </p>
</li></ul>    <div class="section section-5" id="src-96240268">
        <h5 class="heading "><span>Flujo de firma en formato raw</span></h5>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col  width="68"/>
                                    <col  width="1098"/>
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Pasos    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 1</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >En el navegador, copiamos la url resultado de pulsar la opci&oacute;n Code de Postman.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n asociado al dominio.    </p>
</li><li class=" ">    <p  >identificador de la aplicaci&oacute;n cliente    </p>
</li><li class=" ">    <p  >uri de redirecci&oacute;n    </p>
</li><li class=" ">    <p  >state    </p>
</li><li class=" ">    <p  >el contexto de autenticaci&oacute;n que cumple con los requisitos del aplicativo (acr)    </p>
</li><li class=" ">    <p  >scope que representa el recurso de los atributos del usuario.    </p>
</li></ul>    <p  >TrustedX eIDAS autenticar&aacute; al usuario (de acuerdo con el acr solicitado) y le pedir&aacute; consentimiento para obtener el c&oacute;digo de autorizaci&oacute;n de manera que el aplicativo en cuesti&oacute;n act&uacute;e en nombre de dicho usuario sobre el recurso de su propiedad y que est&aacute; representado por el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:fnmt:employee: los atributos del usuario verificados por Ceres.    </p>
</li></ul>    <p  >Este es el primer paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <p  >Si la autenticaci&oacute;n es satisfactoria el sistema redirigir&aacute; al usuario a la uri de redirecci&oacute;n con un code.    </p>
    <p  >Deberemos copiar su valor para incluirlo en el siguiente paso de manera manual.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 2</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener el token de acceso para acceder a la informaci&oacute;n del usuario.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de Trustedx eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n    </p>
</li><li class=" ">    <p  >el c&oacute;digo de autorizaci&oacute;n resultado del paso anterior (valor changeit)    </p>
</li><li class=" ">    <p  >la uri de redirecci&oacute;n    </p>
</li></ul>    <p  >Es el segundo paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el token de acceso de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 3</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener informaci&oacute;n sobre los atributos de la cuenta usuario del scope autorizado para el aplicativo en cuesti&oacute;n.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >token de acceso ACG (valor incluido autom&aacute;ticamente gracias a la variable global creada en el paso anterior)    </p>
</li></ul>    <p  >En particular para el resto de pasos es necesario recuperar el identificador de la cuenta del usuario en el sistema TrustedX eIDAS.    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el identificador de la cuenta del usuario como variable global, de manera que pueda utilizarse en el resto de pasos que lo requieran.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 4</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtenemos un token de autorizaci&oacute;n para el scope propiedad del sistema:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:identity:profile    </p>
</li></ul>    <p  >mediante el flujo CCG de la API OAuth de TrustedX eIDAS.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n asociado al dominio.    </p>
</li><li class=" ">    <p  >username y password del aplicativo cliente.    </p>
</li><li class=" ">    <p  >scope que representa el perfil de las identidades de firma.    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el token de acceso de la respuesta como variable global, de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 5</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El aplicativo cliente solicita las identidades de firma del usuario mediante la API de Gesti&oacute;n de Identidades de Firma.    </p>
    <p  >Debe incluir el token de acceso CCG obtenido en el paso anterior.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >identificador de la cuenta de usuario.    </p>
</li><li class=" ">    <p  >filtro para indicar las labels de las identidades de firma deseadas.    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el identificador de la primera identidad de firma del usuario como variable global, de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 6</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El aplicativo cliente solicita el certificado de la identidad de firma del usuario que se utilizar&aacute; para firmar mediante la API de Gesti&oacute;n de Identidades de Firma.    </p>
    <p  >Debe incluir el token de acceso CCG obtenido en el cuarto paso.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >el identificador de la identidad de firma    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar (como variable global, de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica):    </p>
<ul class=" "><li class=" ">    <p  >el certificado de la identidad de firma del usuario especificada.    </p>
</li><li class=" ">    <p  >un digest value a modo de ejemplo que ser&aacute; firmado por el sistema, en formato raw y con la autorizaci&oacute;n del usuario.    </p>
</li></ul>        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 7</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >En el navegador, copiamos la url resultado de pulsar la opci&oacute;n Code de Postman.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n asociado al dominio.    </p>
</li><li class=" ">    <p  >identificador de la aplicaci&oacute;n cliente    </p>
</li><li class=" ">    <p  >uri de redirecci&oacute;n    </p>
</li><li class=" ">    <p  >state    </p>
</li><li class=" ">    <p  >el contexto de autenticaci&oacute;n que cumple con los requisitos del aplicativo (acr)    </p>
</li><li class=" ">    <p  >scope que representa el recurso con la claves del usuario.    </p>
</li></ul>    <p  >TrustedX eIDAS autenticar&aacute; al usuario (de acuerdo con el acr solicitado) y le pedir&aacute; consentimiento para obtener el c&oacute;digo de autorizaci&oacute;n de manera que el aplicativo en cuesti&oacute;n act&uacute;e en nombre de dicho usuario sobre el recurso de su propiedad y que est&aacute; representado por el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:identity:use:server    </p>
</li></ul>    <p  >Este es el primer paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <p  >Si la autenticaci&oacute;n es satisfactoria el sistema redirigir&aacute; al usuario a la uri de redirecci&oacute;n con un code.    </p>
    <p  >Deberemos copiar su valor para incluirlo en el siguiente paso de manera manual.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 8</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener el token de acceso para el acceso a las claves del usuario.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n.    </p>
</li><li class=" ">    <p  >username y password del aplicativo cliente.    </p>
</li><li class=" ">    <p  >el c&oacute;digo de autorizaci&oacute;n resultado del paso anterior (valor changeit)    </p>
</li><li class=" ">    <p  >la uri de redirecci&oacute;n.    </p>
</li></ul>    <p  >Es el segundo paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el token de acceso de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 9</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Finalmente la aplicaci&oacute;n cliente solicita la firma raw con la identidad de firma del usuario, mediante la API de Firma Digital    </p>
    <p  >Para ello debe incluir en la petici&oacute;n el token de acceso ACG obtenido en el paso anterior.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >digest a firmar.    </p>
</li><li class=" ">    <p  >algoritmo de firma requerido.    </p>
</li><li class=" ">    <p  >identificador de la identidad de firma del usuario con la que se quiere firmar.    </p>
</li></ul>    <p  >    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >    </p>
    <p  >    </p>
    </div>
    <div class="section section-5" id="src-96240270">
        <h5 class="heading "><span>Flujo de firma en formato raw de un lote</span></h5>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col  width="68"/>
                                    <col  width="1098"/>
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Pasos    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 1</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >En el navegador, copiamos la url resultado de pulsar la opci&oacute;n Code de Postman.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n asociado al dominio.    </p>
</li><li class=" ">    <p  >identificador de la aplicaci&oacute;n cliente    </p>
</li><li class=" ">    <p  >uri de redirecci&oacute;n    </p>
</li><li class=" ">    <p  >state    </p>
</li><li class=" ">    <p  >el contexto de autenticaci&oacute;n que cumple con los requisitos del aplicativo (acr)    </p>
</li><li class=" ">    <p  >scope que representa el recurso de los atributos del usuario.    </p>
</li></ul>    <p  >TrustedX eIDAS autenticar&aacute; al usuario (de acuerdo con el acr solicitado) y le pedir&aacute; consentimiento para obtener el c&oacute;digo de autorizaci&oacute;n de manera que el aplicativo en cuesti&oacute;n act&uacute;e en nombre de dicho usuario sobre el recurso de su propiedad y que est&aacute; representado por el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:fnmt:employee: los atributos del usuario verificados por Ceres.    </p>
</li></ul>    <p  >Este es el primer paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <p  >Si la autenticaci&oacute;n es satisfactoria el sistema redirigir&aacute; al usuario a la uri de redirecci&oacute;n con un code.    </p>
    <p  >Deberemos copiar su valor para incluirlo en el siguiente paso de manera manual.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 2</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener el token de acceso para acceder a la informaci&oacute;n del usuario.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de Trustedx eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n    </p>
</li><li class=" ">    <p  >el c&oacute;digo de autorizaci&oacute;n resultado del paso anterior (valor changeit)    </p>
</li><li class=" ">    <p  >la uri de redirecci&oacute;n    </p>
</li></ul>    <p  >Es el segundo paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el token de acceso de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 3</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener informaci&oacute;n sobre los atributos de la cuenta usuario del scope autorizado para el aplicativo en cuesti&oacute;n.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >token de acceso ACG (valor incluido autom&aacute;ticamente gracias a la variable global creada en el paso anterior)    </p>
</li></ul>    <p  >En particular para el resto de pasos es necesario recuperar el identificador de la cuenta del usuario en el sistema TrustedX eIDAS.    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el identificador de la cuenta del usuario como variable global, de manera que pueda utilizarse en el resto de pasos que lo requieran.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 4</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtenemos un token de autorizaci&oacute;n para el scope propiedad del sistema:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:identity:profile    </p>
</li></ul>    <p  >mediante el flujo CCG de la API OAuth de TrustedX eIDAS.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n asociado al dominio.    </p>
</li><li class=" ">    <p  >username y password del aplicativo cliente.    </p>
</li><li class=" ">    <p  >scope que representa el perfil de las identidades de firma.    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el token de acceso de la respuesta como variable global, de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 5</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El aplicativo cliente solicita las identidades de firma del usuario mediante la API de Gesti&oacute;n de Identidades de Firma.    </p>
    <p  >Debe incluir el token de acceso CCG obtenido en el paso anterior.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >identificador de la cuenta de usuario.    </p>
</li><li class=" ">    <p  >filtro para indicar las labels de las identidades de firma deseadas.    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el identificador de la primera identidad de firma del usuario como variable global, de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 6</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El aplicativo cliente solicita el certificado de la identidad de firma del usuario que se utilizar&aacute; para firmar mediante la API de Gesti&oacute;n de Identidades de Firma.    </p>
    <p  >Debe incluir el token de acceso CCG obtenido en el cuarto paso.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >el identificador de la identidad de firma    </p>
</li></ul>    <p  >    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar (como variable global, de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica):    </p>
<ul class=" "><li class=" ">    <p  >el certificado de la identidad de firma del usuario especificada.    </p>
</li><li class=" ">    <p  >un digest value a modo de ejemplo que ser&aacute; firmado por el sistema, en formato raw y con la autorizaci&oacute;n del usuario.    </p>
</li></ul>        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 7</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >En el navegador, copiamos la url resultado de pulsar la opci&oacute;n Code de Postman.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n asociado al dominio.    </p>
</li><li class=" ">    <p  >identificador de la aplicaci&oacute;n cliente    </p>
</li><li class=" ">    <p  >uri de redirecci&oacute;n    </p>
</li><li class=" ">    <p  >state    </p>
</li><li class=" ">    <p  >el contexto de autenticaci&oacute;n que cumple con los requisitos del aplicativo (acr)    </p>
</li><li class=" ">    <p  >scope que representa el recurso con la claves del usuario.    </p>
</li></ul>    <p  >TrustedX eIDAS autenticar&aacute; al usuario (de acuerdo con el acr solicitado) y le pedir&aacute; consentimiento para obtener el c&oacute;digo de autorizaci&oacute;n de manera que el aplicativo en cuesti&oacute;n act&uacute;e en nombre de dicho usuario sobre el recurso de su propiedad y que est&aacute; representado por el scope:    </p>
<ul class=" "><li class=" ">    <p  >urn:safelayer:eidas:sign:identity:use:server    </p>
</li></ul>    <p  >Este es el primer paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <p  >Si la autenticaci&oacute;n es satisfactoria el sistema redirigir&aacute; al usuario a la uri de redirecci&oacute;n con un code.    </p>
    <p  >Deberemos copiar su valor para incluirlo en el siguiente paso de manera manual.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 8</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtener el token de acceso para el acceso a las claves del usuario.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >identificador del servidor de autorizaci&oacute;n.    </p>
</li><li class=" ">    <p  >username y password del aplicativo cliente.    </p>
</li><li class=" ">    <p  >el c&oacute;digo de autorizaci&oacute;n resultado del paso anterior (valor changeit).    </p>
</li><li class=" ">    <p  >la uri de redirecci&oacute;n.    </p>
</li></ul>    <p  >Es el segundo paso del flujo ACG de la API OAuth de TrustedX eIDAS.    </p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Variables globales de Postman</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
    <p  >En la opci&oacute;n Tests de Postman se incluye el c&oacute;digo necesario para almacenar el token de acceso de la respuesta como variable global de manera que pueda utilizarse en el siguiente paso de forma autom&aacute;tica.    </p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">Step 9</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Finalmente la aplicaci&oacute;n cliente solicita la firma raw de un lote de digests con la identidad de firma del usuario, mediante la API de Firma Digital.    </p>
    <p  >Para ello debe incluir en la petici&oacute;n el token de acceso ACG obtenido en el paso anterior.    </p>
    <p  >Par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  >host y puerto de TrustedX eIDAS.    </p>
</li><li class=" ">    <p  >json de configuraci&oacute;n de la petici&oacute;n con:    </p>
<ul class=" "><li class=" ">    <p  >identificador de la identidad de firma del usuario con la que se quiere firmar.    </p>
</li><li class=" ">    <p  >algoritmo de firma requerido.    </p>
</li><li class=" ">    <p  >lista de digests a firmar.    </p>
</li></ul></li></ul>    <p  >    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    </div>
    <div class="section section-2" id="src-96240574">
        <h2 class="heading "><span>Portales Minimalist - Aplicaciones web de ejemplo</span></h2>
    <p  >Se entregan bajo demanda.    </p>
    </div>
    </div>
    <div class="section section-1" id="src-96240585">
        <h1 class="heading "><span>Documentaci&oacute;n de las APIs de TrustedX eIDAS</span></h1>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240654">TX_EIDAS_4.1.4.0 - Integraci&oacute;n con aplicaciones</a>    </p>
</li></ul>    <div class="section section-2" id="src-96240654">
        <h2 class="heading "><span>TX_EIDAS_4.1.4.0 - Integraci&oacute;n con aplicaciones</span></h2>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240663">TX_EIDAS_4.1.4.0 - API de autorizaci&oacute;n OAuth 2.0</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240667">TX_EIDAS_4.1.4.0 - API de informaci&oacute;n de usuario</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240696">TX_EIDAS_4.1.4.0 - API de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240719">TX_EIDAS_4.1.4.0 - API de firma digital</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240739">TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a>    </p>
</li></ul>    <p  >    </p>
    <div class="section section-3" id="src-96240663">
        <h3 class="heading "><span>TX_EIDAS_4.1.4.0 - API de autorizaci&oacute;n OAuth 2.0</span></h3>
    <p  >El modelo de autorizaci&oacute;n <a  class="external-link" href="https://tools.ietf.org/html/rfc6749">OAuth 2.0</a> posibilita que una aplicaci&oacute;n cliente obtenga acceso a un servicio o recurso HTTP, ya sea en nombre del usuario propietario del recurso, o en nombre de la propia aplicaci&oacute;n. Para ello, la aplicaci&oacute;n obtiene un <i class=" ">token</i> de acceso mediante las siguientes operaciones:    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666">TX_EIDAS_4.1.4.0 - Obtener un token de acceso</a>    </p>
</li></ul>    <p  >Cuando se usa el flujo <i class=" ">Authorization Code Grant</i> de OAuth, la aplicaci&oacute;n debe utilizar las dos operaciones. Cuando se usa el flujo <i class=" ">Client Credentials Grant</i>, la aplicaci&oacute;n obtiene directamente el <i class=" ">token</i> de acceso con la segunda operaci&oacute;n.    </p>
    <p  >En ambos casos, una vez obtenido el <i class=" ">token</i> de acceso, la aplicaci&oacute;n lo utiliza para invocar el servicio o recurso protegido.    </p>
    <div class="section section-4" id="src-96240664">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de autorizaci&oacute;n OAuth 2.0 - Operaciones</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666">TX_EIDAS_4.1.4.0 - Obtener un token de acceso</a>    </p>
</li></ul>    <div class="section section-5" id="src-96240665">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1EZXNjcmlwY2nDs24">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1NZW5zYWplQXV0aG9yaXphdGlvblJlcXVlc3Q">Mensaje Authorization Request</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1QYXLDoW1ldHJvcw">Par&aacute;metros</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1NZW5zYWplQXV0aG9yaXphdGlvblJlc3BvbnNl">Mensaje Authorization Response</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1QYXLDoW1ldHJvcy4x">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1HZXN0acOzbmRlZXJyb3Jlcw">Gesti&oacute;n de errores</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1FcnJvcmVzc2lucmVkaXJlY2Npw7NuYWxhYXBsaWNhY2nDs25jbGllbnRl">Errores sin redirecci&oacute;n a la aplicaci&oacute;n cliente</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1FcnJvcmVzY29ucmVkaXJlY2Npw7NuYWxhYXBsaWNhY2nDs25jbGllbnRl">Errores con redirecci&oacute;n a la aplicaci&oacute;n cliente</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1EZXNjcmlwY2nDs24">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Realiza una petici&oacute;n de autorizaci&oacute;n que inicia un flujo de autorizaci&oacute;n <a  class="external-link" href="https://tools.ietf.org/html/rfc6749">OAuth 2.0</a> de tipo <i class=" ">Authorization Code Grant</i>. A diferencia de otras APIs de TrustedX, los mensajes de esta operaci&oacute;n no son intercambiados de forma directa entre la aplicaci&oacute;n cliente y TrustedX, sino indirectamente a trav&eacute;s del navegador del usuario, mediante redirecciones del navegador.    </p>
    <p  >Esta operaci&oacute;n permite a una aplicaci&oacute;n obtener autorizaci&oacute;n del usuario para acceder a un recurso de su propiedad. La autorizaci&oacute;n del usuario se obtiene en forma de una credencial denominada <i class=" ">c&oacute;digo de autorizaci&oacute;n</i>. El c&oacute;digo de autorizaci&oacute;n viaja a trav&eacute;s del navegador en forma de respuesta de la operaci&oacute;n. Una vez obtenido, la aplicaci&oacute;n debe intercambiarlo por el correspondiente <i class=" ">token</i> de acceso para acceder al recurso (v&eacute;ase <a   href="#src-96240666">TX_EIDAS_4.1.4.0 - Obtener un token de acceso</a>). El alcance (<i class=" ">scope</i>) de la autorizaci&oacute;n solicitada (p. ej., acceso a datos de identidad, obtenci&oacute;n de las identidades de firma, etc) se indica en la propia petici&oacute;n.    </p>
    </div>
    <div class="section section-6" id="src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1NZW5zYWplQXV0aG9yaXphdGlvblJlcXVlc3Q">
        <h6 class="heading "><span>Mensaje Authorization Request</span></h6>
    <p  >Para iniciar el flujo <i class=" ">Authorization Code Grant</i>, la aplicaci&oacute;n cliente debe redirigir el navegador del usuario a uno de los <i class=" ">endpoints</i> <tt class=" ">/trustedx-authserver/oauth</tt> de TrustedX. Como resultado de esta redirecci&oacute;n, el navegador env&iacute;a una petici&oacute;n HTTP como la siguiente, que corresponde al mensaje Authorization Request de OAuth 2.0. La petici&oacute;n debe enviarse por TLS y debe ser de tipo GET (preferiblemente) o POST.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">GET /trustedx-authserver/oauth/{as}?response_type=code&amp;</code></div>
<div class="line"><code class="plain">                                    client_id=...&amp; </code></div>
<div class="line"><code class="plain">                                    state=...&amp;</code></div>
<div class="line"><code class="plain">                                    redirect_uri=...&amp;</code></div>
<div class="line"><code class="plain">                                    scope=...&amp;</code></div>
<div class="line"><code class="plain">                                    prompt=...&amp;</code></div>
<div class="line"><code class="plain">                                    acr_values=...&amp;</code></div>
<div class="line"><code class="plain">                                    view_type=...&amp;</code></div>
<div class="line"><code class="plain">                                    ui_locales=...</code></div>
</div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">Nota</div>
            <div class="panel-content">
    <p  >Alternativamente, es posible utilizar el <i class=" ">endpoint</i> <tt class=" ">/trustedx-authserver/{idp}/oauth</tt>, donde <tt class=" ">{idp}</tt> es el identificador de un proveedor de identidad y coincide con el identificador de un servidor de autorizaci&oacute;n asociado a dicho IdP.    </p>
        </div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">Nota </div>
            <div class="panel-content">
    <p  >Todas las aplicaciones que se integran con TrustedX mediante redirecci&oacute;n del navegador (ya sea mediante OAuth 2.0 o SAML 2.0) deben hacerlo usando una URL base consistente, incluyendo el mismo nombre de dominio DNS, el mismo puerto (por defecto, 8082), y el mismo nombre de aplicaci&oacute;n web (por defecto, <tt class=" ">trustedx-authserver</tt> ). Los navegadores deben conectarse a TrustedX siempre con la misma direcci&oacute;n base para que el proveedor de identidad pueda mantener las sesiones y aplicar SSO de forma consistente.    </p>
        </div>
    </div>
    <div class="section section-7" id="src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1QYXLDoW1ldHJvcw">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">as</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path<br/></i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del servidor de autorizaci&oacute;n de TrustedX al que se env&iacute;a la petici&oacute;n de autorizaci&oacute;n (campo <strong class=" ">Id. de servidor</strong> de una de las entidades de tipo <strong class=" ">Servidor de autorizaci&oacute;n</strong>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">response_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">query</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Debe tener el valor <tt class=" ">code</tt>, que indica que se solicita un c&oacute;digo de autorizaci&oacute;n.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">client_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" "><i class=" ">query</i></i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la aplicaci&oacute;n OAuth 2.0 registrada en TrustedX (campo <strong class=" ">Identificador de cliente</strong> de una de las entidades de tipo <strong class=" ">Aplicaci&oacute;n cliente</strong>). La aplicaci&oacute;n debe estar asociada al servidor de autorizaci&oacute;n y tener habilitado el uso de <i class=" ">Authorization Code Grant</i>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">state</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" "><i class=" ">query</i></i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Recomendado    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Se recomienda utilizar este par&aacute;metro para evitar ataques CSRF. Para ello, la aplicaci&oacute;n debe incluir en este par&aacute;metro un valor aleatorio, guardarlo en la sesi&oacute;n HTTP, y verificarlo al recibir el mensaje Authorization Response. Este valor aleatorio relaciona la petici&oacute;n de autorizaci&oacute;n con la sesi&oacute;n HTTP, evitando que la aplicaci&oacute;n pueda procesar un mensaje Authorization Response que no ha sido originado por un mensaje Authorization Request iniciado previamente en el navegador del usuario.    </p>
    <p  >La aplicaci&oacute;n puede adem&aacute;s incluir en este par&aacute;metro informaci&oacute;n adicional, como la URL a la que redirigir el navegador cuando el flujo OAuth finalice. (Para incluir m&uacute;ltiples datos en el valor de este par&aacute;metro, la aplicaci&oacute;n debe serializarlos de la forma que estime m&aacute;s conveniente.)    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">redirect_uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" "><i class=" ">query</i></i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de redirecci&oacute;n a la aplicaci&oacute;n. La aplicaci&oacute;n espera recibir en esta URI el mensaje Authorization Response con el c&oacute;digo de autorizaci&oacute;n.Debe coincidir con alguna de las URIs de redirecci&oacute;n registradas para la aplicaci&oacute;n cliente, o una URI de redirecci&oacute;n del sistema. Si se ha configurado la aplicaci&oacute;n para permitir cualquier URI de redirecci&oacute;n (no recomendado), entonces no se realizar&aacute; ninguna comprobaci&oacute;n para este par&aacute;metro.    </p>
    <p  >Este par&aacute;metro puede omitirse si se ha registrado una &uacute;nica URI de redirecci&oacute;n espec&iacute;fica para la aplicaci&oacute;n. En este caso, se usar&aacute; la URI de redirecci&oacute;n registrada.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">scope</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" "><i class=" ">query</i></i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Lista de valores, separados por espacios, que representan el alcance de la autorizaci&oacute;n que desea obtener la aplicaci&oacute;n. Consulte los <i class=" ">scopes</i> necesarios para acceder a los recursos o servicios objetivo. Si no se especifica este par&aacute;metro, se tomar&aacute;n los <i class=" ">scopes</i> por defecto configurados para el servidor de autorizaci&oacute;n y que est&eacute;n habilitados para <i class=" ">Authorization Code Grant</i>.    </p>
    <p  >V&eacute;ase <a   href="#src-93981252">Entorno de integraci&oacute;n</a> (Scopes).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">prompt</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" "><i class=" ">query</i></i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Admite los valores <tt class=" ">login</tt> y <tt class=" ">none:</tt>    </p>
<ul class=" "><li class=" ">    <p  >El valor <tt class=" ">login</tt> sirve para desactivar el SSO.    </p>
</li><li class=" ">    <p  >El valor <tt class=" ">none</tt> sirve para indicar que no puede haber interacci&oacute;n con el usuario (ni para autenticarlo, ni para obtener su consentimiento).    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">acr_values</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" "><i class=" ">query</i></i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Establece condiciones a la autenticaci&oacute;n del usuario (niveles m&iacute;nimos y/o flujos espec&iacute;ficos) que debe autorizar el acceso. V&eacute;ase <a   href="#src-93981252">Entorno de integraci&oacute;n</a> (Niveles de confianza y Flujos de autenticaci&oacute;n disponibles).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">ui_locales</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" "><i class=" ">query</i></i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Indica una lista de idiomas ordenados por preferencia. TrustedX utilizar&aacute; esta lista para seleccionar el idioma en el que mostrar&aacute;n las interfaces gr&aacute;ficas con las que se autentique al usuario y se obtenga su consentimiento. El valor de este par&aacute;metro es una lista de etiquetas de idiomas seg&uacute;n <a  class="external-link" href="https://tools.ietf.org/html/rfc5646">RFC 5646</a>, separadas por espacios. Cada etiqueta indica un idioma base y opcionalmente un c&oacute;digo de pa&iacute;s y una variante dialectal. La interfaz se mostrar&aacute; internacionalizada seg&uacute;n la primera etiqueta de la lista cuyo idioma base est&eacute; soportado por TrustedX o haya sido personalizado.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <div  class="confbox panel">
            <div class="title panel-header">Nota</div>
            <div class="panel-content">
    <p  >No hay que confundir la <i class=" ">sesi&oacute;n HTTP</i> que la aplicaci&oacute;n mantiene con el navegador con el contexto de seguridad o <i class=" ">sesi&oacute;n</i> (a secas) que la aplicaci&oacute;n crea o actualiza al finalizar el flujo OAuth 2.0. La sesi&oacute;n HTTP existe previamente, desde el momento en que el navegador accede a la aplicaci&oacute;n web, y aunque el usuario no haya sido todav&iacute;a autenticado. El contexto de seguridad son datos relativos al usuario autenticado que la aplicaci&oacute;n almacena (habitualmente) en la sesi&oacute;n HTTP para recordar que ese usuario es quien tiene una sesi&oacute;n iniciada en la aplicaci&oacute;n desde aquel navegador, y/o el <i class=" ">token</i> de acceso OAuth. Al igual que la aplicaci&oacute;n, TrustedX tambi&eacute;n mantiene una sesi&oacute;n HTTP con el navegador y un contexto de seguridad para el usuario autenticado.    </p>
        </div>
    </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1NZW5zYWplQXV0aG9yaXphdGlvblJlc3BvbnNl">
        <h6 class="heading "><span>Mensaje Authorization Response</span></h6>
    <p  >Si el usuario consigue establecer una sesi&oacute;n con el IdP (o se le aplica <i class=" ">single sign-on</i> sobre la sesi&oacute;n que ya ten&iacute;a) y concede la autorizaci&oacute;n, la aplicaci&oacute;n recibir&aacute; una petici&oacute;n HTTP GET procedente del navegador del usuario del siguiente tipo. Esta petici&oacute;n HTTP corresponde al mensaje Authorization Response de OAuth 2.0, y se recibe en la URL de redirecci&oacute;n indicada en el mensaje Authorization Request (par&aacute;metro <tt class=" ">redirect_uri</tt>) o la que tuviera registrada la aplicaci&oacute;n.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain" /></div>
</div>
    </div>
    <p  >Donde <tt class=" ">{redirection_uri_host}{redirection_uri_path} </tt>es la URI de redirecci&oacute;n a la aplicaci&oacute;n.    </p>
    <div class="section section-7" id="src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1QYXLDoW1ldHJvcy4x">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Par&aacute;metro    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">code</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >C&oacute;digo de la autorizaci&oacute;n que se ha concedido a la aplicaci&oacute;n y que &eacute;sta deber&aacute; utilizar para obtener el <i class=" ">token</i> de acceso.    </p>
    <p  >El c&oacute;digo de autorizaci&oacute;n generado por TrustedX tendr&aacute; las caracter&iacute;sticas de longitud (en bytes) y caducidad (en segundos) que se hayan especificado en la configuraci&oacute;n del servidor de autorizaci&oacute;n. La aplicaci&oacute;n cliente debe enviar el mensaje Access Token Request a TrustedX antes de que caduque el c&oacute;digo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">state</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El mismo valor que la aplicaci&oacute;n incluy&oacute; en el mensaje Authorization Request.    </p>
    <p  >Para evitar ataques de tipo CSRF sobre la URI de redirecci&oacute;n, y tal y como recomienda el est&aacute;ndar, la aplicaci&oacute;n debe verificar que el valor aleatorio incluido en este par&aacute;metro (posiblemente con otros datos adicionales) coincide con el que incluy&oacute; previamente en la petici&oacute;n de autorizaci&oacute;n. Para conocer el valor previo, la aplicaci&oacute;n lo recupera de la sesi&oacute;n HTTP que mantiene con el navegador. Si el valor previo difiere, o no se encuentra almacenado en la sesi&oacute;n HTTP, la aplicaci&oacute;n debe abortar el flujo OAuth (por ejemplo, indicando al usuario que se ha recibido una petici&oacute;n no v&aacute;lida).    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1HZXN0acOzbmRlZXJyb3Jlcw">
        <h7 class="heading "><span>Gesti&oacute;n de errores</span></h7>
    <p  >Si ocurre un error durante la fase de autorizaci&oacute;n, TrustedX no devolver&aacute; una respuesta <i class=" ">Authorization Response</i> a la aplicaci&oacute;n, sino una respuesta de error. En ciertos casos, el error se mostrar&aacute; directamente en el navegador del usuario. En todos los casos, el administrador puede obtener detalles acerca del error ocurrido consultando los logs en la consola de administraci&oacute;n de TrustedX.    </p>
    </div>
    <div class="section section-7" id="src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1FcnJvcmVzc2lucmVkaXJlY2Npw7NuYWxhYXBsaWNhY2nDs25jbGllbnRl">
        <h7 class="heading "><span>Errores sin redirecci&oacute;n a la aplicaci&oacute;n cliente</span></h7>
    <p  >Si la petici&oacute;n de autorizaci&oacute;n no es v&aacute;lida porque incluye un identificador de cliente no registrado o una URL de redirecci&oacute;n no permitida, TrustedX mostrar&aacute; un mensaje de error gen&eacute;rico en el navegador del usuario, indic&aacute;ndole que consulte a un administrador. En estos casos, y por motivos de seguridad, no se realiza ninguna redirecci&oacute;n a la aplicaci&oacute;n. Para diagnosticar el problema, el administrador de TrustedX debe consultar los logs.    </p>
    </div>
    <div class="section section-7" id="src-96240665_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyYXV0b3JpemFjacOzbi1FcnJvcmVzY29ucmVkaXJlY2Npw7NuYWxhYXBsaWNhY2nDs25jbGllbnRl">
        <h7 class="heading "><span>Errores con redirecci&oacute;n a la aplicaci&oacute;n cliente</span></h7>
    <p  >Si la petici&oacute;n de autorizaci&oacute;n falla por otro motivo, por ejemplo porque el usuario ha cancelado el proceso de autenticaci&oacute;n, entonces TrustedX redirigir&aacute; el navegador a la URI de redirecci&oacute;n especificada, a&ntilde;adi&eacute;ndole los siguientes par&aacute;metros descritos en el est&aacute;ndar. En este caso, es responsabilidad de la aplicaci&oacute;n cliente informar de alguna manera al usuario de que ha ocurrido un error (excepto en el caso de autenticaci&oacute;n cancelada).    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">error</tt>: C&oacute;digo de error. Consulte el est&aacute;ndar y la lista que sigue para m&aacute;s detalles.    </p>
</li><li class=" ">    <p  ><tt class=" ">error_description</tt>: Descripci&oacute;n adicional del error. Puede no estar presente.    </p>
</li><li class=" ">    <p  ><tt class=" ">state</tt>: El mismo valor que la aplicaci&oacute;n incluy&oacute; en el mensaje Authorization Request.    </p>
</li></ul>    <p  >A continuaci&oacute;n se listan los valores de <tt class=" ">error</tt> y <tt class=" ">error_description</tt> (si lo hay) para algunos errores t&iacute;picos, y su correspondiente significado:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">invalid_request</tt>, <tt class=" ">UnrecognizedAuthnRequirementsException</tt>: No se reconoce ninguno de los requisitos de autenticaci&oacute;n especificados en el par&aacute;metro <tt class=" ">acr_values</tt>.<tt class=" "></tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">access_denied</tt> (sin <tt class=" ">error_description</tt>): El usuario ha cancelado el proceso de autenticaci&oacute;n, o ha denegado la autorizaci&oacute;n. Se recomienda que en este caso la aplicaci&oacute;n cliente no muestre ning&uacute;n mensaje de error al usuario.    </p>
</li><li class=" ">    <p  ><tt class=" ">access_denied</tt>, <tt class=" ">RiskyAuthnContextException</tt>: Se ha denegado el acceso al usuario debido a que est&aacute; accediendo bajo un contexto de riesgo. Este error ocurre cuando el an&aacute;lisis de contexto devuelve un resultado de rechazo y el flujo de autenticaci&oacute;n no contempla un <i class=" ">fallback</i> para este caso.    </p>
</li><li class=" ">    <p  ><tt class=" ">access_denied</tt>, <tt class=" ">DisabledSignIdentity</tt>: Se ha denegado la autorizaci&oacute;n para firmar en servidor porque la identidad de firma solicitada est&aacute; inhabilitada.    </p>
</li><li class=" ">    <p  ><tt class=" ">access_denied</tt>, <tt class=" ">LockedSignIdentity</tt>: Se ha denegado la autorizaci&oacute;n para firmar en servidor porque la identidad de firma solicitada est&aacute; bloqueada.    </p>
</li><li class=" ">    <p  ><tt class=" ">login_required</tt>: Se requiere la autenticaci&oacute;n del usuario. Este error puede producirse cuando la combinaci&oacute;n de los requisitos de autenticaci&oacute;n (solicitados y configurados) resulta en uno o m&aacute;s flujos de s&oacute;lo reautenticaci&oacute;n pero el usuario a&uacute;n no tiene una sesi&oacute;n iniciada en el proveedor de identidad. O cuando la aplicaci&oacute;n ha indicado el par&aacute;metro <tt class=" ">prompt=none</tt>, pero se requiere interacci&oacute;n con el usuario. Otros c&oacute;digos de error relacionados son <tt class=" ">interaction_required</tt> y <tt class=" ">consent_required</tt>.    </p>
</li><li class=" ">    <p  ><tt class=" ">invalid_scope</tt>: Alguno de los <i class=" ">scopes</i> solicitados por la aplicaci&oacute;n no est&aacute; incluido en la lista de <i class=" ">scopes</i> ofrecidos por el servidor de autorizaci&oacute;n, o no ha sido habilitado para <i class=" ">Authorization Code Grant</i>. Este error tambi&eacute;n se produce si la aplicaci&oacute;n no ha solicitado ning&uacute;n <i class=" ">scope</i> y el servidor no tiene definido ninguno por defecto habilitado para dicho tipo de <i class=" ">grant</i>.    </p>
</li></ul>    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240666">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener un token de acceso</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240666_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW50b2tlbmRlYWNjZXNvLURlc2NyaXBjacOzbg">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW50b2tlbmRlYWNjZXNvLVBldGljacOzbg">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240666_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW50b2tlbmRlYWNjZXNvLVBhcsOhbWV0cm8">Par&aacute;metro</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-CabeceraContent-Type">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Cuerpo">Cuerpo</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW50b2tlbmRlYWNjZXNvLUF1dGVudGljYWNpw7NuZGVsYWFwbGljYWNpw7NuY2xpZW50ZQ">Autenticaci&oacute;n de la aplicaci&oacute;n cliente</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-CabeceraContent-Type.1">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Cuerpo.1">Cuerpo</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Respuestadeerror">Respuesta de error</a>    </p>
</li></ul>    <div class="section section-6" id="src-96240666_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW50b2tlbmRlYWNjZXNvLURlc2NyaXBjacOzbg">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Obtiene un <i class=" ">token</i> de acceso en el marco de un flujo de autorizaci&oacute;n <a  class="external-link" href="https://tools.ietf.org/html/rfc6749">OAuth 2.0</a>. El flujo puede ser de tipo <i class=" ">Authorizaci&oacute;n Code Grant</i> o de tipo <i class=" ">Client Credentials Grant</i>:    </p>
<ul class=" "><li class=" ">    <p  >Cuando el flujo de autorizaci&oacute;n es de tipo <i class=" ">Authorization Code Grant</i>, el <i class=" ">token</i> de acceso obtenido acredita la autorizaci&oacute;n que un usuario de un determinado dominio de identidad concede a la aplicaci&oacute;n que efect&uacute;a la llamada para que acceda a determinados recursos o servicios en su nombre (a datos de identidad, a identidades de firma, etc). Para obtener el <i class=" ">token</i>, la aplicaci&oacute;n debe presentar un c&oacute;digo de autorizaci&oacute;n obtenido con la operaci&oacute;n <a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a>.    </p>
</li><li class=" ">    <p  >Cuando el flujo de autorizaci&oacute;n es de tipo <i class=" ">Client Credentials Grant</i>, el <i class=" ">token</i> de acceso obtenido acredita la autorizaci&oacute;n de la aplicaci&oacute;n que efect&uacute;a la llamada a acceder a determinados recursos o servicios de forma administrativa (es decir, sin intervenci&oacute;n directa del propietario del recurso), o bien a recursos propios de la aplicaci&oacute;n. La autorizaci&oacute;n puede estar limitada a un determinado dominio de identidad, seg&uacute;n la configuraci&oacute;n del servidor de autorizaci&oacute;n (en este caso, la aplicaci&oacute;n s&oacute;lo podr&aacute; usar el <i class=" ">token</i> para acceder de forma administrativa a recursos pertenecientes a usuarios de ese dominio). El uso de este tipo de <i class=" ">grant</i> debe preconfigurarse en el servidor de autorizaci&oacute;n para la aplicaci&oacute;n, y s&oacute;lo puede habilitarse para aplicaciones basadas en servidor.    </p>
</li></ul>    </div>
    <div class="section section-6" id="src-96240666_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW50b2tlbmRlYWNjZXNvLVBldGljacOzbg">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <p  >Para obtener el <i class=" ">token</i> de acceso, la aplicaci&oacute;n cliente debe enviar una petici&oacute;n como la siguiente a TrustedX. N&oacute;tese que, en el caso de <i class=" ">Authorization Code Grant</i>, y a diferencia del intercambio descrito en <a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a>, esta petici&oacute;n viaja directamente de la aplicaci&oacute;n cliente a TrustedX, sin pasar por el navegador.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">POST /trustedx-authserver/oauth/{as}/token</code></div>
</div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">Nota</div>
            <div class="panel-content">
    <p  >Alternativamente, es posible utilizar la sintaxis <tt class=" ">/trustedx-authserver/{idp}/oauth/token</tt> , donde <tt class=" ">{idp}</tt> es el identificador de un proveedor de identidad y coincide con el identificador de un servidor de autorizaci&oacute;n asociado a dicho IdP.    </p>
        </div>
    </div>
    <div class="section section-7" id="src-96240666_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW50b2tlbmRlYWNjZXNvLVBhcsOhbWV0cm8">
        <h7 class="heading "><span>Par&aacute;metro</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">as</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del servidor de autorizaci&oacute;n de TrustedX al que se pide el<i class=" "> token</i> de acceso (campo <strong class=" ">Id. de servidor</strong> de una de las entidades de tipo <strong class=" ">Servidor de autorizaci&oacute;n</strong>). En el caso de <i class=" ">Authorization Code Grant</i>, debe indicarse el mismo servidor de autorizaci&oacute;n al que se pidi&oacute; la autorizaci&oacute;n.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-CabeceraContent-Type">
        <h7 class="heading "><span>Cabecera Content-Type </span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/x-www-form-urlencoded; charset=UTF-8</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >El contenido de la petici&oacute;n var&iacute;a en funci&oacute;n del tipo de flujo OAuth 2.0 en el marco del cual se solicita el <i class=" ">token</i> de acceso:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-ContenidocuandoelflujoesdetipoAuthorizationCodeGrant">Contenido cuando el flujo es de tipo Authorization Code Grant</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-ContenidocuandoelflujoesdetipoClientCredentialsGrant">Contenido cuando el flujo es de tipo Client Credentials Grant</a>    </p>
</li></ul>    <div class="section section-8" id="src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-ContenidocuandoelflujoesdetipoAuthorizationCodeGrant">
        <h8 class="heading "><span>Contenido cuando el flujo es de tipo Authorization Code Grant</span></h8>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">grant_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Debe tener el valor <tt class=" ">authorization_code</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">code</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >C&oacute;digo de autorizaci&oacute;n que se ha recibido en la respuesta de autorizaci&oacute;n previa (mensaje Authorization Response de la operaci&oacute;n <a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">redirect_uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI en la que se ha recibido la respuesta de autorizaci&oacute;n con el c&oacute;digo de autorizaci&oacute;n. Debe coincidir con el par&aacute;metro <tt class=" ">redirect_uri</tt> de la petici&oacute;n de autorizaci&oacute;n (mensaje Authorization Request de la operaci&oacute;n <a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a>), y debe omitirse si tambi&eacute;n se omiti&oacute; en la petici&oacute;n de autorizaci&oacute;n.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-8" id="src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-ContenidocuandoelflujoesdetipoClientCredentialsGrant">
        <h8 class="heading "><span>Contenido cuando el flujo es de tipo Client Credentials Grant</span></h8>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">grant_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Debe tener el valor <tt class=" ">client_credentials</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">scope</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Lista de valores que representan el alcance de la autorizaci&oacute;n (recursos) que la aplicaci&oacute;n desea obtener. Si no se especifica este par&aacute;metro, se tomar&aacute;n los <i class=" ">scopes</i> por defecto configurados en TrustedX para el servidor de autorizaci&oacute;n y que est&eacute;n habilitados para <i class=" ">Client Credentials Grant</i>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-7" id="src-96240666_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW50b2tlbmRlYWNjZXNvLUF1dGVudGljYWNpw7NuZGVsYWFwbGljYWNpw7NuY2xpZW50ZQ">
        <h7 class="heading "><span>Autenticaci&oacute;n de la aplicaci&oacute;n cliente</span></h7>
    <p  >La aplicaci&oacute;n debe enviar la petici&oacute;n por TLS y autenticarse usando el esquema de autenticaci&oacute;n b&aacute;sica de HTTP. Como credenciales debe indicar el identificador y el secreto asignados a la aplicaci&oacute;n durante el registro en TrustedX (campos <strong class=" ">ldentificador de cliente</strong> y <strong class=" ">Secreto de cliente</strong> de la configuraci&oacute;n de la entidad <strong class=" ">Aplicaci&oacute;n cliente</strong>), codificados como especifica <a  class="external-link" href="https://tools.ietf.org/html/rfc6749#section-2.3.1">OAuth 2.0</a>.    </p>
    <p  >Concretamente, la aplicaci&oacute;n debe incluir una cabecera <tt class=" ">Authorization</tt> con la siguiente estructura:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Basic {credentials}</code></div>
</div>
    </div>
    <p  >donde <i class=" "><tt class=" ">{credentials}</tt></i> es el resultado de codificar el identificador de cliente de la aplicaci&oacute;n (<tt class=" ">client_id</tt>) y su secreto (<tt class=" ">client_secret</tt>) del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">base64(url_encode(utf8(client_id)) ':' url_encode(utf8(client_secret)))</code></div>
</div>
    </div>
    <p  >El significado del pseudoc&oacute;digo anterior es el siguiente:    </p>
<ul class=" "><li class=" ">    <p  >Codificar <tt class=" ">client_id</tt> en UTF-8. A continuaci&oacute;n, codificar el resultado obtenido aplicando las reglas de <i class=" ">escape</i> de caracteres en URLs.    </p>
</li><li class=" ">    <p  >Codificar <tt class=" ">client_secret</tt> en UTF-8. A continuaci&oacute;n, codificar el resultado obtenido aplicando las reglas de <i class=" ">escape</i> de caracteres en URLs.    </p>
</li><li class=" ">    <p  >Concatenar ambos usando el car&aacute;cter de dos puntos ('<tt class=" ">:</tt>') como separador.    </p>
</li><li class=" ">    <p  >Codificar la cadena resultante en base64 sin saltos de l&iacute;nea.    </p>
</li></ul>    <p  >Las reglas de <i class=" ">escape</i> de caracteres en URLs son las que se definen para el formato MIME <i class=" ">application/x-www-form-urlencoded</i> en la <a  class="external-link" href="https://www.w3.org/TR/html4/interact/forms.html#h-17.13.4">especificaci&oacute;n HTML</a> y deben aplicarse a los bytes resultantes de codificar el identificador o el secreto en UTF-8. V&eacute;ase m&aacute;s abajo para un ejemplo.    </p>
    <div  class="confbox panel">
            <div class="title panel-header">Nota</div>
            <div class="panel-content">
    <p  >El esquema de autenticaci&oacute;n b&aacute;sica de HTTP definido en <a  class="external-link" href="https://tools.ietf.org/html/rfc2617">RFC 2617</a> <i class=" ">no</i> especifica que las credenciales deban codificarse en UTF-8 y en formato URL. El uso de estas reglas de codificaci&oacute;n adicionales es propio de <a  class="external-link" href="https://tools.ietf.org/html/rfc6749#section-2.3.1">OAuth 2.0</a>. Si se usa una librer&iacute;a software o una herramienta que genera la cabecera <tt class=" ">Authorization</tt> seg&uacute;n <a  class="external-link" href="https://tools.ietf.org/html/rfc2617">RFC 2617</a>, es necesario tener en cuenta esto, especialmente cuando el identificador o el secreto contienen s&iacute;mbolos o caracteres extendido.    </p>
        </div>
    </div>
    <p  >    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <p  >Como respuesta, TrustedX emite un <i class=" ">token</i> de acceso OAuth 2.0 de tipo <i class=" ">bearer</i> (al portador) y lo devuelve en una estructura JSON. La aplicaci&oacute;n usar&aacute; este <i class=" ">token</i> para invocar a los servicios REST de TrustedX.    </p>
    <div class="section section-7" id="src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 200 OK</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-CabeceraContent-Type.1">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json;charset=UTF-8</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Cuerpo.1">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Objeto JSON que contiene el <i class=" ">token</i> de acceso solicitado e informaci&oacute;n asociada al mismo.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{     </code></div>
<div class="line"><code class="plain">	"access_token" : {string},    </code></div>
<div class="line"><code class="plain">	"token_type" : "Bearer",    </code></div>
<div class="line"><code class="plain">	"expires_in" : {number}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">access_token</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Token</i> de acceso generado por TrustedX. El token tiene las caracter&iacute;sticas que se hayan especificado en la configuraci&oacute;n del servidor de autorizaci&oacute;n, y consiste en una cadena aleatoria de tantos bytes como indique la opci&oacute;n <strong class=" ">N&uacute;mero de bytes aleatorios del token de acceso </strong>(por defecto, 32 bytes), codificada en hexadecimal.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">token_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de <i class=" ">token</i> de acceso. Siempre tiene el valor &quot;<tt class=" ">Bearer&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">expires_in</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tiempo de vida (en segundos) del <i class=" ">token</i> de acceso. La aplicaci&oacute;n debe realizar el acceso al que da derecho el <i class=" ">token</i> antes de que &eacute;ste caduque. Este valor puede configurarse en la opci&oacute;n <strong class=" ">Caducidad del token de acceso</strong> del servidor de autorizaci&oacute;n (por defecto, 120 segundos). Una vez superado este tiempo de vida el <i class=" ">token</i> deja de ser v&aacute;lido, y la aplicaci&oacute;n debe obtener otro si desea seguir invocando a los servicios protegidos.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240666_TX_EIDAS_4.1.4.0-Obteneruntokendeacceso-Respuestadeerror">
        <h6 class="heading "><span>Respuesta de error</span></h6>
    <p  >Si la petici&oacute;n de emisi&oacute;n del <i class=" ">token</i> de acceso no puede procesarse por alg&uacute;n motivo (porque la petici&oacute;n no es v&aacute;lida, la autenticaci&oacute;n de la aplicaci&oacute;n cliente falla, el c&oacute;digo de autorizaci&oacute;n ha caducado, etc.), TrustedX devolver&aacute; una respuesta de error con el formato que define el est&aacute;ndar. La respuesta tiene generalmente un c&oacute;digo de estado <tt class=" ">HTTP 400 (Bad Request)</tt> (excepto en alg&uacute;n caso, como se describe m&aacute;s abajo) y consiste en una estructura de datos JSON con los siguientes par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">error</tt>: C&oacute;digo de error. Consulte el est&aacute;ndar y la lista que sigue para m&aacute;s detalles.    </p>
</li><li class=" ">    <p  ><tt class=" ">error_description</tt>: Descripci&oacute;n adicional del error. Puede no estar presente.    </p>
</li><li class=" ">    <p  ><tt class=" ">error_uri</tt>: Siempre ausente. TrustedX no lo utiliza.    </p>
</li></ul>    <p  >A continuaci&oacute;n se listan los valores de <tt class=" ">error</tt> y <tt class=" ">error_description</tt> (si lo hay) para algunos errores t&iacute;picos, y su correspondiente significado:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">invalid_client</tt>, <tt class=" ">unsupportedAuthenticationScheme</tt>: El esquema de autenticaci&oacute;n indicado en la cabecera HTTP Authorization no se soporta. Actualmente TrustedX s&oacute;lo soporta el esquema b&aacute;sico (HTTP Basic authentication scheme) definido en <a  class="external-link" href="https://tools.ietf.org/html/rfc2617">RFC 2617</a>. El c&oacute;digo de estado HTTP devuelto en este caso es 401 (Unauthorized).    </p>
</li><li class=" ">    <p  ><tt class=" ">invalid_client</tt>, <tt class=" ">invalidCredentials</tt>: No se puede autenticar a la aplicaci&oacute;n cliente a partir de las credenciales incluidas en la cabecera HTTP Authorization. Puede ser debido a que no existe ninguna entidad de tipo <strong class=" ">Aplicaci&oacute;n cliente</strong> configurada en TrustedX con el identificador especificado, o a que la entidad existe pero el secreto no coincide con el configurado. El c&oacute;digo de estado HTTP devuelto es <tt class=" ">401</tt> (<tt class=" ">Unauthorized</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">unsupported_grant_type</tt>: El valor del par&aacute;metro <tt class=" ">grant_type</tt> en la petici&oacute;n no se soporta. Actualmente TrustedX s&oacute;lo soporta el tipo <tt class=" ">authorization_code</tt>.    </p>
</li><li class=" ">    <p  ><tt class=" ">invalid_grant</tt>, <tt class=" ">codeNotFound</tt>: El c&oacute;digo de autorizaci&oacute;n indicado en el par&aacute;metro <tt class=" ">code</tt> de la petici&oacute;n no fue emitido en ninguna respuesta de autorizaci&oacute;n reciente, o ha caducado.    </p>
</li><li class=" ">    <p  ><tt class=" ">invalid_grant</tt>, <tt class=" ">expiredCode</tt>: El c&oacute;digo de autorizaci&oacute;n indicado en el par&aacute;metro <tt class=" ">code</tt> de la petici&oacute;n ha caducado.    </p>
</li><li class=" ">    <p  ><tt class=" ">invalid_grant</tt>, <tt class=" ">codeNotIssuedToClientId</tt>: El c&oacute;digo de autorizaci&oacute;n indicado se emiti&oacute; para una aplicaci&oacute;n cliente distinta de la que se identifica en la cabecera HTTP Authorization.    </p>
</li><li class=" ">    <p  ><tt class=" ">invalid_grant</tt>, <tt class=" ">redirectUriMismatch</tt>: El c&oacute;digo de autorizaci&oacute;n indicado se emiti&oacute; para una petici&oacute;n de autorizaci&oacute;n asociada a una URL de redirecci&oacute;n distinta de la especificada en el par&aacute;metro <tt class=" ">redirect_uri</tt> de la petici&oacute;n.    </p>
</li><li class=" ">    <p  ><tt class=" ">invalid_scope</tt>: S&oacute;lo para el flujo <i class=" ">Client Credentials Grant</i>. Alguno de los <i class=" ">scopes</i> solicitados por la aplicaci&oacute;n no est&aacute; incluido en la lista de <i class=" ">scopes</i> ofrecidos por el servidor de autorizaci&oacute;n, o no ha sido habilitado para <i class=" ">Client Credentials Grant</i>. Este error tambi&eacute;n se produce si la aplicaci&oacute;n no ha solicitado ning&uacute;n <i class=" ">scope</i> y el servidor no tiene definido ninguno por defecto habilitado para dicho tipo de <i class=" ">grant</i>.    </p>
</li></ul>    <p  >Si ha ocurrido un error interno en el servidor no se devuelve una respuesta JSON sino un c&oacute;digo de estado <tt class=" ">HTTP 500 (Internal Server Error)</tt>. En estos casos, el administrador de TrustedX debe consultar los logs para diagnosticar el problema.    </p>
    <p  >    </p>
    <p  >    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    </div>
    <div class="section section-3" id="src-96240667">
        <h3 class="heading "><span>TX_EIDAS_4.1.4.0 - API de informaci&oacute;n de usuario</span></h3>
    <p  >Mediante el servicio de informaci&oacute;n de usuario las aplicaciones pueden consultar <i class=" ">claims</i> (atributos de identidad, detalles de autenticaci&oacute;n, etc) relativos al usuario en nombre del cual se ha emitido el <i class=" ">token</i> de acceso OAuth 2.0. Este servicio est&aacute; parcialmente estandarizado por <a  class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect 1.0</a>.    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240668">TX_EIDAS_4.1.4.0 - Scopes de informaci&oacute;n de usuario</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240669">TX_EIDAS_4.1.4.0 - API de informaci&oacute;n de usuario - Operaciones</a>    </p>
</li></ul>    <div class="section section-4" id="src-96240668">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - Scopes de informaci&oacute;n de usuario</span></h4>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240668_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TY29wZXNkZWluZm9ybWFjacOzbmRldXN1YXJpby1TY29wZXNwcmVkZWZpbmlkb3M">Scopes predefinidos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240668_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TY29wZXNkZWluZm9ybWFjacOzbmRldXN1YXJpby1TY29wZXNwZXJzb25hbGl6YWRvcw">Scopes personalizados</a>    </p>
</li></ul>    <p  >El conjunto de <i class=" ">claims</i> que se obtienen como respuesta de la operaci&oacute;n <a   href="#src-96240670">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n del usuario autenticado</a> dependen de los <i class=" ">scopes</i> asociados al <i class=" ">token</i> de acceso OAuth con el que se realiza la invocaci&oacute;n al servicio. A continuaci&oacute;n se describen los <i class=" ">scopes</i> que este servicio tiene en cuenta para determinar los <i class=" ">claims</i> a devolver.    </p>
    <div class="section section-5" id="src-96240668_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TY29wZXNkZWluZm9ybWFjacOzbmRldXN1YXJpby1TY29wZXNwcmVkZWZpbmlkb3M">
        <h5 class="heading "><span>Scopes predefinidos</span></h5>
    <p  >El servicio de informaci&oacute;n de usuario admite los siguientes <i class=" ">scopes</i> predefinidos, que modelan distintos conjuntos de <i class=" ">claims</i> que pueden obtenerse:    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Scope    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">profile</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Scope</i> estandarizado por <a  class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect</a> para obtenci&oacute;n del perfil del usuario, exceptuando la informaci&oacute;n de contacto.    </p>
    <p  >Los atributos de identidad que tiene asociados son: <tt class=" ">name</tt>, <tt class=" ">family_name</tt>, <tt class=" ">given_name</tt>, <tt class=" ">middle_name</tt>, <tt class=" ">nickname</tt>, <tt class=" ">preferred_username</tt>, <tt class=" ">profile</tt>, <tt class=" ">picture</tt>, <tt class=" ">website</tt>, <tt class=" ">gender</tt>, <tt class=" ">birthdate</tt>, <tt class=" ">zoneinfo</tt>, <tt class=" ">locale</tt> y <tt class=" ">updated_at</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">email</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Scope</i> estandarizado por <a  class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect</a> para obtenci&oacute;n de la direcci&oacute;n de correo electr&oacute;nico del usuario.    </p>
    <p  >Los atributos de identidad asociados son: <tt class=" ">email</tt> y <tt class=" ">email_verified</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">phone</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Scope</i> estandarizado por <a  class="external-link" href="http://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect</a> para obtenci&oacute;n del n&uacute;mero de tel&eacute;fono del usuario.    </p>
    <p  >Los atributos de identidad asociados son: <tt class=" ">phone_number</tt> y <tt class=" ">phone_number_verified</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:external_info</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtenci&oacute;n de atributos de identidad procedentes de proveedores de identidad federados u otras fuentes de identidad externas que el usuario ha utilizado para autenticarse durante la sesi&oacute;n.    </p>
    <p  >Este <i class=" ">scope</i> permite obtener el <i class=" ">claim</i> <tt class=" ">external_info</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:authn_details</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtenci&oacute;n de detalles sobre el contexto y el proceso de autenticaci&oacute;n del usuario.    </p>
    <p  >Esta informaci&oacute;n se obtiene en el <i class=" ">claim</i> <tt class=" ">authn_details</tt>. Los detalles concretos obtenidos depender&aacute;n de los flujos de autenticaci&oacute;n que se han aplicado para autenticar al usuario. Por ejemplo, si se ha aplicado un flujo de autenticaci&oacute;n que incluye un paso de tipo <strong class=" ">An&aacute;lisis de contexto</strong>, y seg&uacute;n los factores incluidos en la pol&iacute;tica de an&aacute;lisis de contexto aplicada, la informaci&oacute;n devuelta puede incluir informaci&oacute;n sobre el dispositivo utilizado, la direcci&oacute;n IP, el estado de entrenamiento del ritmo de tecleo, y otros datos.Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:sign:identity:profile</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtenci&oacute;n de informaci&oacute;n sobre las identidades de firma electr&oacute;nica del usuario.    </p>
    <p  >Este <i class=" ">scope</i> permite obtener el <i class=" ">claim</i> <tt class=" ">sign_identities</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:full_identity</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obtenci&oacute;n del conjunto completo de atributos de identidad del usuario. Los atributos de este conjunto dependen de cada dominio de identidad y, en ocasiones, tambi&eacute;n pueden depender de los pasos concretos que definen el proceso de autenticaci&oacute;n realizado sobre el usuario.Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-5" id="src-96240668_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TY29wZXNkZWluZm9ybWFjacOzbmRldXN1YXJpby1TY29wZXNwZXJzb25hbGl6YWRvcw">
        <h5 class="heading "><span>Scopes personalizados</span></h5>
    <p  >Adem&aacute;s, el administrador de TrustedX puede definir <i class=" ">scopes</i> arbitrarios, que pueden opcionalmente asociarse a conjuntos de atributos de identidad. V&eacute;ase <a   href="#src-93981252">Entorno de integraci&oacute;n</a> (Scopes) para m&aacute;s informaci&oacute;n. Si la aplicaci&oacute;n ha solicitado uno o m&aacute;s de estos <i class=" ">scopes</i>, al invocar al servicio de informaci&oacute;n de usuario obtendr&aacute; los atributos de identidad asociados. Los <i class=" ">scopes</i> registrados pueden combinarse con <i class=" ">scopes</i> predefinidos como los de OpenID Connect.    </p>
    <p  >Si alguno de los atributos definidos por el <i class=" ">scope</i> no ha sido obtenido (porque no es uno de los atributos contemplados por el IdP, o porque no tiene valor para el usuario autenticado) se omitir&aacute; en la respuesta, aunque el atributo haya sido solicitado mediante el correspondiente <i class=" ">scope</i>.    </p>
    <p  >    </p>
    </div>
    </div>
    <div class="section section-4" id="src-96240669">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de informaci&oacute;n de usuario - Operaciones</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240670">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n del usuario autenticado</a>    </p>
</li></ul>    <div class="section section-5" id="src-96240670">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n del usuario autenticado</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLURlc2NyaXBjacOzbg">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLVBldGljacOzbg">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLUF1dG9yaXphY2nDs24">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLVJlc3B1ZXN0YQ">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLVN0YXR1cy1MaW5l">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLUNhYmVjZXJhQ29udGVudC1UeXBl">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLUN1ZXJwbw">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLURlc2NyaXBjacOzbg">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Proporciona informaci&oacute;n de identidad y del proceso de autenticaci&oacute;n del usuario asociado a una autorizaci&oacute;n OAuth 2.0 de tipo <i class=" ">Authorization Code Grant</i>. Normalmente una aplicaci&oacute;n invocar&aacute; esta operaci&oacute;n cuando use OAuth 2.0 con el fin de autenticar al usuario. No suele ser necesario invocarla cuando OAuth 2.0 se usa s&oacute;lo para autorizar.    </p>
    </div>
    <div class="section section-6" id="src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLVBldGljacOzbg">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <p  >La aplicaci&oacute;n env&iacute;a la siguiente petici&oacute;n GET usando TLS:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">GET /trustedx-resources/openid/v1/users/me</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLUF1dG9yaXphY2nDs24">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener una cabecera <tt class=" ">Authorization</tt> con un <i class=" ">token</i> de acceso OAuth obtenido mediante <i class=" ">Authorization Code Grant</i>, es decir, con la aprobaci&oacute;n del usuario cuya informaci&oacute;n se desea obtener. No es posible usar un <i class=" ">token</i> obtenido v&iacute;a <i class=" ">Client Credentials Grant</i>, dado que este tipo de tokens no est&aacute;n asociados a ning&uacute;n usuario en particular.    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLVJlc3B1ZXN0YQ">
        <h6 class="heading "><span>Respuesta</span></h6>
    <p  >La respuesta es una estructura de datos JSON que contiene atributos de identidad del usuario autenticado e informaci&oacute;n sobre el contexto y el proceso de autenticaci&oacute;n (en general, <i class=" ">claims</i> o afirmaciones que el proveedor de identidad hace sobre el sujeto autenticado). El conjunto de <i class=" ">claims</i> devuelto depende, en el caso general, de los <i class=" ">scopes</i> asociados a la autorizaci&oacute;n con la que se invoca el servicio (vea <a   href="#src-96240668">TX_EIDAS_4.1.4.0 - Scopes de informaci&oacute;n de usuario</a>).    </p>
    <div class="section section-7" id="src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLVN0YXR1cy1MaW5l">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 200 OK</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLUNhYmVjZXJhQ29udGVudC1UeXBl">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json;charset=UTF-8</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240670_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVsdXN1YXJpb2F1dGVudGljYWRvLUN1ZXJwbw">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Objeto JSON con los <i class=" ">claims</i>.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{     </code></div>
<div class="line"><code class="plain">	"sub" : {string},    </code></div>
<div class="line"><code class="plain">	"domain" : {string},    </code></div>
<div class="line"><code class="plain">	"acr" : {string},    </code></div>
<div class="line"><code class="plain">	"amr" : {array},    </code></div>
<div class="line"><code class="plain">	...</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  >Los siguientes <i class=" ">claims</i> siempre se incluyen en la respuesta:    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sub</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del usuario (se trata del valor del atributo <tt class=" ">id</tt> obtenido por el flujo de autenticaci&oacute;n aplicado).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">domain</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del dominio en el que se ha autenticado el usuario.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">acr</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nivel o flujo de autenticaci&oacute;n con el que el usuario se ha autenticado.    </p>
    <p  >Si se incluy&oacute; el par&aacute;metro <tt class=" ">acr_values</tt> en el mensaje <i class=" ">Authorization Request</i> (v&eacute;ase <a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a>), la aplicaci&oacute;n debe generalmente verificar el valor del <i class=" ">claim</i> <tt class=" ">acr</tt> para asegurarse de que la autenticaci&oacute;n cumple los requisitos solicitados. Vea <a   href="#src-93981252">Entorno de integraci&oacute;n</a> para detalles.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">amr</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Mecanismos de autenticaci&oacute;n que el usuario ha superado con &eacute;xito a lo largo de la sesi&oacute;n en el IdP. Se trata de un <i class=" ">array</i> JSON de <tt class=" ">strings</tt>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >Adem&aacute;s, la respuesta puede incluir otros <i class=" ">claims</i> seg&uacute;n los <i class=" ">scopes</i> concedidos por el usuario (vea <a   href="#src-96240668">TX_EIDAS_4.1.4.0 - Scopes de informaci&oacute;n de usuario</a>):    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">{attribute1}</tt><tt class=" ">{attribute2}...</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Atributos de identidad del usuario. En general, los valores de estos atributos son de tipo <i class=" ">string</i>, y si un atributo tiene m&uacute;ltiples valores el formato del correspondiente <i class=" ">claim</i> es un <i class=" ">array</i> JSON con los valores del atributo.    </p>
    <p  >Los atributos que corresponden a <i class=" ">claims </i>estandarizados por OpenID Connect se devuelven en el formato que define el est&aacute;ndar. Si los flujos de autenticaci&oacute;n devuelven estos atributos con un valor de tipo distinto al aqu&iacute; indicado (no recomendado), los atributos se ignoran y no se incluyen en la respuesta.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">email_verified</tt>: tipo booleano    </p>
</li><li class=" ">    <p  ><tt class=" ">phone_number_verified</tt>: tipo booleano    </p>
</li><li class=" ">    <p  ><tt class=" ">updated_at</tt>: tipo n&uacute;merico    </p>
</li></ul>    <p  >No se incluir&aacute;n atributos con valores estructurados.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">external_info</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Atributos obtenidos de alg&uacute;n proveedor externo que el usuario ha utilizado para autenticarse en el proveedor de identidad. Deben considerarse atributos aseverados por el proveedor externo.    </p>
    <p  >El formato de este <i class=" ">claim</i> es un objeto JSON con un campo para cada dominio de identidad externo con el que el usuario se ha autenticado durante la sesi&oacute;n. El valor de cada campo es otro objeto JSON con los <i class=" ">claims</i> que se han obtenido del proveedor externo. El claim <tt class=" ">sub</tt> indica el identificador del usuario en el dominio externo.    </p>
    <p  >Si este <i class=" ">claim</i> se incluye en la respuesta, normalmente s&oacute;lo contendr&aacute; informaci&oacute;n de un dominio externo, pero podr&iacute;a haber varios si el usuario se ha reautenticado con m&aacute;s de un proveedor externo en el transcurso de su sesi&oacute;n en el proveedor de identidad.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">authn_details</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Detalles sobre el contexto y el proceso de autenticaci&oacute;n. El formato de este <i class=" ">claim</i> es un objeto JSON cuyos elementos son todos de tipo <i class=" ">string </i>y contiene, entre otros, los siguientes elementos:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">directSso</tt>: Si su valor es <tt class=" ">true</tt>, indica que se ha aplicado SSO directo. Si su valor es <tt class=" ">false</tt>, indica que se ha realizado una autenticaci&oacute;n inicial del usuario, o una reautenticaci&oacute;n total o parcial.    </p>
</li><li class=" ">    <p  ><tt class=" ">authnLevel</tt>: Identificador (URN) del nivel de autenticaci&oacute;n alcanzado.    </p>
</li><li class=" ">    <p  ><tt class=" ">authnFlow</tt>: Identificador (URN) del flujo de autenticaci&oacute;n utilizado para autenticar o reautenticar al usuario. Si ha habido SSO directo (el valor de <tt class=" ">directSso</tt> es <tt class=" ">true</tt>), entonces este elemento indica el flujo aplicado en la &uacute;ltima autenticaci&oacute;n o reautenticaci&oacute;n del usuario durante la sesi&oacute;n.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre las identidades de firma electr&oacute;nica del usuario.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div class="section section-3" id="src-96240696">
        <h3 class="heading "><span>TX_EIDAS_4.1.4.0 - API de firma de documentos</span></h3>
    <p  >La API de firma de documentos es la interfaz de TrustedX eIDAS mediante la que las aplicaciones pueden realizar firmas electr&oacute;nicas avanzadas de documentos (firmas PAdES y XAdES que, opcionalmente, incluyen un sello de tiempo). Esta interfaz la pueden utilizar las aplicaciones de dos formas:    </p>
<ul class=" "><li class=" ">    <p  >Actuando sobre recursos web que corresponden a procesos de firma.    </p>
</li><li class=" ">    <p  >Actuando sobre recursos web que corresponden a documentos y definiciones de firma.    </p>
</li></ul>    <p  >En el primer caso, es la plataforma quien dirige (orquesta) la realizaci&oacute;n de la firma, mientras que en el segundo, lo hace la propia aplicaci&oacute;n.    </p>
    <p  >De este modo, si una aplicaci&oacute;n crea un proceso de firma y ordena su ejecuci&oacute;n, ser&aacute; la plataforma qui&eacute;n se encargue de coordinar la ejecuci&oacute;n de las tareas de las que consta el proceso y de solicitar la intervenci&oacute;n de los distintos actores cuando sea necesario. En particular, la plataforma se encargar&aacute; de solicitar al proveedor de firma y al proveedor de sellos de tiempo que corresponda, la firma digital (PKCS #1) y el sello de tempo que deban ponerse en la firma electr&oacute;nica. Finalmente, la plataforma comunicar&aacute; a la aplicaci&oacute;n (mediante un <i class=" ">callback</i>) el fin del proceso de firma con el objeto de que la aplicaci&oacute;n pueda descargar el documento firmado de la ubicaci&oacute;n (URL) en la que se encuentre. Un tipo especial de proceso de firma es aquel en el que TrustedX eIDAS delega totalmente la orquestaci&oacute;n en alg&uacute;n sistema externo, por ejemplo, en una aplicaci&oacute;n de escritorio de firma electr&oacute;nica. En estos casos, TrustedX eIDAS actuar&aacute; en realidad como mecanismo (pasarela) de integraci&oacute;n de sistemas de firma electr&oacute;nica ya existentes en lugar de hacerlo como proveedor de firma electr&oacute;nica avanzada propiamente dicho.    </p>
    <p  >Alternativamente, si una aplicaci&oacute;n crea un recurso que contiene un documento y una o varias definiciones de firmas (supongamos solo una), ser&aacute; la propia aplicaci&oacute;n qui&eacute;n se encargue de pedirle a la plataforma que calcule el <i class=" ">hash</i> del documento en base a lo establecido en la definici&oacute;n de la firma. A continuaci&oacute;n, ser&aacute; tambi&eacute;n la aplicaci&oacute;n quien se encargue de pedirle a un proveedor de firma que, partiendo del hash del documento, genere la firma digital que haya que poner en la firma electr&oacute;nica. Del mismo modo, la aplicaci&oacute;n pedir&aacute; primero a la plataforma el <i class=" ">hash</i> de la firma y, a continuaci&oacute;n, al proveedor de sellos de tiempo que corresponda, el sello de tiempo que tenga que ponerse en la firma. Tras el paso anterior, la aplicaci&oacute;n podr&aacute; descargar el documento firmado de la ubicaci&oacute;n (URL) en la que se encuentre.    </p>
    <p  >Puede obtener informaci&oacute;n sobre los recursos, operaciones y casos de uso de esta API en los siguientes enlaces:    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240697">TX_EIDAS_4.1.4.0 - API de firma de documentos - Recursos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240701">TX_EIDAS_4.1.4.0 - API de firma de documentos - Operaciones</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240713">TX_EIDAS_4.1.4.0 - API de firma de documentos - Autorizaci&oacute;n</a>    </p>
</li></ul>    <p  >    </p>
    <div class="section section-4" id="src-96240697">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de firma de documentos - Recursos</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>    </p>
</li></ul>    <div class="section section-5" id="src-96240698">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</span></h5>
    <p  >identificador del recurso documento    </p>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240698_TX_EIDAS_4.1.4.0-Procesodefirmadedocumentos-URI">URI</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240698_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVmaXJtYWRlZG9jdW1lbnRvcy1EZXNjcmlwY2nDs24">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240698_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVmaXJtYWRlZG9jdW1lbnRvcy1SZXByZXNlbnRhY2nDs24">Representaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240698_TX_EIDAS_4.1.4.0-Procesodefirmadedocumentos-Operaciones">Operaciones</a>    </p>
</li></ul>    <div class="section section-6" id="src-96240698_TX_EIDAS_4.1.4.0-Procesodefirmadedocumentos-URI">
        <h6 class="heading "><span>URI</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">/trustedx-resources/esignsp/v2/signer_processes/{signature_process_id}</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240698_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVmaXJtYWRlZG9jdW1lbnRvcy1EZXNjcmlwY2nDs24">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Recurso que contiene informaci&oacute;n sobre un proceso de firma de documentos.    </p>
    </div>
    <div class="section section-6" id="src-96240698_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVmaXJtYWRlZG9jdW1lbnRvcy1SZXByZXNlbnRhY2nDs24">
        <h6 class="heading "><span>Representaci&oacute;n</span></h6>
    <p  >El proceso de firma de documentos se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	"id" : {string},</code></div>
<div class="line"><code class="plain">	"self" : {string},</code></div>
<div class="line"><code class="plain">	"process_type" : {string},</code></div>
<div class="line"><code class="plain">	"result" : {</code></div>
<div class="line"><code class="plain">		"status": {string},</code></div>
<div class="line"><code class="plain">		"details": {</code></div>
<div class="line"><code class="plain">			"message": {string}</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"tasks" : {</code></div>
<div class="line"><code class="plain">		"pending" : [ {</code></div>
<div class="line"><code class="plain">			"id" : {string},</code></div>
<div class="line"><code class="plain">			"type" : {string},            </code></div>
<div class="line"><code class="plain">			"url" : {string}</code></div>
<div class="line"><code class="plain">		} ]</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"documents" : [ {</code></div>
<div class="line"><code class="plain">		"id" : {string},</code></div>
<div class="line"><code class="plain">		"url" : {string},</code></div>
<div class="line"><code class="plain">		"content" : {string},</code></div>
<div class="line"><code class="plain">		"result" : {</code></div>
<div class="line"><code class="plain">			"status": {string},</code></div>
<div class="line"><code class="plain">			"details": {</code></div>
<div class="line"><code class="plain">				"message": {string}</code></div>
<div class="line"><code class="plain">			}</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	} ]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del proceso de firma. Esta propiedad es opcional y s&oacute;lo est&aacute; presente cuando la representaci&oacute;n corresponde a un proceso de firma que ya ha sido creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">self</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL del proceso de firma. Esta propiedad es opcional y s&oacute;lo est&aacute; presente cuando la representaci&oacute;n corresponde a un proceso de firma que ya ha sido creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">process_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de proceso de firma. Esta propiedad puede tener dos valores:    </p>
<ul class=" "><li class=" ">    <p  >&quot;<tt class=" ">urn:safelayer:eidas:processes:document:sign:esigp</tt>&quot;: el proceso utiliza una identidad de firma gestionada por la plataforma TrustedX eIDAS. Al principio del proceso se autenticar&aacute; al usuario y se obtendr&aacute; su autorizaci&oacute;n para consultar las identidades de firma con las que cuenta.    </p>
</li><li class=" ">    <p  >&quot;<tt class=" ">urn:safelayer:eidas:processes:document:sign&quot;</tt>: el proceso utiliza una identidad de firma gestionada por TrustedX eIDAS o por una aplicaci&oacute;n externa. Al principio del proceso, no se autenticar&aacute; al usuario ni se obtendr&aacute; su autorizaci&oacute;n para consultar las identidades de firma con las que cuenta, sino que ambas cosas se realizar&aacute;n m&aacute;s adelante, en el caso de que el usuario seleccione un esquema de identidades de firma de tipo eSigP.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">result</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Resultado del proceso de firma. Esta propiedad s&oacute;lo existe en los procesos de firma que hayan finalizado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">result.status</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Estado final del proceso de firma:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;finished&quot;</tt>: El proceso ha terminado despu&eacute;s de que todos los documentos hayan sido firmados con &eacute;xito.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;failed&quot;</tt>: El proceso ha terminado sin que se haya firmado ning&uacute;n documento porque se ha producido un error.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;failed_documents&quot;</tt>: El proceso ha terminado y se han firmado algunos documentos, pero no todos.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;canceled&quot;</tt>: El proceso ha terminado sin que se haya firmado ning&uacute;n documento porque su ejecuci&oacute;n ha sido cancelada.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">result.details.message</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad s&oacute;lo est&aacute; presente si se detallan las condiciones en las que ha acabado del proceso de firma y su valor es el mensaje con esta informaci&oacute;n. Habitualmente se emplea para que un mecanismo de firma externo proporcione detalles de por qu&eacute; un proceso ha finalizado con error.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">tasks</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n que proporciona TrustedX eIDAS de las tareas de las que consta el proceso. Actualmente, TrustedX eIDAS informa solo de tareas <tt class=" ">pending</tt>, es decir, de tareas que tiene que realizar la aplicaci&oacute;n cliente para que el proceso contin&uacute;e.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">tasks.pending[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre las tareas que tiene que realizar la aplicaci&oacute;n cliente para que el proceso de firma contin&uacute;e. Actualmente, TrustedX eIDAS indica siempre una sola tarea que, adem&aacute;s, es siempre de tipo &quot;<tt class=" ">UserBrowserTask&quot;.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">tasks.pending[].id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de una de las tareas que tiene que realizar la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">tasks.pending[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de una de las tareas que tiene que realizar la aplicaci&oacute;n cliente. Actualmente esta propiedad tiene siempre el valor &quot;<tt class=" ">UserBrowserTask&quot;</tt>. Este valor identifica un tipo de tarea que consiste en redirigir el navegador del usuario a una URL determinada.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">tasks.pending[].url</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad solo est&aacute; presente para una tarea <i class=" ">pending</i> que sea de tipo &quot;<tt class=" ">UserBrowserTask&quot;</tt> y su valor es la URL a la que la aplicaci&oacute;n cliente tiene que redirigir el navegador del usuario para que dicha tarea se tenga por realizada.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de los recursos <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> que est&aacute;n asociados al proceso de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].url</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL de uno de los recursos <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de uno de los recursos <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].content</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL del documento que contiene uno de los recursos <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].result</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Resultado del proceso de firma para el documento que contiene uno de los recursos <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;finished&quot;</tt>: El proceso ha terminado y el documento ha sido firmado con &eacute;xito.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;failed&quot;</tt>: El proceso ha terminado y el documento no ha sido firmado porque se ha producido un error.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;canceled&quot;</tt>: El proceso ha terminado al ser cancelada su ejecuci&oacute;n y el documento no ha sido firmado.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].details.message</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Mensaje que describe el error cuando el resultado del proceso de firma para el documento que contiene uno de los recursos <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> es <tt class=" ">failed.</tt>    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-6" id="src-96240698_TX_EIDAS_4.1.4.0-Procesodefirmadedocumentos-Operaciones">
        <h6 class="heading "><span>Operaciones</span></h6>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240704">TX_EIDAS_4.1.4.0 - Ejecutar un proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240705">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de documentos firmados</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240708">TX_EIDAS_4.1.4.0 - Eliminar un proceso de firma de documentos</a>    </p>
</li></ul>    </div>
    </div>
    <div class="section section-5" id="src-96240699">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240699_TX_EIDAS_4.1.4.0-Documentoydefinicionesdefirmas-URI">URI</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240699_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Eb2N1bWVudG95ZGVmaW5pY2lvbmVzZGVmaXJtYXMtRGVzY3JpcGNpw7Nu">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240699_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Eb2N1bWVudG95ZGVmaW5pY2lvbmVzZGVmaXJtYXMtUmVwcmVzZW50YWNpw7Nu">Representaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240699_TX_EIDAS_4.1.4.0-Documentoydefinicionesdefirmas-Operaciones">Operaciones</a>    </p>
</li></ul>    <div class="section section-6" id="src-96240699_TX_EIDAS_4.1.4.0-Documentoydefinicionesdefirmas-URI">
        <h6 class="heading "><span>URI</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">/trustedx-resources/esignsp/v2/documents/{document_id}</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240699_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Eb2N1bWVudG95ZGVmaW5pY2lvbmVzZGVmaXJtYXMtRGVzY3JpcGNpw7Nu">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Recurso que contiene un documento y una o m&aacute;s <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>.    </p>
    </div>
    <div class="section section-6" id="src-96240699_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Eb2N1bWVudG95ZGVmaW5pY2lvbmVzZGVmaXJtYXMtUmVwcmVzZW50YWNpw7Nu">
        <h6 class="heading "><span>Representaci&oacute;n</span></h6>
    <p  >Un recurso <i class=" ">Documento y definiciones de firmas</i> se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	"id" : {string},</code></div>
<div class="line"><code class="plain">	"self" : {string},</code></div>
<div class="line"><code class="plain">	"signers" : [ {SignatureDefinition} ],</code></div>
<div class="line"><code class="plain">	"content" : {string}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del recurso. Esta propiedad es opcional y s&oacute;lo est&aacute; presente cuando la representaci&oacute;n corresponde a un recurso que ya ha sido creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">self</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL del recurso. Esta propiedad es opcional y s&oacute;lo est&aacute; presente cuando la representaci&oacute;n corresponde a un recurso que ya ha sido creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signers[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que contiene el recurso. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">content</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Documento que contiene el recurso. Esta propiedad es opcional y actualmente no se incluye nunca en las representaciones del recurso.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-6" id="src-96240699_TX_EIDAS_4.1.4.0-Documentoydefinicionesdefirmas-Operaciones">
        <h6 class="heading "><span>Operaciones</span></h6>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240703">TX_EIDAS_4.1.4.0 - Crear un recurso Documento y definiciones de firmas</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240706">TX_EIDAS_4.1.4.0 - Obtener un documento</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240707">TX_EIDAS_4.1.4.0 - Eliminar un recurso Documento y definiciones de firmas</a>    </p>
</li></ul>    <p  >    </p>
    </div>
    </div>
    <div class="section section-5" id="src-96240700">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtVVJJ">URI</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtRGVzY3JpcGNpw7Nu">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUmVwcmVzZW50YWNpw7Nu">Representaci&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNQREYvUEFkRVMp">Propiedad parameters (firmas PDF/PAdES)</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycy5zaWduYXR1cmVfZmllbGQuYXBwZWFyYW5jZS5zaWduYXR1cmVfZGV0YWlscw">Propiedad parameters.signature_field.appearance.signature_details</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTZW52ZWxvcGVkKQ">Propiedad parameters (firmas XMLDSig/XAdES enveloped)</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTaW50ZXJuYWxseWRldGFjaGVkKQ">Propiedad parameters (firmas XMLDSig/XAdES internally detached)</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTZXh0ZXJuYWxseWRldGFjaGVkKQ">Propiedad parameters (firmas XMLDSig/XAdES externally detached)</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTZXh0ZXJuYWxseWRldGFjaGVkYXBhcnRpcmRlaGFzaGVzKQ">Propiedad parameters (firmas XMLDSig/XAdES externally detached a partir de hashes)</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtT3BlcmFjaW9uZXM">Operaciones</a>    </p>
</li></ul>    <div class="section section-6" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtVVJJ">
        <h6 class="heading "><span>URI</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">/trustedx-resources/esignsp/v2/documents/{document_id}/signers/{signature_definition_id}</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtRGVzY3JpcGNpw7Nu">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Definici&oacute;n de una firma de un documento. Una definici&oacute;n de firma siempre forma parte de un recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> y se aplica sobre el documento que dicho recurso tambi&eacute;n contiene.    </p>
    </div>
    <div class="section section-6" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUmVwcmVzZW50YWNpw7Nu">
        <h6 class="heading "><span>Representaci&oacute;n</span></h6>
    <p  >Una definici&oacute;n de firma se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	"id" : {string},</code></div>
<div class="line"><code class="plain">	"self" : {string},</code></div>
<div class="line"><code class="plain">	"signature_policy_id" : {string},</code></div>
<div class="line"><code class="plain">	"parameters" : {Parameters},</code></div>
<div class="line"><code class="plain">	"to_be_signed" : {</code></div>
<div class="line"><code class="plain">		"digest" : {</code></div>
<div class="line"><code class="plain">			"algorithm" : {string},</code></div>
<div class="line"><code class="plain">			"value" : {string}</code></div>
<div class="line"><code class="plain">		} </code></div>
<div class="line"><code class="plain">	}, </code></div>
<div class="line"><code class="plain">	"signature" : {string},	</code></div>
<div class="line"><code class="plain">	"to_be_timestamped" : { </code></div>
<div class="line"><code class="plain">		"type": {string}, </code></div>
<div class="line"><code class="plain">		"digest_algorithm": {string}, </code></div>
<div class="line"><code class="plain">		"digest_value": {string} }, </code></div>
<div class="line"><code class="plain">		"timestamps" : [{string}]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la definici&oacute;n de firma. Esta propiedad es opcional y s&oacute;lo est&aacute; presente cuando la representaci&oacute;n corresponde a un recurso que ya ha sido creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">self</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL de la definici&oacute;n de firma. Esta propiedad es opcional y s&oacute;lo est&aacute; presente cuando la representaci&oacute;n corresponde a un recurso que ya ha sido creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_policy_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de firma que se define:    </p>
<ul class=" "><li class=" ">    <p  >&quot;<tt class=" ">urn:safelayer:eidas:policies:sign:document:pdf&quot;:</tt> definici&oacute;n de una firma PAdES de ETSI (ETSI TS 102 778).    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;urn:safelayer:eidas:policies:sign:document:xml&quot;:</tt> definici&oacute;n de una firma W3C XMLDSig/XAdES (ETSI TS 101 903).    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">parameters</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Caracter&iacute;sticas de la firma que se define. Esta propiedad es opcional, si bien es necesaria para poder ejecutar la operaci&oacute;n <a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a> sobre el recurso. El valor de esta propiedad se representa en JSON del modo que se explica en:    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNQREYvUEFkRVMp">Propiedad parameters (firmas PDF/PAdES)</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTZW52ZWxvcGVkKQ">Propiedad parameters (firmas XMLDSig/XAdES enveloped)</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTaW50ZXJuYWxseWRldGFjaGVkKQ">Propiedad parameters (firmas XMLDSig/XAdES internally detached)</a>)    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTZXh0ZXJuYWxseWRldGFjaGVkKQ">Propiedad parameters (firmas XMLDSig/XAdES externally detached)</a>.    </p>
</li><li class=" ">    <p  ><a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTZXh0ZXJuYWxseWRldGFjaGVkYXBhcnRpcmRlaGFzaGVzKQ">Propiedad parameters (firmas XMLDSig/XAdES externally detached a partir de hashes)</a>.    </p>
</li></ul>    <p  >El comportamiento por defecto en ausencia de esta propiedad (o de alguna de sus caracter&iacute;sticas) se describe en <a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1Db21wb3J0YW1pZW50b2FudGVsYWZhbHRhZGVwYXLDoW1ldHJvc2VubGFkZWZpbmljacOzbmRlZmlybWE">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma#Comportamiento ante la falta de par&aacute;metros en la definici&oacute;n de firma</a>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">to_be_signed</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n a partir de la cual se calcula la firma digital (PKCS #1) del documento al que se aplica la definici&oacute;n de firma. Esta propiedad es opcional y solo est&aacute; presente tras ejecutar la operaci&oacute;n <a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a> sobre el recurso.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">to_be_signed.digest</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n del <i class=" ">hash</i> a partir del cual se obtiene la firma digital (PKCS #1) del documento al que se aplica la definici&oacute;n de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">to_be_signed.digest.algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de <i class=" ">hash</i>. El valor de esta propiedad puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">to_be_signed.digest.value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> del documento al que se aplica la definici&oacute;n de firma, codificado en base64 (en dicho <i class=" ">hash</i> tambi&eacute;n se tienen en cuenta los atributos que se firman).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Firma digital (PKCS #1) del documento al que se aplica la definici&oacute;n de firma, codificada en base64. Esta propiedad es opcional y solo est&aacute; presente tras proporcionar su valor por medio de la operaci&oacute;n <a   href="#src-96240710">TX_EIDAS_4.1.4.0 - Actualizar una definici&oacute;n de firma</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">to_be_timestamped</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n del <i class=" ">hash</i> a partir del cual se obtiene el sello de tiempo de la firma que corresponde a la definici&oacute;n de firma. Esta propiedad es opcional y solo est&aacute; presente tras solicitarlo mediante la operaci&oacute;n <a   href="#src-96240712">TX_EIDAS_4.1.4.0 - Obtener el hash de una firma para solicitar un sello de tiempo</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">to_be_timestamped.type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Siempre tiene el valor <tt class=" ">&quot;message_imprint</tt>&quot;.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">to_be_timestamped.digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de <i class=" ">hash</i>. El valor de esta propiedad puede ser <tt class=" ">sha1</tt>, <tt class=" ">sha256,</tt> <tt class=" ">sha384</tt> o <tt class=" ">sha512.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">to_be_timestamped.digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de la firma que corresponde a la definici&oacute;n de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">timestamps[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Sellos de tiempo de la firma que corresponde a la definici&oacute;n de firrma codificados en base64. Actualmente solo se permite un sello de tiempo. Esta propiedad es opcional y solo est&aacute; presente tras proporcionar un sello de tiempo de la firma por medio de la operaci&oacute;n <a   href="#src-96240710">TX_EIDAS_4.1.4.0 - Actualizar una definici&oacute;n de firma</a> o a trav&eacute;s de un proceso iniciado mediante la operaci&oacute;n <a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a> en el que se haya solicitado una pol&iacute;tica de sellado de tiempo.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="section section-7" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNQREYvUEFkRVMp">
        <h7 class="heading "><span>Propiedad parameters (firmas PDF/PAdES)</span></h7>
    <p  >La propiedad <tt class=" ">parameters</tt> se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	"type" : {string},</code></div>
<div class="line"><code class="plain">	"certificate": {string},</code></div>
<div class="line"><code class="plain">	"default_digest_algorithm" : {string},	</code></div>
<div class="line"><code class="plain">	"estimated_signature_size" : {number},	</code></div>
<div class="line"><code class="plain">	"certification_level" : {number},	</code></div>
<div class="line"><code class="plain">	"contact_info" : {string},	</code></div>
<div class="line"><code class="plain">	"location" : {string},	</code></div>
<div class="line"><code class="plain">	"reason" : {string},	</code></div>
<div class="line"><code class="plain">	"signature_field" : {		</code></div>
<div class="line"><code class="plain">		"name" : {string},		</code></div>
<div class="line"><code class="plain">		"location" : {			</code></div>
<div class="line"><code class="plain">			"page" : {				</code></div>
<div class="line"><code class="plain">				"number" : {string}			</code></div>
<div class="line"><code class="plain">			},		</code></div>
<div class="line"><code class="plain">		"rectangle" : {			</code></div>
<div class="line"><code class="plain">			"x" : {number},			</code></div>
<div class="line"><code class="plain">			"y" : {number},		</code></div>
<div class="line"><code class="plain">			"height" : {number},			</code></div>
<div class="line"><code class="plain">			"width" : {number}		</code></div>
<div class="line"><code class="plain">			}	</code></div>
<div class="line"><code class="plain">		},	</code></div>
<div class="line"><code class="plain">		"appearance" : {		</code></div>
<div class="line"><code class="plain">			"background_image" : {			</code></div>
<div class="line"><code class="plain">				"file" : {string},			</code></div>
<div class="line"><code class="plain">				"binary" : {string}		</code></div>
<div class="line"><code class="plain">			},		</code></div>
<div class="line"><code class="plain">			"foreground_image" : {			</code></div>
<div class="line"><code class="plain">				"file" : {string},			</code></div>
<div class="line"><code class="plain">				"binary" : {string} 		</code></div>
<div class="line"><code class="plain">			},		</code></div>
<div class="line"><code class="plain">			"signature_details" : {SignatureDetails}</code></div>
<div class="line"><code class="plain">		}	</code></div>
<div class="line"><code class="plain">	},   	</code></div>
<div class="line"><code class="plain">	"policy_identifier" : {		</code></div>
<div class="line"><code class="plain">		"policy_id" : {			</code></div>
<div class="line"><code class="plain">			"oid" : {string}		</code></div>
<div class="line"><code class="plain">		},		</code></div>
<div class="line"><code class="plain">		"policy_hash" : {			</code></div>
<div class="line"><code class="plain">			"digest_algorithm_identifier" : {			</code></div>
<div class="line"><code class="plain">				"id" : {string}		</code></div>
<div class="line"><code class="plain">			},		</code></div>
<div class="line"><code class="plain">			"digest_value" : {string}	</code></div>
<div class="line"><code class="plain">		},	</code></div>
<div class="line"><code class="plain">		"policy_qualifiers" : [		</code></div>
<div class="line"><code class="plain">		{		</code></div>
<div class="line"><code class="plain">		"type" : {string},		</code></div>
<div class="line"><code class="plain">		"uri" : {string}		</code></div>
<div class="line"><code class="plain">		}	</code></div>
<div class="line"><code class="plain">		] </code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"commitments" : [	</code></div>
<div class="line"><code class="plain">	{		</code></div>
<div class="line"><code class="plain">		"type" : {string},		</code></div>
<div class="line"><code class="plain">		"oid" : {string}	</code></div>
<div class="line"><code class="plain">	}	</code></div>
<div class="line"><code class="plain">	]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de firma (<tt class=" ">&quot;pdf&quot;</tt>, &quot;<tt class=" ">pades-bes&quot;</tt>, &quot;<tt class=" ">pades-epes&quot;):</tt>    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;pdf&quot;</tt>: PAdES-Basic (ETSI TS 102 778-2)    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;pades-bes&quot;</tt>: PAdES-BES (ETSI TS 102 778-3)    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;pades-epes&quot;</tt>: PAdES-EPES (ETSI TS 102 778-3)    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">certificate</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Certificado del firmante codificado en base64. Esta propiedad es opcional si bien es necesaria para poder ejecutar la operaci&oacute;n <a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a> sobre el recurso.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">default_digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de <i class=" ">hash</i> con el que se obtiene la firma digital (PKCS #1) del documento. Esta propiedad es opcional y su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">estimated_signature_size</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tama&ntilde;o m&aacute;ximo de la firma expresado en bytes. TrustedX eIDAS reserva espacio suficiente en el documento para alojar una firma de este tama&ntilde;o. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">certification_level</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Indicaci&oacute;n de si la firma es de certificaci&oacute;n. Esta propiedad es opcional y su valor puede ser cualquiera de los siguientes:    </p>
<ul class=" "><li class=" ">    <p  >0: La firma no es de certificaci&oacute;n.    </p>
</li><li class=" ">    <p  >1: La firma es de certificaci&oacute;n. Una vez realizada, no se permitir&aacute;n cambios posteriores en el documento.    </p>
</li><li class=" ">    <p  >2: La firma es de certificaci&oacute;n. Una vez realizada, los &uacute;nicos cambios que se permitir&aacute;n en el documento son el rellenado de formularios y la generaci&oacute;n de firmas (en campos de firma previamente creados).    </p>
</li><li class=" ">    <p  >3: La firma es de certificaci&oacute;n. Una vez realizada, los &uacute;nicos cambios que se permitir&aacute;n en el documento son el rellenado de formularios, la generaci&oacute;n de firmas en campos de firma previamente creados y la edici&oacute;n de anotaciones.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">contact_info</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n para contactar con el firmante. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">location</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Lugar en el que se firma el documento. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">reason</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Motivo por el que se firma el documento. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n del campo de firma. Esta propiedad es opcional .    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.name</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nombre del campo de firma. Esta propiedad es opcional y su valor por defecto es <tt class=" ">&quot;SFLY Signature &lt;seq&gt;&quot;</tt> siendo <tt class=" ">seq</tt> el siguiente n&uacute;mero dentro de la secuencia de todos los campos cuyo nombre tiene este formato (al primer campo de esta secuencia le corresponde el n&uacute;mero 0).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.location</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Situaci&oacute;n del campo de firma dentro del documento. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.location.page</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de la p&aacute;gina en la que se encuentra el campo de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.location.page.number</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >N&uacute;mero de p&aacute;gina en la que se encuentra el campo de firma. El valor <tt class=" ">&quot;last&quot;</tt> denota la &uacute;ltima p&aacute;gina del documento.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.location.rectangle</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Posici&oacute;n y dimensiones del campo de firma dentro de la p&aacute;gina en la que se encuentra.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.location.rectangle.x</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Coordenada horizontal de la esquina inferior izquierda del campo de firma dentro de la p&aacute;gina en la que se encuentra.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.location.rectangle.y</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Coordenada vertical de la esquina inferior izquierda del campo de firma dentro de la p&aacute;gina en la que se encuentra.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.location.rectangle.height</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Altura del campo de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.location.rectangle.width</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Anchura del campo de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.appearance</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre la apariencia de la firma. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.appearance.background_image</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Imagen de fondo de la apariencia de la firma. Esta propiedad es opcional dentro de la propiedad <tt class=" ">appearance</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.appearance.background_image.file</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Ruta completa, en el sistema de archivos de TrustedX, de la imagen de fondo de la apariencia de la firma. Esta propiedad es opcional, pero tiene que estar presente siempre que no lo est&eacute; la propiedad <tt class=" ">appearance.background_image.binary</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.appearance.background_image.binary</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Codificaci&oacute;n en base64 de la imagen de fondo de la apariencia de la firma. Se soportan im&aacute;genes JPEG y PNG. Esta propiedad es opcional, pero tiene que estar presente siempre que no lo est&eacute; la propiedad <tt class=" ">appearance.background_image.file</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.appearance.foreground_image</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Imagen de primer plano de la apariencia de firma. Esta propiedad es opcional dentro de la propiedad <tt class=" ">appearance</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.appearance.foreground_image.file</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Ruta completa, en el sistema de archivos de TrustedX, de la imagen de primer plano de la apariencia de la firma. Esta propiedad es opcional, pero tiene que estar presente siempre que no lo est&eacute; la propiedad <tt class=" ">appearance.foreground_image.binary</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.appearance.foreground_image.binary</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Codificaci&oacute;n en base64 de la imagen de primer plano de la apariencia de la firma. Se soportan im&aacute;genes JPEG y PNG. Esta propiedad es opcional, pero tiene que estar presente siempre que no lo est&eacute; la propiedad <tt class=" ">appearance.foreground_image.file</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_field.appearance.signature_details</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre los detalles de la firma que se muestran como texto en su apariencia. Esta propiedad es opcional y su valor se representa en JSON del modo que se explica en en <a   href="#src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycy5zaWduYXR1cmVfZmllbGQuYXBwZWFyYW5jZS5zaWduYXR1cmVfZGV0YWlscw">Propiedad parameters.signature_field.appearance.signature_details</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre la pol&iacute;tica de firma. Esta propiedad es obligatoria si el tipo de firma indicado (propiedad <tt class=" ">type)</tt> es &quot;<tt class=" ">pades-epes&quot;</tt> y debe estar ausente en caso contrario.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.oid</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >OID que identifica la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre el <i class=" ">hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_algorithm_identifier.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo para calcular el <i class=" ">hash</i> de la pol&iacute;tica de firma. Esta propiedad puede tomar los valores &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;,</tt> &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Calificadores de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de uno de los calificadores de la pol&iacute;tica de firma. Esta propiedad tiene siempre el valor &quot;<tt class=" ">spuri&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">commitments[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Compromisos del firmante. Esta propiedad es opcional si el tipo de firma indicado (propiedad <tt class=" ">type)</tt> es &quot;<tt class=" ">pades-epes&quot;</tt> y debe estar ausente en caso contrario.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">commitments[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de uno de los compromisos del firmante.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;proof_of_origin&quot;</tt>: el firmante reconoce haber creado y enviado el documento.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;proof_of_receipt&quot;: </tt>el firmante reconoce haber recibido el documento.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;proof_of_delivery&quot;: </tt>el firmante reconoce haber entregado el documento a su destinatario.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;proof_of_sender&quot;: </tt>el firmante reconoce haber enviado el documento.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;proof_of_approval&quot;: </tt>el firmante reconoce que aprueba el documento.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;proof_of_creation&quot;: </tt>el firmante reconoce haber creado el documento.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;custom&quot;</tt>: el firmante reconoce lo indicado en la propiedad <tt class=" ">commitments[].oid</tt>    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">commitments[].oid</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >OID que identifica un compromiso del firmante. Esta propiedad es opcional y solo la tienen los compromisos de tipo &quot;<tt class=" ">custom&quot;.</tt>    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="section section-8" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycy5zaWduYXR1cmVfZmllbGQuYXBwZWFyYW5jZS5zaWduYXR1cmVfZGV0YWlscw">
        <h8 class="heading "><span>Propiedad parameters.signature_field.appearance.signature_details</span></h8>
    <p  >La propied <tt class=" ">parameters.signature_field.dappearance.signature_details</tt> se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	"font" : {</code></div>
<div class="line"><code class="plain">		"name" : {string},</code></div>
<div class="line"><code class="plain">		"size" : {number},</code></div>
<div class="line"><code class="plain">		"style" : {string},</code></div>
<div class="line"><code class="plain">		"color" : {</code></div>
<div class="line"><code class="plain">			"r" : {number},</code></div>
<div class="line"><code class="plain">			"g" : {number},</code></div>
<div class="line"><code class="plain">			"b" : {number}</code></div>
<div class="line"><code class="plain">		},</code></div>
<div class="line"><code class="plain">		"encoding" : {string},</code></div>
<div class="line"><code class="plain">		"embed" : boolean</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"details" : [ </code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		"type" : {string},</code></div>
<div class="line"><code class="plain">		"title" : {string},</code></div>
<div class="line"><code class="plain">		"timezone" : {string},</code></div>
<div class="line"><code class="plain">		"format" : {string},</code></div>
<div class="line"><code class="plain">		"value" : {string}</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">	]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de la fuente con la que se escriben los detalles de la firma que se muestran como texto en su apariencia. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font.name</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nombre de la fuente con la que se escriben los detalles de la firma que se muestran como texto en su apariencia. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font.size</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tama&ntilde;o de letra con la que se escriben los detalles de la firma que se muestran como texto en su apariencia. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font.style</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Estilo de letra (&quot;<tt class=" ">normal&quot;</tt>, &quot;<tt class=" ">bold&quot;</tt>, &quot;<tt class=" ">italic&quot;</tt>) con el que se escriben los detalles de la firma que se muestran como texto en su apariencia. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font.color</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Color con el que se escriben los detalles de la firma que se muestran como texto en su apariencia. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font.color.r</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nivel de rojo con el que se escriben los detalles de la firma que se muestran como texto en su apariencia (0-255).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font.color.g</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nivel de verde con el que se escriben los detalles de la firma que se muestran como texto en su apariencia (0-255).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font.color.b</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nivel de azul con el que se escriben los detalles de la firma que se muestran como texto en su apariencia (0-255).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font.embed</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Valor booleno (<tt class=" ">true</tt>, <tt class=" ">false</tt>) que indica si la fuente con la que se escriben los detalles de la firma se incluye en el documento firmado. Esta propiedad es opcional    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">font.encoding</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Codificaci&oacute;n (&quot;<tt class=" ">latin1&quot;</tt>, &quot;<tt class=" ">unicode&quot;</tt>) de los detalles de la firma que se muestran como texto en su apariencia. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Detalles de la firma que se muestran como texto en su apariencia. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de un detalle de la firma que se muestra como texto en su apariencia:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;subject&quot;</tt>: <i class=" ">Subject</i> (titular) del certificado del firmante.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;name&quot;</tt>: CN del <i class=" ">Subject</i> (titular) del certificado del firmante.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;issuer&quot;</tt>: <i class=" ">Issuer </i>(emisor) del certificado del firmante.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;serial&quot;</tt>: <i class=" ">Serial Number</i> (n&uacute;mero de serie) del certificado del firmante.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;contact_info&quot;</tt>: Informaci&oacute;n para contactar con el firmante (v&eacute;ase la propiedad <tt class=" ">contact_info</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;location&quot;</tt>: lugar en el que se firma el documento (v&eacute;ase la propiedad <tt class=" ">location</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;reason&quot;</tt>: motivo por el que se firma el documento (v&eacute;ase la propiedad <tt class=" ">reason</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;date&quot;</tt>: fecha en la que se firma el documento.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;text&quot;</tt>: texto arbitrario.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details[].title</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >T&iacute;tulo que precede a un detalle de la firma que se muestra como texto en su apariencia. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details[].timezone</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Zona horaria (<tt class=" ">&quot;</tt><tt class=" ">GMT&quot;</tt>, <tt class=" ">&quot;Europe/Madrid&quot;</tt>, <tt class=" ">&quot;America/Caracas&quot;</tt>, etc) que se muestra como detalle de la firma en su apariencia. Esta propiedad es opcional y solo puede puede tenerla un detalle de tipo &quot;<tt class=" ">date&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details[].format</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Formato de la fecha que se muestra como detalle de la firma en su apariencia. Esta propiedad es opcional y solo puede tenerla un detalle de tipo &quot;<tt class=" ">date&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details[].value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Texto arbitrario que se muestra como detalle de la firma en su apariencia. Esta propiedad es opcional y solo puede tenerla un detalle de tipo &quot;<tt class=" ">text&quot;</tt>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-7" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTZW52ZWxvcGVkKQ">
        <h7 class="heading "><span>Propiedad parameters (firmas XMLDSig/XAdES enveloped)</span></h7>
    <p  >La propiedad <tt class=" ">parameters</tt> se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{	</code></div>
<div class="line"><code class="plain">	"type" : {string},	</code></div>
<div class="line"><code class="plain">	"certificate": {string},	</code></div>
<div class="line"><code class="plain">	"default_digest_algorithm" : {string},	</code></div>
<div class="line"><code class="plain">	"signature_target" : {		</code></div>
<div class="line"><code class="plain">		"type" : "document",		</code></div>
<div class="line"><code class="plain">		"signature_packaging" : "enveloped",		</code></div>
<div class="line"><code class="plain">		"nodes_to_sign" : [		</code></div>
<div class="line"><code class="plain">			{			</code></div>
<div class="line"><code class="plain">				"type" : "document_reference",			</code></div>
<div class="line"><code class="plain">				"xpath" : "/",			</code></div>
<div class="line"><code class="plain">				"uri_type": {string}		</code></div>
<div class="line"><code class="plain">			}		</code></div>
<div class="line"><code class="plain">		],		</code></div>
<div class="line"><code class="plain">		"signature_placement" : {			</code></div>
<div class="line"><code class="plain">			"type" : {string},			</code></div>
<div class="line"><code class="plain">			"xpath" : {string}	</code></div>
<div class="line"><code class="plain">		}      	</code></div>
<div class="line"><code class="plain">	},	</code></div>
<div class="line"><code class="plain">	"include_data_object_format" : {boolean},	</code></div>
<div class="line"><code class="plain">	"default_c14n_method" : {string},	</code></div>
<div class="line"><code class="plain">	"policy_identifier" : {	</code></div>
<div class="line"><code class="plain">		"policy_id" : {		</code></div>
<div class="line"><code class="plain">			"identifier" : {			</code></div>
<div class="line"><code class="plain">				"uri" : {string},			</code></div>
<div class="line"><code class="plain">				"qualifier" : {string}		</code></div>
<div class="line"><code class="plain">			},		</code></div>
<div class="line"><code class="plain">			"description" : {string},		</code></div>
<div class="line"><code class="plain">			"documentation_references" : [		</code></div>
<div class="line"><code class="plain">			{			</code></div>
<div class="line"><code class="plain">				"uri" : {string}		</code></div>
<div class="line"><code class="plain">			}		</code></div>
<div class="line"><code class="plain">			]	</code></div>
<div class="line"><code class="plain">		},	</code></div>
<div class="line"><code class="plain">		"policy_hash" : {		</code></div>
<div class="line"><code class="plain">			"digest_algorithm_identifier" : {			</code></div>
<div class="line"><code class="plain">				"id" : {string}		</code></div>
<div class="line"><code class="plain">			},		</code></div>
<div class="line"><code class="plain">			"digest_value" : {string}	</code></div>
<div class="line"><code class="plain">		},	</code></div>
<div class="line"><code class="plain">		"policy_qualifiers" : [		</code></div>
<div class="line"><code class="plain">		{		</code></div>
<div class="line"><code class="plain">			"type" : "spuri",		</code></div>
<div class="line"><code class="plain">			"uri" : {string}		</code></div>
<div class="line"><code class="plain">		}	</code></div>
<div class="line"><code class="plain">		]	</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de firma XML (<tt class=" ">&quot;xmldsig&quot;</tt>, &quot;x<tt class=" ">ades-bes&quot;</tt>, &quot;<tt class=" ">xades-epes&quot;):</tt>    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;xmldsig&quot;</tt>: firma XMLDSig    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;xades-bes&quot;</tt>: firma XAdES-BES (<i class=" ">Basic Electronic Signature</i>) seg&uacute;n ETSI TS 101 903    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;xades-epes&quot;</tt>: firma XAdES-EPES (<i class=" ">Explicit Policy Electronic Signature</i>) seg&uacute;n ETSI TS 101 903    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">certificate</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Certificado del firmante codificado en base64. Esta propiedad es opcional si bien es necesaria para poder ejecutar la operaci&oacute;n <a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a> cuando el valor de la propiedad <tt class=" ">type</tt> es <tt class=" ">&quot;xades-bes&quot;</tt> o <tt class=" ">&quot;xades-epes&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">default_digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de <i class=" ">hash</i> que debe utilizarse por defecto para obtener todos los <i class=" ">hashes</i> que deban computarse en la firma. Esta propiedad es opcional y su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>, siendo <tt class=" ">&quot;sha256&quot;</tt> el valor por defecto.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre los datos que se firman y la posici&oacute;n relativa de la firma con respecto a estos datos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Indica si la firma es una contrafirma (<i class=" ">countersignature</i>) o no. Esta propiedad es opcional y solo puede tener el valor &quot;<tt class=" ">document&quot;</tt> (que es el valor que toma por defecto).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_packaging</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Posici&oacute;n relativa de la firma respecto a los datos que se firman. Siempre tiene el valor <tt class=" ">&quot;enveloped&quot;</tt> <tt class=" ">(</tt>la firma est&aacute; contenida dentro del documento XML firmado).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional y contiene informaci&oacute;n del documento XML al que se aplica la definici&oacute;n de firma (el <i class=" ">arrray</i> solo tiene un elemento).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de referencia con la que se remite a a los datos que se firman. Esta propiedad solo puede tener el valor <tt class=" ">&quot;document_reference&quot;</tt> <tt class=" ">(</tt>los datos son un nodo del documento XML al que se aplica la definici&oacute;n de firma; concretamente el nodo cuya ruta indica la propiedad <tt class=" ">signature_target.nodes_to_sign[].xpath</tt>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].xpath</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Expresi&oacute;n XPath 2.0 que describe la ruta del elemento que se firma y que pertenece documento al que se aplica la definici&oacute;n de firma. Actualmente, la ruta XPath solo puede corresponder al nodo ra&iacute;z del documento XML al que se aplica la definici&oacute;n de firma. Es decir, la ruta XPath solo puede ser <tt class=" ">&quot;/&quot;.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].uri_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de URI que se emplea en la firma para referenciar a los datos que se firman. Este propiedad es opcional y puede tomar los siguientes valores:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;id&quot;</tt>, que es el valor por defecto y sirve para indicar que la firma deber&aacute; referenciar a los datos firmados con <tt class=" ">&quot;&quot;</tt>.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;xpointer_xpath&quot;</tt> que sirve para indicar que la firma deber&aacute; referenciar a los datos firmados con <tt class=" ">&quot;#xpointer(/)&quot;</tt>.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_placement</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre la posici&oacute;n de la firma (del elemento <tt class=" ">&lt;ds:Signature&gt;</tt>) dentro del documento al que se aplica la definici&oacute;n de firma. Esta propiedad es opcional, tom&aacute;ndose &quot;<tt class=" ">last_child_of&quot;</tt> del nodo ra&iacute;z <tt class=" ">&quot;/&quot;</tt> como posici&oacute;n por defecto)<tt class=" ">.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_placement.xpath</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Expresi&oacute;n XPath 2.0 que describe (conjuntamente con el par&aacute;metro <tt class=" ">signature_target.signature_placement.type</tt>) la ruta de la firma dentro del documento al que se aplica la definici&oacute;n de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_placement.type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Relaci&oacute;n del nodo que contiene la firma (elemento <tt class=" ">&lt;ds:Signature&gt;</tt>) respecto a la ruta que indica <tt class=" ">signature_target.signature_placement.xpath:</tt>    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;last_child_of&quot;</tt>: la firma es el &uacute;ltimo nodo hijo del nodo cuya ruta se indica en <tt class=" ">signature_target.signature_placement.xpath.</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;first_child_of&quot;</tt>: la firma es el primer nodo hijo del nodo cuya ruta se indica en <tt class=" ">signature_target.signature_placement.xpath.</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;after&quot;</tt>: la firma es el nodo hermano posterior al nodo cuya ruta se indica en <tt class=" ">signature_target.signature_placement.xpath.</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;before&quot;</tt>: la firma es el nodo hermano anterior al nodo cuya ruta se indica en <tt class=" ">signature_target.signature_placement.xpath.</tt>    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">include_data_object_format</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional e indica (<tt class=" ">true</tt>, <tt class=" ">false</tt>) si en la firma debe indicarse el tipo de los datos firmados (elemento <tt class=" ">&lt;xades:DataObjectFormat&gt;</tt>). El valor por defecto es <tt class=" ">false</tt> y el formato que se indica cuando el valor es <tt class=" ">true</tt> es <tt class=" ">text/xml.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">default_c14n_method</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de canonicalizaci&oacute;n que se utiliza:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">c14n</tt>: algoritmo inclusivo (<tt class=" ">http://www.w3.org/TR/2001/REC-xml-c14n-20010315</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">c14nWithComments</tt>: algoritmo inclusivo con comentarios (<tt class=" ">http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">excC14n</tt>: algoritmo exclusivo (<tt class=" ">http://www.w3.org/2001/10/xml-exc-c14n#</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">excC14nWithComments</tt>: algoritmo exclusivo con comentarios (<tt class=" ">http://www.w3.org/2001/10/xml-exc-c14n#WithComments</tt>).    </p>
</li></ul>    <p  >Esta propiedad es opcional y <tt class=" ">excC14n</tt> es su valor por defecto.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre la pol&iacute;tica de firma. Esta propiedad solo est&aacute; presente (siendo adem&aacute;s obligatoria) si el tipo de firma que indica la propiedad <tt class=" ">type</tt> es &quot;<tt class=" ">xades-epes&quot;.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.identifier.uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.identifier.qualifier</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de URI de la pol&iacute;tica de firma cuando dicho URI se construye partir de un OID. Sus valores posibles son:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">OIDAsURI</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">OIDAsURN</tt>    </p>
</li></ul>    <p  >Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.description</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n de la pol&iacute;tica. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.documentation_references[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Documentos con informaci&oacute;n adicional sobre la pol&iacute;tica. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.documentation_references[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de un documento con informaci&oacute;n adicional sobre la pol&iacute;tica.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre el <i class=" ">hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_algorithm_identifier.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo para calcular el <i class=" ">hash</i> de la pol&iacute;tica de firma. Su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Calificadores de la pol&iacute;tica de firma. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de uno de los calificadores de la pol&iacute;tica de firma. Esta propiedad tiene siempre el valor <tt class=" ">&quot;spuri&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de uno de los calificadores de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTaW50ZXJuYWxseWRldGFjaGVkKQ">
        <h7 class="heading "><span>Propiedad parameters (firmas XMLDSig/XAdES internally detached)</span></h7>
    <p  >La propiedad <tt class=" ">parameters</tt> se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	"type" : {string},</code></div>
<div class="line"><code class="plain">	"certificate": {string},</code></div>
<div class="line"><code class="plain">	"default_digest_algorithm" : {string},</code></div>
<div class="line"><code class="plain">	"signature_target" : {</code></div>
<div class="line"><code class="plain">		"type" : "document",</code></div>
<div class="line"><code class="plain">		"signature_packaging" : "detached",</code></div>
<div class="line"><code class="plain">		"nodes_to_sign" : [</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			"type" : "document_reference",</code></div>
<div class="line"><code class="plain">			"xpath" : {string}</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	],</code></div>
<div class="line"><code class="plain">	"signature_placement" : {</code></div>
<div class="line"><code class="plain">		"type" : "{string}",</code></div>
<div class="line"><code class="plain">		"xpath" : {string}</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"include_data_object_format" : {boolean},</code></div>
<div class="line"><code class="plain">	"default_c14n_method" : {string},</code></div>
<div class="line"><code class="plain">	"policy_identifier" : {</code></div>
<div class="line"><code class="plain">		"policy_id" : {</code></div>
<div class="line"><code class="plain">		"identifier" : {</code></div>
<div class="line"><code class="plain">			"uri" : {string},</code></div>
<div class="line"><code class="plain">			"qualifier" : {string}</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">		"description" : {string},</code></div>
<div class="line"><code class="plain">		"documentation_references" : [</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			"uri" : {string}</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">		]</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"policy_hash" : {</code></div>
<div class="line"><code class="plain">		"digest_algorithm_identifier" : {</code></div>
<div class="line"><code class="plain">			"id" : {string}</code></div>
<div class="line"><code class="plain">		},</code></div>
<div class="line"><code class="plain">		"digest_value" : {string}</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"policy_qualifiers" : [</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">		"type" : "spuri",</code></div>
<div class="line"><code class="plain">		"uri" : {string}</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	]</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped relative-table confluenceTable">
                    <colgroup>
                                    <col  width="45%"/>
                                    <col  width="54%"/>
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de firma XML (<tt class=" ">&quot;xmldsig&quot;</tt>, &quot;x<tt class=" ">ades-bes&quot;</tt>, &quot;<tt class=" ">xades-epes&quot;):</tt>    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;xmldsig&quot;</tt>: firma XMLDSig    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;xades-bes&quot;</tt>: firma XAdES-BES (<i class=" ">Basic Electronic Signature</i>) seg&uacute;n ETSI TS 101 903    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;xades-epes&quot;</tt>: firma XAdES-EPES (<i class=" ">Explicit Policy Electronic Signature</i>) seg&uacute;n ETSI TS 101 903    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">certificate</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Certificado del firmante codificado en base64. Esta propiedad es opcional si bien es necesaria para poder ejecutar la operaci&oacute;n <a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a> cuando el valor de la propiedad <tt class=" ">type</tt> es <tt class=" ">&quot;xades-bes&quot;</tt> o <tt class=" ">&quot;xades-epes&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">default_digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de <i class=" ">hash</i> que debe utilizarse por defecto para obtener todos los <i class=" ">hashes</i> que deban computarse en la firma. Esta propiedad es opcional y su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>, siendo <tt class=" ">&quot;sha256&quot;</tt> el valor por defecto.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre los datos que se firman y la posici&oacute;n relativa de la firma con respecto a estos datos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Indica si la firma es una contrafirma (<i class=" ">countersignature</i>) o no. Esta propiedad es opcional y solo puede tener el valor &quot;<tt class=" ">document&quot; </tt>(que es el valor que toma por defecto).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_packaging</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Posici&oacute;n relativa de la firma respecto a los datos que se firman. Siempre tiene el valor <tt class=" ">&quot;detached&quot;</tt> <tt class=" ">(</tt>la firma est&aacute; separada de los datos que se firman).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad contiene informaci&oacute;n sobre los elementos que se firman del documento al que aplica la definici&oacute;n de firma. El <i class=" ">array</i> puede tener informaci&oacute;n de m&aacute;s de un elemento de datos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de referencia con la que se remite a uno de los elementos que se firman. Esta propiedad solo puede tener el valor <tt class=" ">&quot;document_reference&quot;</tt> <tt class=" ">(</tt>el elemento es un nodo del documento XML al que se aplica la definici&oacute;n de firma; concretamente el nodo cuya ruta indica la propiedad <tt class=" ">signature_target.nodes_to_sign[].xpath</tt> ).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].xpath</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Expresi&oacute;n XPath 2.0 que describe la ruta de uno de los elementos que se firman y que pertenece documento al que se aplica la definici&oacute;n de firma. Actualmente, la ruta XPath solo puede corresponder a un nodo del documento que tenga el atributo <tt class=" ">Id.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_placement</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre la posici&oacute;n de la firma (del elemento <tt class=" ">&lt;ds:Signature&gt;</tt>) dentro del documento al que se aplica la definici&oacute;n de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_placement.xpath</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Expresi&oacute;n XPath 2.0 que describe (conjuntamente con el par&aacute;metro <tt class=" ">signature_target.signature_placement.type</tt>) la ruta de la firma dentro del documento al que se aplica la definici&oacute;n de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_placement.type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Relaci&oacute;n del nodo que contiene la firma (elemento <tt class=" ">&lt;ds:Signature&gt;</tt>) respecto a la ruta que indica <tt class=" ">signature_target.signature_placement.xpath:</tt>    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;last_child_of&quot;</tt>: la firma es el &uacute;ltimo nodo hijo del nodo cuya ruta se indica en <tt class=" ">signature_target.signature_placement.xpath.</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;first_child_of&quot;</tt>: la firma es el primer nodo hijo del nodo cuya ruta se indica en <tt class=" ">signature_target.signature_placement.xpath.</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;after&quot;</tt>: la firma es el nodo hermano posterior al nodo cuya ruta se indica en <tt class=" ">signature_target.signature_placement.xpath.</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;before&quot;</tt>: la firma es el nodo hermano anterior al nodo cuya ruta se indica en <tt class=" ">signature_target.signature_placement.xpath.</tt>    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">include_data_object_format</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional e indica (<tt class=" ">true</tt>, <tt class=" ">false</tt>) si en la firma debe indicarse el tipo de los datos firmados (elemento <tt class=" ">&lt;xades:DataObjectFormat&gt;</tt>). El valor por defecto es <tt class=" ">false</tt> y el formato que se indica cuando el valor es <tt class=" ">true</tt> es <tt class=" ">text/xml.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">default_c14n_method</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de canonicalizaci&oacute;n que se utiliza:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">c14n</tt>: algoritmo inclusivo (<tt class=" ">http://www.w3.org/TR/2001/REC-xml-c14n-20010315</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">c14nWithComments</tt>: algoritmo inclusivo con comentarios (<tt class=" ">http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">excC14n</tt>: algoritmo exclusivo (<tt class=" ">http://www.w3.org/2001/10/xml-exc-c14n#</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">excC14nWithComments</tt>: algoritmo exclusivo con comentarios (<tt class=" ">http://www.w3.org/2001/10/xml-exc-c14n#WithComments</tt>).    </p>
</li></ul>    <p  >Esta propiedad es opcional y <tt class=" ">excC14n</tt> es su valor por defecto.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre la pol&iacute;tica de firma. Esta propiedad solo est&aacute; presente (siendo adem&aacute;s obligatoria) si el tipo de firma que indica la propiedad <tt class=" ">type</tt> es &quot;<tt class=" ">xades-epes&quot;.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.identifier.uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.identifier.qualifier</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de URI de la pol&iacute;tica de firma cuando dicho URI se construye partir de un OID. Sus valores posibles son:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">OIDAsURI</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">OIDAsURN</tt>    </p>
</li></ul>    <p  >Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.description</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n de la pol&iacute;tica. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.documentation_references[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Documentos con informaci&oacute;n adicional sobre la pol&iacute;tica. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.documentation_references[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de un documento con informaci&oacute;n adicional sobre la pol&iacute;tica.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre el <i class=" ">hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_algorithm_identifier.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo para calcular el <i class=" ">hash</i> de la pol&iacute;tica de firma. Su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Calificadores de la pol&iacute;tica de firma. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de uno de los calificadores de la pol&iacute;tica de firma. Esta propiedad tiene siempre el valor <tt class=" ">&quot;spuri&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de uno de los calificadores de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTZXh0ZXJuYWxseWRldGFjaGVkKQ">
        <h7 class="heading "><span>Propiedad parameters (firmas XMLDSig/XAdES externally detached)</span></h7>
    <p  >La propiedad <tt class=" ">parameters</tt> se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	"type" : {string},</code></div>
<div class="line"><code class="plain">	"certificate": {string},</code></div>
<div class="line"><code class="plain">	"default_digest_algorithm" : {string},</code></div>
<div class="line"><code class="plain">	"signature_target" : {</code></div>
<div class="line"><code class="plain">		"type" : "document",</code></div>
<div class="line"><code class="plain">		"signature_packaging" : "detached",</code></div>
<div class="line"><code class="plain">		"nodes_to_sign" : [</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">		"type" : "raw_reference",</code></div>
<div class="line"><code class="plain">		"uri" : {string}</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">		]    </code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"include_data_object_format" : {boolean},</code></div>
<div class="line"><code class="plain">	"policy_identifier" : {</code></div>
<div class="line"><code class="plain">	"policy_id" : {</code></div>
<div class="line"><code class="plain">		"identifier" : {</code></div>
<div class="line"><code class="plain">			"uri" : {string},</code></div>
<div class="line"><code class="plain">			"qualifier" : {string}</code></div>
<div class="line"><code class="plain">		},</code></div>
<div class="line"><code class="plain">		"description" : {string},</code></div>
<div class="line"><code class="plain">		"documentation_references" : [</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			"uri" : {string}</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">		]</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"policy_hash" : {</code></div>
<div class="line"><code class="plain">		"digest_algorithm_identifier" : {</code></div>
<div class="line"><code class="plain">		"id" : {string}</code></div>
<div class="line"><code class="plain">		},</code></div>
<div class="line"><code class="plain">		"digest_value" : {string}</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"policy_qualifiers" : [</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">		"type" : "spuri",</code></div>
<div class="line"><code class="plain">		"uri" : {string}</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	]</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de firma XML (<tt class=" ">&quot;xmldsig&quot;</tt>, &quot;x<tt class=" ">ades-bes&quot;</tt>, &quot;<tt class=" ">xades-epes&quot;):</tt>    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;xmldsig&quot;</tt>: firma XMLDSig    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;xades-bes&quot;</tt>: firma XAdES-BES (<i class=" ">Basic Electronic Signature</i>) seg&uacute;n ETSI TS 101 903    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;xades-epes&quot;</tt>: firma XAdES-EPES (<i class=" ">Explicit Policy Electronic Signature</i>) seg&uacute;n ETSI TS 101 903    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">certificate</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Certificado del firmante codificado en base64. Esta propiedad es opcional si bien es necesaria para poder ejecutar la operaci&oacute;n <a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a> cuando el valor de la propiedad <tt class=" ">type</tt> es <tt class=" ">&quot;xades-bes&quot;</tt> o <tt class=" ">&quot;xades-epes&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">default_digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de <i class=" ">hash</i> que debe utilizarse por defecto para obtener todos los <i class=" ">hashes</i> que deban computarse en la firma. Esta propiedad es opcional y su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>, siendo <tt class=" ">&quot;sha256&quot;</tt> el valor por defecto.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre los datos que se firman y la posici&oacute;n relativa de la firma con respecto a estos datos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Indica si la firma es una contrafirma (<i class=" ">countersignature</i>) o no. Esta propiedad es opcional y solo puede tener el valor &quot;<tt class=" ">document&quot; </tt>(que es el valor que toma por defecto).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_packaging</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Posici&oacute;n relativa de la firma respecto a los datos que se firman. Siempre tiene el valor <tt class=" ">&quot;detached&quot;</tt> <tt class=" ">(</tt>la firma est&aacute; separada de los datos que se firman).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional y contiene informaci&oacute;n del documento (de cualquier tipo) al que se aplica la definici&oacute;n de firma (el <i class=" ">arrray</i> solo tiene un elemento).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de referencia a los datos que se firman. Esta propiedad solo puede tener el valor <tt class=" ">&quot;raw_reference&quot;</tt> <tt class=" ">(</tt>los datos est&aacute;n dentro del documento, de cualquier tipo, al que se aplica la definici&oacute;n de firma).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de los datos que se firman que deber&aacute; constar en la firma. Este par&aacute;metro es opcional y su valor por defecto es <tt class=" ">&quot;file:///&lt;docname&gt;&quot;</tt>, siendo <tt class=" ">&lt;docname&gt;</tt> el nombre del documento al que se aplica la definici&oacute;n de firma. Este nombre es el que tiene la parte <tt class=" ">document</tt> del mensaje <i class=" ">multipart</i> mediante el que se <a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a> o el recurso <a   href="#src-96240703">TX_EIDAS_4.1.4.0 - Crear un recurso Documento y definiciones de firmas</a>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">include_data_object_format</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional e indica (<tt class=" ">true</tt>, <tt class=" ">false</tt>) si en la firma debe indicarse el tipo de los datos firmados (<tt class=" ">DataObjectFormat</tt>). El valor por defecto es <tt class=" ">false</tt> y el formato que se indica cuando el valor es <tt class=" ">true</tt> es el tipo MIME proporcionado al crear el documento al que se aplica la definici&oacute;n de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre la pol&iacute;tica de firma. Esta propiedad solo est&aacute; presente (siendo adem&aacute;s obligatoria) si el tipo de firma que indica la propiedad <tt class=" ">type</tt> es &quot;<tt class=" ">xades-epes&quot;.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.identifier.uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.identifier.qualifier</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de URI de la pol&iacute;tica de firma cuando dicho URI se construye partir de un OID. Sus valores posibles son:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">OIDAsURI</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">OIDAsURN</tt>    </p>
</li></ul>    <p  >Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.description</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n de la pol&iacute;tica. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.documentation_references[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Documentos con informaci&oacute;n adicional sobre la pol&iacute;tica. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.documentation_references[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de un documento con informaci&oacute;n adicional sobre la pol&iacute;tica.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre el <i class=" ">hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_algorithm_identifier.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo para calcular el <i class=" ">hash</i> de la pol&iacute;tica de firma. Su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Calificadores de la pol&iacute;tica de firma. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de uno de los calificadores de la pol&iacute;tica de firma. Esta propiedad tiene siempre el valor <tt class=" ">&quot;spuri&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de uno de los calificadores de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtUHJvcGllZGFkcGFyYW1ldGVycyhmaXJtYXNYTUxEU2lnL1hBZEVTZXh0ZXJuYWxseWRldGFjaGVkYXBhcnRpcmRlaGFzaGVzKQ">
        <h7 class="heading "><span>Propiedad parameters (firmas XMLDSig/XAdES externally detached a partir de hashes)</span></h7>
    <p  >La propiedad <tt class=" ">parameters</tt> se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{	</code></div>
<div class="line"><code class="plain">	"type" : {string},	</code></div>
<div class="line"><code class="plain">	"certificate": {string},	</code></div>
<div class="line"><code class="plain">	"default_digest_algorithm" : {string},	</code></div>
<div class="line"><code class="plain">	"signature_target" : {		</code></div>
<div class="line"><code class="plain">		"type" : "document",		</code></div>
<div class="line"><code class="plain">		"signature_packaging" : "detached",		</code></div>
<div class="line"><code class="plain">		"nodes_to_sign" : [		</code></div>
<div class="line"><code class="plain">			{			</code></div>
<div class="line"><code class="plain">				"type" : "external_reference",			</code></div>
<div class="line"><code class="plain">				"uri" : {string},			</code></div>
<div class="line"><code class="plain">				"reference_type" : {string},			</code></div>
<div class="line"><code class="plain">				"digest_algorithm" : {string},			</code></div>
<div class="line"><code class="plain">				"digest_value" : {string},			</code></div>
<div class="line"><code class="plain">				"transforms" : [			</code></div>
<div class="line"><code class="plain">					{				</code></div>
<div class="line"><code class="plain">						"type" : "c14n",				</code></div>
<div class="line"><code class="plain">						"method" : {string}			</code></div>
<div class="line"><code class="plain">					} 			</code></div>
<div class="line"><code class="plain">				]		</code></div>
<div class="line"><code class="plain">			}		</code></div>
<div class="line"><code class="plain">	   	 ]	</code></div>
<div class="line"><code class="plain">	},	</code></div>
<div class="line"><code class="plain">	"policy_identifier" : {	</code></div>
<div class="line"><code class="plain">		"policy_id" : {		</code></div>
<div class="line"><code class="plain">			"identifier" : {			</code></div>
<div class="line"><code class="plain">				"uri" : {string},			</code></div>
<div class="line"><code class="plain">				"qualifier" : {string}		</code></div>
<div class="line"><code class="plain">			},		</code></div>
<div class="line"><code class="plain">			"description" : {string},		</code></div>
<div class="line"><code class="plain">			"documentation_references" : [		</code></div>
<div class="line"><code class="plain">				{			</code></div>
<div class="line"><code class="plain">				"uri" : {string}		</code></div>
<div class="line"><code class="plain">				}		</code></div>
<div class="line"><code class="plain">			]	</code></div>
<div class="line"><code class="plain">		},	</code></div>
<div class="line"><code class="plain">		"policy_hash" : {		</code></div>
<div class="line"><code class="plain">			"digest_algorithm_identifier" : {			</code></div>
<div class="line"><code class="plain">				"id" : {string}		</code></div>
<div class="line"><code class="plain">			},		</code></div>
<div class="line"><code class="plain">			"digest_value" : {string}	</code></div>
<div class="line"><code class="plain">		},        </code></div>
<div class="line"><code class="plain">		"policy_qualifiers" : [		</code></div>
<div class="line"><code class="plain">			{		</code></div>
<div class="line"><code class="plain">				"type" : "spuri",		</code></div>
<div class="line"><code class="plain">				"uri" : {string}		</code></div>
<div class="line"><code class="plain">			}	</code></div>
<div class="line"><code class="plain">		]	</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de firma XML (<tt class=" ">&quot;xmldsig&quot;</tt>, &quot;x<tt class=" ">ades-bes&quot;</tt>, &quot;<tt class=" ">xades-epes&quot;):</tt>    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;xmldsig&quot;</tt>: firma XMLDSig    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;xades-bes&quot;</tt>: firma XAdES-BES (<i class=" ">Basic Electronic Signature</i>) seg&uacute;n ETSI TS 101 903    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;xades-epes&quot;</tt>: firma XAdES-EPES (<i class=" ">Explicit Policy Electronic Signature</i>) seg&uacute;n ETSI TS 101 903    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">certificate</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Certificado del firmante codificado en base64. Esta propiedad es opcional si bien es necesaria para poder ejecutar la operaci&oacute;n <a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a> cuando el valor de la propiedad <tt class=" ">type</tt> es <tt class=" ">&quot;xades-bes&quot;</tt> o <tt class=" ">&quot;xades-epes&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">default_digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de <i class=" ">hash</i> que debe utilizarse por defecto para obtener todos los <i class=" ">hashes</i> que deban computarse en la firma. Esta propiedad es opcional y su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>, siendo <tt class=" ">&quot;sha256&quot;</tt> el valor por defecto.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre los datos que se firman y la posici&oacute;n relativa de la firma con respecto a estos datos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Indica si la firma es una contrafirma (<i class=" ">countersignature</i>) o no. Esta propiedad es opcional y solo puede tener el valor &quot;<tt class=" ">document&quot; </tt>(que es el valor que toma por defecto).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.signature_packaging</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Posici&oacute;n relativa de la firma respecto a los datos que se firman. Siempre tiene el valor <tt class=" ">&quot;detached&quot;</tt> <tt class=" ">(</tt>la firma est&aacute; separada de los datos que se firman).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad contiene informaci&oacute;n sobre los datos externos (de cualquier tipo) que se firman. El <i class=" ">array</i> puede tener informaci&oacute;n de m&aacute;s de un elemento de datos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de referencia a uno de los datos que se firman. Esta propiedad solo puede tener el valor <tt class=" ">&quot;external_reference&quot;</tt> <tt class=" ">(</tt>los datos son externos, no se encuentran en la plataforma). Este valor equivale a decir que &quot;no hay referencia&quot;, o que la referencia es el <i class=" ">hash </i>de los datos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de uno de los datos que se firman que deber&aacute; constar en la firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo con el que se ha obtenido el <i class=" ">hash</i> de uno de los datos que se firman. Su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de uno de los datos que se firman.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].reference_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional y contiene informaci&oacute;n del tipo de los datos firmados, tal como lo define el est&aacute;ndar <a  class="external-link" href="https://www.w3.org/TR/xmldsig-core/#sec-Reference">XML-DSig</a> (corresponde al atributo <tt class=" ">Type</tt> del elemento <tt class=" ">&lt;Reference&gt;</tt> de dicho est&aacute;ndar).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].transforms[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional y contiene informaci&oacute;n sobre las transformaciones realizadas sobre los datos que se firman antes de calcular su <i class=" ">hash</i> (el <i class=" ">array</i> s&oacute;lo tiene un elemento).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].transforms[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es obligatoria e indica el tipo de una de las transformaciones realizadas sobre los datos que se firman antes de calcular su <i class=" ">hash. </i>Actualmente solo se permite el valor <tt class=" ">c14n</tt> (las &uacute;nicas transformaciones soportadas son las de <i class=" ">canonicalizaci&oacute;n</i>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_target.nodes_to_sign[].transforms[].method</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es obligatoria e indica una de las transformaciones realizadas sobre los datos que se firman antes de calcular su <i class=" ">hash. </i>Los valores que puede tener esta propiedad corresponden todos a algoritmos de <i class=" ">canonicalizaci&oacute;n</i>).    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">c14n</tt>: algoritmo inclusivo (<tt class=" ">http://www.w3.org/TR/2001/REC-xml-c14n-20010315</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">c14nWithComments</tt>: algoritmo inclusivo con comentarios (<tt class=" ">http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">excC14n</tt>: algoritmo exclusivo (<tt class=" ">http://www.w3.org/2001/10/xml-exc-c14n#</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">excC14nWithComments</tt>: algoritmo exclusivo con comentarios (<tt class=" ">http://www.w3.org/2001/10/xml-exc-c14n#WithComments</tt>).    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre la pol&iacute;tica de firma. Esta propiedad solo est&aacute; presente (siendo adem&aacute;s obligatoria) si el tipo de firma que indica la propiedad <tt class=" ">type</tt> es &quot;<tt class=" ">xades-epes&quot;.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.identifier.uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.identifier.qualifier</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de URI de la pol&iacute;tica de firma cuando dicho URI se construye partir de un OID. Sus valores posibles son:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">OIDAsURI</tt>    </p>
</li><li class=" ">    <p  ><tt class=" ">OIDAsURN</tt>    </p>
</li></ul>    <p  >Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.description</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n de la pol&iacute;tica. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.documentation_references[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Documentos con informaci&oacute;n adicional sobre la pol&iacute;tica. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_id.documentation_references[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de un documento con informaci&oacute;n adicional sobre la pol&iacute;tica.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre el <i class=" ">hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_algorithm_identifier.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo para calcular el <i class=" ">hash</i> de la pol&iacute;tica de firma. Su valor puede ser &quot;<tt class=" ">sha1&quot;</tt>, &quot;<tt class=" ">sha256&quot;</tt>, &quot;<tt class=" ">sha384&quot;</tt> o &quot;<tt class=" ">sha512&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_hash.digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Calificadores de la pol&iacute;tica de firma. Esta propiedad es opcional.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de uno de los calificadores de la pol&iacute;tica de firma. Esta propiedad tiene siempre el valor <tt class=" ">&quot;spuri&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">policy_identifier.policy_qualifiers[].uri</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URI de uno de los calificadores de la pol&iacute;tica de firma.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240700_safe-id-VFhfRUlEQVNfNC4xLjQuMC1EZWZpbmljacOzbmRlZmlybWEtT3BlcmFjaW9uZXM">
        <h6 class="heading "><span>Operaciones</span></h6>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240709">TX_EIDAS_4.1.4.0 - Crear una definici&oacute;n de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240710">TX_EIDAS_4.1.4.0 - Actualizar una definici&oacute;n de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240712">TX_EIDAS_4.1.4.0 - Obtener el hash de una firma para solicitar un sello de tiempo</a>    </p>
</li></ul>    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-4" id="src-96240701">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de firma de documentos - Operaciones</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703">TX_EIDAS_4.1.4.0 - Crear un recurso Documento y definiciones de firmas</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240704">TX_EIDAS_4.1.4.0 - Ejecutar un proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240705">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de documentos firmados</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240706">TX_EIDAS_4.1.4.0 - Obtener un documento</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240707">TX_EIDAS_4.1.4.0 - Eliminar un recurso Documento y definiciones de firmas</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240708">TX_EIDAS_4.1.4.0 - Eliminar un proceso de firma de documentos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240709">TX_EIDAS_4.1.4.0 - Crear una definici&oacute;n de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240710">TX_EIDAS_4.1.4.0 - Actualizar una definici&oacute;n de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240712">TX_EIDAS_4.1.4.0 - Obtener el hash de una firma para solicitar un sello de tiempo</a>    </p>
</li></ul>    <div class="section section-5" id="src-96240702">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtRGVzY3JpcGNpw7Nu">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGV0aWNpw7Nu">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtQXV0b3JpemFjacOzbg">Autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-CabeceraContent-Type">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Cuerpo">Cuerpo</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-CabeceraLocation">Cabecera Location</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-CabeceraContent-Type.1">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Cuerpo.1">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignerProcessCreation</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtRGVzY3JpcGNpw7Nu">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Crea un <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a>. Este proceso puede realizar varias firmas del documento que se proporciona, o bien realizar la firma de varios objetos de datos externos a partir de sus respectivos <i class=" ">hashes</i>.    </p>
<ul class=" "><li class=" ">    <p  >Por lo que respecta al primer caso (firma de un documento), se pueden crear procesos de firma para firmar documentos PDF (firmas PAdES-Basic, PAdES-BES y PAdES-EPES) y cualquier otro formato de documento (firmas XMLDSig, XAdES-BES y XAdES-EPES).    </p>
</li><li class=" ">    <p  >Por lo que respecta al segundo caso (firma de varios objectos de datos a partir de sus <i class=" ">hashes</i>), solo se pueden realizar firmas en formato XMLDSig/XAdES <i class=" ">externally detached</i>.    </p>
</li></ul>    <p  >La operaci&oacute;n tambi&eacute;n crea el recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> que corresponde al proceso de firma creado. Si este proceso se ejecuta con &eacute;xito, el correspondiente documento firmado o firma deber&aacute; obtenerse mediante la operaci&oacute;n <a   href="#src-96240706">TX_EIDAS_4.1.4.0 - Obtener un documento</a>.    </p>
    </div>
    <div class="section section-6" id="src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGV0aWNpw7Nu">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">POST /trustedx-resources/esignsp/v2/signer_processes</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtQXV0b3JpemFjacOzbg">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope </i>que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a> . En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >El <i class=" ">token</i> de acceso puede obtenerse mediante un flujo OAuth 2.0 de tipo <i class=" ">Authorization Code Grant</i> o mediante uno de tipo <i class=" ">Client Credentials Grant</i>.    </p>
    </div>
    <div class="section section-7" id="src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-CabeceraContent-Type">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <p  >Existen dos posibilidades, dependiendo de si la operaci&oacute;n se ejecuta para firmar un documento que se proporciona, o bien si se ejecuta para firmar varios objetos de datos externos a partir de sus <i class=" ">hashes.</i>    </p>
    <p  ><strong class=" ">Si la operaci&oacute;n se ejecuta para firmar un documento que se proporciona:</strong>    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: multipart/form-data; boundary=&lt;part_boundary_mark&gt;</code></div>
</div>
    </div>
    <p  >Donde <tt class=" ">&lt;part_boundary_mark&gt;</tt> es la cadena que delimita las partes de la entidad <i class=" ">multipart </i>que se pone en el <a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Cuerpo">Cuerpo</a>.    </p>
    <p  ><strong class=" ">Si la operaci&oacute;n se ejecuta para firmar varios objetos de datos externos a partir de sus <i class=" ">hashes</i>:</strong>    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Existen dos posibilidades, dependiendo de si la operaci&oacute;n se ejecuta para firmar un documento que se proporciona, o bien si se ejecuta para firmar varios objetos de datos externos a partir de sus <i class=" ">hashes.</i>    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtTGFvcGVyYWNpw7Nuc2VlamVjdXRhcGFyYWZpcm1hcnVuZG9jdW1lbnRvcXVlc2Vwcm9wb3JjaW9uYQ">La operaci&oacute;n se ejecuta para firmar un documento que se proporciona</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtTGFvcGVyYWNpw7Nuc2VlamVjdXRhcGFyYWZpcm1hcnZhcmlvc29iamV0b3NkZWRhdG9zZXh0ZXJub3NhcGFydGlyZGVzdXNoYXNoZXM">La operaci&oacute;n se ejecuta para firmar varios objetos de datos externos a partir de sus hashes</a>    </p>
</li></ul>    <div class="section section-8" id="src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtTGFvcGVyYWNpw7Nuc2VlamVjdXRhcGFyYWZpcm1hcnVuZG9jdW1lbnRvcXVlc2Vwcm9wb3JjaW9uYQ">
        <h8 class="heading "><span>La operaci&oacute;n se ejecuta para firmar un documento que se proporciona</span></h8>
    <p  >En este caso, el cuerpo contiene una entidad <tt class=" ">multipart/form-data</tt> con dos partes: una de ellas (<tt class=" ">&quot;process&quot;</tt>) contiene <a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-PropiedadesdelobjetoJSONquecontienelosdatosparacrearelprocesodefirma">Propiedades del objeto JSON que contiene los datos para crear el proceso de firma</a> con los datos necesarios para crear el proceso de firma; la otra (<tt class=" ">&quot;document&quot;</tt>) contiene el documento que se quiere firmar. La cabecera <tt class=" ">Content-Type</tt> de esta parte indica el tipo de este documento (un PDF si el valor de la cabecera es <tt class=" ">application/pdf</tt>, un documento XML si el valor es <tt class=" ">text/xml;charset=&quot;UTF-8&quot;</tt>, etc). Por otro lado, la cabecera <tt class=" ">Content-Transfer-Encoding</tt> de la parte <tt class=" ">&quot;document&quot;</tt> solo es necesaria cuando el documento que se quiere firmar est&aacute; codificado en binario (un documento PDF, una imagen PNG, etc).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">------x1Xxx2XXxxx3XXX3xxxXX2xxX1x</code></div>
<div class="line"><code class="plain">Content-Disposition: form-data; name="process"</code></div>
<div class="line"><code class="plain">Content-Type: application/json  </code></div>
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"process_type" : {string},    </code></div>
<div class="line"><code class="plain">	"signer" : {SignatureDefinition},    </code></div>
<div class="line"><code class="plain">	"labels" : [ [{string}] ],    </code></div>
<div class="line"><code class="plain">	"ui_locales" : [{string}],    </code></div>
<div class="line"><code class="plain">	"finish_callback_url" : {string},    </code></div>
<div class="line"><code class="plain">	"views" : {        </code></div>
<div class="line"><code class="plain">		"document_agreement" : {            </code></div>
<div class="line"><code class="plain">			"skip_server_id" : {boolean},            </code></div>
<div class="line"><code class="plain">			"document_info" : {                </code></div>
<div class="line"><code class="plain">			"html_body_content" : {string}            </code></div>
<div class="line"><code class="plain">			}        </code></div>
<div class="line"><code class="plain">		}    </code></div>
<div class="line"><code class="plain">	},    </code></div>
<div class="line"><code class="plain">	"timestamp" : {        </code></div>
<div class="line"><code class="plain">		"provider_id" : {string}    </code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">------x1Xxx2XXxxx3XXX3xxxXX2xxX1x</code></div>
<div class="line"><code class="plain">Content-Disposition: form-data; name="document"; </code></div>
<div class="line"><code class="plain">Content-Type: application/pdf</code></div>
<div class="line"><code class="plain">Content-Transfer-Encoding: binary  </code></div>
<div class="line"><code class="plain">&lt;doc&gt;</code></div>
<div class="line"><code class="plain">------x1Xxx2XXxxx3XXX3xxxXX2xxX1x--</code></div>
</div>
    </div>
    </div>
    <div class="section section-8" id="src-96240702_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtTGFvcGVyYWNpw7Nuc2VlamVjdXRhcGFyYWZpcm1hcnZhcmlvc29iamV0b3NkZWRhdG9zZXh0ZXJub3NhcGFydGlyZGVzdXNoYXNoZXM">
        <h8 class="heading "><span>La operaci&oacute;n se ejecuta para firmar varios objetos de datos externos a partir de sus hashes</span></h8>
    <p  >    <span style="color: #000000;">
En este caso, el cuerpo contiene <a   href="#src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-PropiedadesdelobjetoJSONquecontienelosdatosparacrearelprocesodefirma">Propiedades del objeto JSON que contiene los datos para crear el proceso de firma</a> con los datos necesarios para crear el proceso de firma;    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"process_type" : {string},    </code></div>
<div class="line"><code class="plain">	"signer" : {SignatureDefinition},    </code></div>
<div class="line"><code class="plain">	"labels" : [ [{string}] ],    </code></div>
<div class="line"><code class="plain">	"ui_locales" : [{string}],    </code></div>
<div class="line"><code class="plain">	"finish_callback_url" : {string},    </code></div>
<div class="line"><code class="plain">	"views" : {        </code></div>
<div class="line"><code class="plain">		"document_agreement" : {            </code></div>
<div class="line"><code class="plain">			"skip_server_id" : {boolean},            </code></div>
<div class="line"><code class="plain">			"document_info" : {                </code></div>
<div class="line"><code class="plain">				"html_body_content" : {string}            </code></div>
<div class="line"><code class="plain">			}        </code></div>
<div class="line"><code class="plain">			}    </code></div>
<div class="line"><code class="plain">		},    </code></div>
<div class="line"><code class="plain">		"timestamp" : {        </code></div>
<div class="line"><code class="plain">			"provider_id" : {string}    </code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	}</code></div>
</div>
    </div>
    </div>
    <div class="section section-8" id="src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-PropiedadesdelobjetoJSONquecontienelosdatosparacrearelprocesodefirma">
        <h8 class="heading "><span>Propiedades del objeto JSON que contiene los datos para crear el proceso de firma</span></h8>
    <p  >    <span style="color: #000000;">
El objeto JSON que contiene los datos a partir de los cuales se crea el proceso de firma tiene las siguientes propiedades:    </span>
    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">process_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de proceso de firma. Esta propiedad puede tener dos valores:    </p>
<ul class=" "><li class=" ">    <p  >&quot;<tt class=" ">urn:safelayer:eidas:processes:document:sign:esigp</tt>&quot;: el proceso utiliza una identidad de firma gestionada por la plataforma TrustedX eIDAS. Al principio del proceso se autenticar&aacute; al usuario y se obtendr&aacute; su autorizaci&oacute;n para consultar las identidades de firma con las que cuenta.    </p>
</li><li class=" ">    <p  >&quot;<tt class=" ">urn:safelayer:eidas:processes:document:sign&quot;</tt>: el proceso utiliza una identidad de firma gestionada por TrustedX eIDAS o por una aplicaci&oacute;n externa. Al principio del proceso, no se autenticar&aacute; al usuario ni se obtendr&aacute; su autorizaci&oacute;n para consultar las identidades de firma con las que cuenta, sino que ambas cosas se realizar&aacute;n m&aacute;s adelante, en el caso de que el usuario seleccione un esquema de identidades de firma de tipo eSigP.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signer</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Definici&oacute;n de la firma que debe realizarse. Esta propiedad se representa en JSON como un recurso <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>. En el caso concreto de esta operaci&oacute;n, la representaci&oacute;n del recurso solo puede tener los atributos <tt class=" ">signature_policy_id</tt> y <tt class=" ">parameters</tt>.Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">labels[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Lista de filtros que deben aplicarse sobre el conjunto de identidades de firma del usuario con vistas a seleccionar la que deber&aacute; utilizarse en el proceso de firma. Cada filtro se define como una lista de etiquetas y, mediante su aplicaci&oacute;n, se seleccionan las identidades de firma del usuario que tengan todas las etiquetas de la lista. De este modo, TrustedX eIDAS seleccionar&aacute; las identidades de firma del usuario que tengan todas las etiquetas de alguno de los filtros. Por ejemplo, si la lista de filtros es <tt class=" ">[[&quot;label1&quot;, &quot;label2&quot;], [&quot;label3&quot;, &quot;label4&quot;]]</tt> , TrustedX eIDAS seleccionar&aacute; todas las identidades de firma del usuario que tengan las etiquetas <tt class=" ">label1</tt> y <tt class=" ">label2</tt> y tambi&eacute;n todas las que tengan las etiquetas <tt class=" ">label3</tt> y <tt class=" ">label4</tt> . En el caso de TrustedX eIDAS seleccione m&aacute;s de una identidad de firma, se pedir&aacute; al usuario que indique cu&aacute;l de ellas tiene que utilizarse. Por otro lado, si TrustedX no selecciona ninguna identidad de firma, el proceso de firma finalizar&aacute; con error. Esta propiedad es opcional. Si se omite, TrustedX no aplicar&aacute; ning&uacute;n filtro a la selecci&oacute;n de las identidades de firma del usuario.Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">ui_locales[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Lista de idiomas de preferencia de los textos de las p&aacute;ginas que se env&iacute;en al navegador del usuario durante el proceso de firma. Cada idioma se representa en el formato <tt class=" ">&lt;ISO-639 Language Code&gt;</tt> + &quot;_&quot; + <tt class=" ">&lt;ISO-3166 Country Code&gt;</tt> . TrustedX eIDAS utilizar&aacute; el primer idioma que pueda satisfacer. Esta propiedad es opcional. Si se omite, TrustedX utilizar&aacute; la lista de idiomas que indique el navegador en la cabecera <tt class=" ">Accept-Language</tt> del mensaje de petici&oacute;n.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">finish_callback_url</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL de <i class=" ">callback</i>. La aplicaci&oacute;n cliente espera ser notificada de la finalizaci&oacute;n del proceso de firma en esta URL. TrustedX eIDAS a&ntilde;adir&aacute; el par&aacute;metro <tt class=" ">status</tt> en la <i class=" ">query string</i> de esta URL para indicar en qu&eacute; estado ha finalizado el proceso (<tt class=" ">finished</tt>, <tt class=" ">failed</tt> o <tt class=" ">canceled</tt>):    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">finished</tt>: El proceso ha terminado con &eacute;xito.    </p>
</li><li class=" ">    <p  ><tt class=" ">failed</tt>: El proceso no ha terminado con &eacute;xito porque se ha producido un error.    </p>
</li><li class=" ">    <p  ><tt class=" ">canceled</tt>: El proceso no ha terminado con &eacute;xito porque ha sido cancelado.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">views</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre las p&aacute;ginas que se tienen que enviar al navegador del usuario durante el proceso de firma. Esta propiedad es opcional. Si se omite, existen dos posibilidades:    </p>
<ul class=" "><li class=" ">    <p  >si el proceso es para firmar un documento, TrustedX eIDAS enviar&aacute; al navegador una p&aacute;gina predeterminada de reconocimiento de lectura del documento.    </p>
</li><li class=" ">    <p  >si el proceso es para firmar varios objetos de datos externos a partir de sus hashes, TrustedX eIDAS no enviar&aacute; nada al navegador.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">views.document_agreement</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre la p&aacute;gina mediante la que el usuario reconocer&aacute; la conformidad con el documento o los datos sobre los que se realiza el proceso de firma.Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">views.document_agreement.skip_server_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Indicaci&oacute;n de si podr&aacute; omitirse la p&aacute;gina de conformidad en el caso de que la firma del documento se genere en servidor. Esta propiedad es opcional y su valor por defecto es <tt class=" ">false</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">views.document_agreement.document_info</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n relativa al documento o los datos sobre los que se realiza el proceso de firma que debe incluirse en la p&aacute;gina de conformidad del usuario.Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">views.document_agreement.document_info.html_body_content</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Codificaci&oacute;n en base64 del cuerpo del documento HTML que contiene informaci&oacute;n relativa al documento o los datos sobre los que se realiza el proceso de firma y que debe mostrarse en la p&aacute;gina de conformidad del usuario. Los <i class=" ">tags </i>delimitadores de dicho cuerpo deben excluirse de la codificaci&oacute;n en base64 (i.e. los <i class=" ">tags</i> <tt class=" ">&lt;body&gt;</tt> y <tt class=" ">&lt;/body&gt;</tt>).Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">timestamp</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Si est&aacute; presente indica que la firma deber&aacute; tener un sello de tiempo. Y si no est&aacute; presente, que no deber&aacute; tenerlo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">timestamp.provider_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Si est&aacute; presente, indica la pol&iacute;tica de sellado de tiempo del sistema mediante la que tiene que obtenerse el sello de tiempo de la firma. Si no esta presente, la pol&iacute;tica ser&aacute; seleccionada por la plataforma.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <p  >Si el <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> se crea con &eacute;xito, la respuesta HTTP contendr&aacute; la siguiente <tt class=" ">Status-Line </tt>(v&eacute;anse en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a> todos los casos posibles).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 201 Created</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-CabeceraLocation">
        <h7 class="heading "><span>Cabecera Location</span></h7>
    <p  >URL del <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> que se haya creado. Esta URL tiene la siguiente estructura:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Location: https://&lt;host&gt;:&lt;port&gt;/trustedx-resources/esignsp/v2/signer_processes/{signature_process_id}</code></div>
</div>
    </div>
    <p  >Donde <tt class=" ">{signature_process_id}</tt> contiene el identificador del <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> que se haya creado.    </p>
    </div>
    <div class="section section-7" id="src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-CabeceraContent-Type.1">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240702_TX_EIDAS_4.1.4.0-Crearunprocesodefirmadedocumentos-Cuerpo.1">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Representaci&oacute;n JSON del <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> que se haya creado.    </p>
    <p  >    </p>
    <p  >    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240703">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Crear un recurso Documento y definiciones de firmas</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1EZXNjcmlwY2nDs24">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1QZXRpY2nDs24">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240703_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1BdXRvcml6YWNpw7Nu">Autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-CabeceraContent-Type">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Cuerpo">Cuerpo</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-CabeceraLocation">Cabecera Location</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-CabeceraContent-Type.1">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Cuerpo.1">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">DocumentCreation</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240703_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1EZXNjcmlwY2nDs24">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Crea un recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>. Este recurso puede crearse con dos finalidades: o bien para realizar varias firmas del documento que se proporciona, o bien para realizar la firma de varios objetos de datos externos a partir de sus respectivos <i class=" ">hashes</i>.    </p>
    <p  >En el primer caso, actualmente, solo se pueden crear recursos de este tipo que contengan un documento y una definici&oacute;n de firma PAdES-Basic, PAdES-BES, PAdES-EPES, XMLDSig, XAdES-BES o XAdES-EPES.Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
    <p  >En el segundo caso, actualmente, solo se pueden crear recursos de este tipo que contengan un documento vac&iacute;o y una definici&oacute;n de firma XMLDSig/XAdES <i class=" ">externally detached</i>.    </p>
    <p  >La operaci&oacute;n resulta &uacute;til en los siguientes escenarios:    </p>
<ul class=" "><li class=" ">    <p  >Si se quiere firmar un lote de documentos: para subir los documentos y opcionalmente las definiciones de firmas, para despu&eacute;s crear el correspondiente proceso de firma.    </p>
</li><li class=" ">    <p  >Si se quiere firmar un documento y delegar en TrustedX la orquestaci&oacute;n del proceso del firma: para subir el documento y opcionalmente las definiciones de firma, para despu&eacute;s crear el correspondiente proceso de firma.    </p>
</li><li class=" ">    <p  >Si se quiere firmar un documento y orquestar tambi&eacute;n el proceso de firma.    </p>
</li></ul>    </div>
    <div class="section section-6" id="src-96240703_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1QZXRpY2nDs24">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">POST /trustedx-resources/esignsp/v2/documents</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240703_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1BdXRvcml6YWNpw7Nu">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >La aplicaci&oacute;n cliente deber&aacute; obtener el <i class=" ">token</i> de acceso requerido mediante una interacci&oacute;n OAuth 2.0 de tipo <i class=" ">Client Credentials Grant</i> con la plataforma.    </p>
    </div>
    <div class="section section-7" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-CabeceraContent-Type">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <p  >Existen tres posibilidades, dependiendo de si el recurso se crea para firmar un documento que se proporciona junto a las definiciones de firma, para firmar un documento que se proporciona sin definiciones de firma, o bien si se crea para firmar varios objetos de datos externos a partir de sus <i class=" ">hashes.</i>    </p>
    <div class="section section-8" id="src-96240703_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1TaWVscmVjdXJzb3NlY3JlYXBhcmFmaXJtYXJ1bmRvY3VtZW50b3F1ZXNlcHJvcG9yY2lvbmFqdW50b2FsYXNkZWZpbmljaW9uZXNkZWZpcm1hczo">
        <h8 class="heading "><span>Si el recurso se crea para firmar un documento que se proporciona junto a las definiciones de firmas:</span></h8>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: multipart/form-data; boundary=&lt;part_boundary_mark&gt;</code></div>
</div>
    </div>
    <p  >Donde <tt class=" ">&lt;part_boundary_mark&gt;</tt> es la cadena que delimita las partes de la entidad <i class=" ">multipart </i>que se pone en el <a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Cuerpo">Cuerpo</a>.    </p>
    </div>
    <div class="section section-8" id="src-96240703_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1TaWVscmVjdXJzb3NlY3JlYXBhcmFmaXJtYXJ1bmRvY3VtZW50b3F1ZXNlcHJvcG9yY2lvbmFzaW5kZWZpbmljaW9uZXNkZWZpcm1hczo">
        <h8 class="heading "><span>Si el recurso se crea para firmar un documento que se proporciona sin definiciones de firmas:</span></h8>
    <p  >En este caso el <tt class=" ">Content-Type</tt> ser&aacute; el que corresponda al tipo de documento que se quiera firmar (e.g. <tt class=" ">application/pdf</tt>, <tt class=" ">text/xml</tt>, etc)    </p>
    </div>
    <div class="section section-8" id="src-96240703_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1TaWVscmVjdXJzb3NlY3JlYXBhcmFmaXJtYXJ2YXJpb3NvYmpldG9zZGVkYXRvc2V4dGVybm9zYXBhcnRpcmRlc3VzaGFzaGVzOg">
        <h8 class="heading "><span>Si el recurso se crea para firmar varios objetos de datos externos a partir de sus hashes:</span></h8>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    </div>
    <div class="section section-7" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Existen tres posibilidades, dependiendo de si el recurso se crea para firmar un documento que se proporciona junto a las definiciones de firma, para firmar un documento que se proporciona sin definiciones de firma, o bien si se crea para firmar varios objetos de datos externos a partir de sus <i class=" ">hashes.</i>    </p>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Elrecursosecreaparafirmarundocumentoqueseproporcionajuntoalasdefinicionesdefirmas">El recurso se crea para firmar un documento que se proporciona junto a las definiciones de firmas</a>    </p>
</li><li class=" ">    <p  ><a  class="external-link" href="http://confluence#El%20recurso%20se%20crea%20para%20firmar%20un%20documento%20que%20se%20proporciona%20sin%20definiciones%20de%20firmas">El recurso se crea para firmar un documento que se proporciona sin definiciones de firmas</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Elrecursosecreaparafirmarvariosobjetosdedatosexternosapartirdesushashes">El recurso se crea para firmar varios objetos de datos externos a partir de sus hashes</a>    </p>
</li></ul>    <div class="section section-8" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Elrecursosecreaparafirmarundocumentoqueseproporcionajuntoalasdefinicionesdefirmas">
        <h8 class="heading "><span>El recurso se crea para firmar un documento que se proporciona junto a las definiciones de firmas</span></h8>
    <p  >Contiene una entidad <tt class=" ">multipart/form-data</tt> con dos partes: una de ellas (<tt class=" ">&quot;signers&quot;</tt>) es opcional y contiene un <i class=" ">array</i> JSON con los datos necesarios para crear las definiciones de firmas del recurso. En el caso de que no se proporcionen datos de ninguna definici&oacute;n de firma (i.e. que la parte <tt class=" ">&quot;signers&quot;</tt> contenga un <i class=" ">array</i> vac&iacute;o), &eacute;stas deber&aacute;n proporcionarse posteriormente al recurso por medio de la operaci&oacute;n <a   href="#src-96240709">TX_EIDAS_4.1.4.0 - Crear una definici&oacute;n de firma</a>. La otra parte (<tt class=" ">&quot;document&quot;</tt>) contiene el documento que se quiere asignar al recurso (que a la postre ser&aacute; el documento que se firme). La cabecera <tt class=" ">Content-Type</tt> de esta parte indica el tipo de este documento (un PDF si el valor de la cabecera es <tt class=" ">application/pdf</tt>, un documento XML si el valor es <tt class=" ">text/xml;charset=&quot;UTF-8&quot;</tt>, etc). Por otro lado, la cabecera <tt class=" ">Content-Transfer-Encoding</tt> de la parte <tt class=" ">&quot;document&quot;</tt> solo es necesaria cuando el documento que se quiere firmar est&aacute; codificado en binario (un documento PDF, una imagen PNG, etc).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">------x1Xxx2XXxxx3XXX3xxxXX2xxX1x</code></div>
<div class="line"><code class="plain">Content-Disposition: form-data; name="signers"</code></div>
<div class="line"><code class="plain">Content-Type: application/json </code></div>
<div class="line"><code class="plain">[    </code></div>
<div class="line"><code class="plain">	{        </code></div>
<div class="line"><code class="plain">		"signature_policy_id" : {string},        </code></div>
<div class="line"><code class="plain">		"parameters" : {Parameters}    </code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">]</code></div>
<div class="line"><code class="plain">------x1Xxx2XXxxx3XXX3xxxXX2xxX1x</code></div>
<div class="line"><code class="plain">Content-Disposition: form-data; name="document";</code></div>
<div class="line"><code class="plain">Content-Type: application/PDF</code></div>
<div class="line"><code class="plain">Content-Transfer-Encoding: binary </code></div>
<div class="line"><code class="plain">&lt;doc&gt;</code></div>
<div class="line"><code class="plain">------x1Xxx2XXxxx3XXX3xxxXX2xxX1x--</code></div>
</div>
    </div>
    </div>
    <div class="section section-8" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Elrecursosecreaparafirmarundocumentoqueseproporcionasindefinicionesdefirmas">
        <h8 class="heading "><span>El recurso se crea para firmar un documento que se proporciona sin definiciones de firmas</span></h8>
    <p  >    <span style="color: #000000;">
En este caso, el cuerpo contiene el documento que se quiere firmar.    </span>
    <span style="color: #000000;">
    </span>
    </p>
    </div>
    <div class="section section-8" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Elrecursosecreaparafirmarvariosobjetosdedatosexternosapartirdesushashes">
        <h8 class="heading "><span>El recurso se crea para firmar varios objetos de datos externos a partir de sus hashes</span></h8>
    <p  >    <span style="color: #000000;">
En este caso, el cuerpo contiene     </span>
<a   href="#src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-PropiedadesdelobjetoJSONquecontienelosdatosparacrearlasdefinicionesdefirmas">Propiedades del objeto JSON que contiene los datos para crear las definiciones de firmas</a>    <span style="color: #000000;">
 con los datos necesarios para crear el proceso de firma.    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">[    </code></div>
<div class="line"><code class="plain">	{        </code></div>
<div class="line"><code class="plain">		"signature_policy_id" : {string},        </code></div>
<div class="line"><code class="plain">		"parameters" : {Parameters}    </code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">]</code></div>
</div>
    </div>
    </div>
    <div class="section section-8" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-PropiedadesdelobjetoJSONquecontienelosdatosparacrearlasdefinicionesdefirmas">
        <h8 class="heading "><span>Propiedades del objeto JSON que contiene los datos para crear las definiciones de firmas</span></h8>
    <p  >    <span style="color: #000000;">
El objeto JSON que contiene los datos a partir de los que se crear&aacute; cada una de las definiciones de firma, tiene las siguientes propiedades:    </span>
    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_policy_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Valor que se asignar&aacute; a la propiedad <tt class=" ">signature_policy_id</tt> de una de las <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> del recurso que se crea. Si el recurso se crea para firmar un documento que se proprociona, la propiedad puede tener los siguientes valores:    </p>
<ul class=" "><li class=" ">    <p  >&quot;<tt class=" ">urn:safelayer:eidas:policies:sign:document:pdf&quot;:</tt>definici&oacute;n de una firma PAdES de ETSI (ETSI TS 102 778).    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;urn:safelayer:eidas:policies:sign:document:xml&quot;:</tt>definici&oacute;n de una firma W3C XMLDSig/XAdES (ETSI TS 101 903).    </p>
</li></ul>    <p  >Si el recurso se crea para firmar varios objetos de datos externos a partir de sus hashes, la propiedad solo puede tener el valor <tt class=" ">&quot;urn:safelayer:eidas:policies:sign:document:xml&quot;</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">parameters</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Valor que se asignar&aacute; a la propiedad <tt class=" ">parameters</tt> de una de las <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> del recurso que se crea. Esta propiedad es opcional y puede omitirse en algunos elementos del <i class=" ">array</i>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <p  >Si el recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> se crea con &eacute;xito, la respuesta HTTP contendr&aacute; la siguiente <tt class=" ">Status-Line </tt>(v&eacute;anse en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a> todos los casos posibles).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 201 Created</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-CabeceraLocation">
        <h7 class="heading "><span>Cabecera Location</span></h7>
    <p  >URL del     <span style="color: #000000;">
recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>     </span>
que se haya creado. Esta URL tiene la siguiente estructura:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Location: https://&lt;host&gt;:&lt;port&gt;/trustedx-resources/esignsp/v2/documents/{doc_and_sigdefs_id}</code></div>
</div>
    </div>
    <p  >Donde <tt class=" ">{doc_and_sigdefs_id}</tt> es el identificador del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> que se haya creado.    </p>
    </div>
    <div class="section section-7" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-CabeceraContent-Type.1">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240703_TX_EIDAS_4.1.4.0-CrearunrecursoDocumentoydefinicionesdefirmas-Cuerpo.1">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Contiene un objeto JSON con la siguiente estructura:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"id" : {string},   </code></div>
<div class="line"><code class="plain">	"self" : {string},    </code></div>
<div class="line"><code class="plain">	"signers" : [        </code></div>
<div class="line"><code class="plain">		{            </code></div>
<div class="line"><code class="plain">			"id" : {string},            </code></div>
<div class="line"><code class="plain">			"self" : {string}        </code></div>
<div class="line"><code class="plain">		}    </code></div>
<div class="line"><code class="plain">	]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">self</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signers[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre las <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que contiene el recurso creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signers[].id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de una de las <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que contiene el recurso creado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signers[].self</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL de una de las <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que contiene el recurso creado.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240704">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Ejecutar un proceso de firma de documentos</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240704_TX_EIDAS_4.1.4.0-Ejecutarunprocesodefirmadedocumentos-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240704_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FamVjdXRhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtRGVzY3JpcGNpw7Nu">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240704_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FamVjdXRhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGV0aWNpw7Nu">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240704_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FamVjdXRhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGFyw6FtZXRyb3M">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240704_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FamVjdXRhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtQXV0b3JpemFjacOzbg">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240704_TX_EIDAS_4.1.4.0-Ejecutarunprocesodefirmadedocumentos-Respuesta">Respuesta</a>    </p>
</li></ul>    <div class="section section-6" id="src-96240704_TX_EIDAS_4.1.4.0-Ejecutarunprocesodefirmadedocumentos-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignerProcessExecution</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240704_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FamVjdXRhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtRGVzY3JpcGNpw7Nu">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Ejecuta un <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> que haya sido <a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a>.Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
    </div>
    <div class="section section-6" id="src-96240704_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FamVjdXRhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGV0aWNpw7Nu">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <p  >La ejecuci&oacute;n del proceso de firma de un documento se ordena enviando una respuesta de redirecci&oacute;n al navegador con el que el usuario haya solicitado la firma. La URL a la que se tiene que redirigir al navegador debe extraerse de la representaci&oacute;n JSON del proceso de firma que quiera ejecutarse, representaci&oacute;n que se encuentra en el cuerpo de la respuesta que se recibe cuando se ejecuta la <a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a>. En particular, la URL de redirecci&oacute;n debe extrarse del campo <tt class=" ">url</tt> del &uacute;nico elemento que actualmente contiene el <i class=" ">array</i> <tt class=" ">tasks.pending</tt> de un proceso de firma reci&eacute;n creado (elemento cuyo <tt class=" ">type</tt> es siempre <tt class=" ">UserBrowserTask</tt>).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 302 Found</code></div>
<div class="line"><code class="plain">Location: &lt;userbrowser_task_url&gt;</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240704_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FamVjdXRhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGFyw6FtZXRyb3M">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">user_browser_task_url</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">header</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL a la que tiene que acceder el navegador del usuario para ejecutar el proceso de firma de un documento. La aplicacion habr&aacute; obtenido esta URL en la respuesta que haya recibido de TrustedX eIDAS (eSignSP) al <a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a> .    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240704_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FamVjdXRhcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtQXV0b3JpemFjacOzbg">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >Durante la ejecuci&oacute;n del proceso de firma, TrustedX eIDAS autentica al usuario y obtiene su autorizaci&oacute;n mediante OAuth 2.0 en dos ocasiones:    </p>
<ul class=" "><li class=" ">    <p  >La primera, para que el servicio de firma de documentos puede consultar las identidades de firma del usuario con el fin de seleccionar una.    </p>
</li><li class=" ">    <p  >La segunda, para que el servicio de firma de documentos pueda solicitar que se cree la firma del documento con la identidad de firma seleccionada.    </p>
</li></ul>    <p  >Una configuraci&oacute;n t&iacute;pica de autenticaci&oacute;n y autorizaci&oacute;n del servidor TrustedX eIDAS se reflejar&iacute;a en una experiencia de usuario como la siguiente:    </p>
<ul class=" "><li class=" ">    <p  >La primera autenticaci&oacute;n podr&aacute; omitirse mediante SSO si el usuario ya dispone en ese instante de una sesi&oacute;n en TrustedX eIDAS (el usuario puede haber creado esta sesi&oacute;n para iniciar la sesi&oacute;n en la aplicaci&oacute;n). Por otro lado, la autorizaci&oacute;n que sigue podr&aacute; estar impl&iacute;cita en la autenticaci&oacute;n.    </p>
</li><li class=" ">    <p  >La segunda autenticaci&oacute;n podr&aacute; omitirse mediante SSO cuando se utilice una identidad de firma en dispositivo m&oacute;vil (si adem&aacute;s se dispone de una sesi&oacute;n en TrustedX eIDAS) porque la aplicaci&oacute;n Mobile ID ya exige al usuario que introduza su PIN antes de generar la firma. Por el contrario, la segunda autenticaci&oacute;n no deber&aacute; omitirse cuando se utilice una identidad de firma en servidor. En cualquiera de los dos casos (identidad de firma en m&oacute;vil o en servidor) la autorizaci&oacute;n que sigue podr&aacute; estar impl&iacute;cita en la autenticaci&oacute;n.    </p>
</li></ul>    <p  >En general, adem&aacute;s de autenticar al usuario y obtener su autorizaci&oacute;n para consultar las identidades de firma y firmar el documento, se pedir&aacute; tambi&eacute;n al usuario que acepte (reconozca) que ha le&iacute;do el documento, antes de firmarlo. En el caso particular de que se utilice una identidad de firma en servidor, la obtenci&oacute;n de este reconocimiento podr&aacute; omitirse, si as&iacute; se indic&oacute; <a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a> (par&aacute;metro <tt class=" ">views.document_agreement.skip_server_id</tt>). Esto pasar&aacute; t&iacute;picamente cuando la aplicaci&oacute;n cliente obtenga por sus propios medios este reconocimiento antes de solicitar la firma del documento a TrustedX eIDAS.    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240704_TX_EIDAS_4.1.4.0-Ejecutarunprocesodefirmadedocumentos-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <p  >Si el proceso de firma se ejecuta con &eacute;xito, la aplicaci&oacute;n cliente recibir&aacute; un mensaje <tt class=" ">HTTP-GET</tt> procedente del navegador en la URL de <i class=" ">callback</i> que se hubiera indicado al <a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a>. Concretamente, en la URL que se puso en el campo <tt class=" ">finish_callback_url</tt> del cuerpo de la peticion (parte <tt class=" ">process</tt>) mediante la que se cre&oacute; el proceso de firma.    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">GET &lt;finish_callback_url_path&gt;?status=finished&amp;signer_process_id=&lt;signer_process_id&gt; </code></div>
<div class="line"><code class="plain">Host: &lt;finish_callback_url_host&gt;</code></div>
</div>
    </div>
    <p  >Donde <tt class=" ">&lt;signer_process_id&gt;</tt> es el identificador del proceso de firma que se ha ejecutado, <tt class=" ">&lt;finish_callback_url_host&gt;&lt;finish_callback_url_path&gt;</tt> es la URL de <i class=" ">callback</i> que se indic&oacute; en el campo <tt class=" ">finish_callback_url</tt> de la petici&oacute;n con la que se cre&oacute; el proceso de firma y <tt class=" ">status</tt> es un par&aacute;metro que indica el resultado de dicho proceso mediante uno de los siguientes valores:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">finished</tt>: El proceso ha terminado y el documento ha sido firmado con &eacute;xito.    </p>
</li><li class=" ">    <p  ><tt class=" ">failed</tt>: El proceso ha terminado. No obstante, el documento no ha sido firmado porque se ha producido un error.    </p>
</li><li class=" ">    <p  ><tt class=" ">canceled</tt>: El proceso ha terminado mediante la cancelaci&oacute;n de su ejecuci&oacute;n. En consecuencia, el documento no ha sido firmado.    </p>
</li></ul>    <p  >    </p>
    </div>
    </div>
    <div class="section section-5" id="src-96240705">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de documentos firmados</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtQWxpYXM">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtRGVzY3JpcGNpw7Nu">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtUGV0aWNpw7Nu">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtUGFyw6FtZXRyb3M">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtQXV0b3JpemFjacOzbg">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtUmVzcHVlc3Rh">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtU3RhdHVzLUxpbmU">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtQ2FiZWNlcmFDb250ZW50LVR5cGU">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtQ3VlcnBv">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtQWxpYXM">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignerProcessDocumentsReading</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtRGVzY3JpcGNpw7Nu">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >    <span style="color: #000000;">
Obtiene informaci&oacute;n de los documentos firmados en un proceso de firma. En particular, del resultado obtenido al realizar cada una de las firmas.    </span>
    </p>
    </div>
    <div class="section section-6" id="src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtUGV0aWNpw7Nu">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">GET /trustedx-resources/esignsp/v2/signer_processes/{signature_process_id}/documents</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtUGFyw6FtZXRyb3M">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_process_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> con el que se han firmado los documentos.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtQXV0b3JpemFjacOzbg">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >El <i class=" ">token</i> de acceso puede obtenerse mediante un flujo OAuth 2.0 de tipo <i class=" ">Authorization Code Grant</i> o mediante uno de tipo <i class=" ">Client Credentials Grant</i>.    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtUmVzcHVlc3Rh">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtU3RhdHVzLUxpbmU">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Valor    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 200 OK</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Se proporciona la informaci&oacute;n solicitada en el cuerpo de la respuesta (<tt class=" ">Content-Type: application/json</tt>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Otros    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >V&eacute;anse todos los casos posibles en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtQ2FiZWNlcmFDb250ZW50LVR5cGU">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240705_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGVkb2N1bWVudG9zZmlybWFkb3MtQ3VlcnBv">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Si la operaci&oacute;n se realiza con &eacute;xito, el cuerpo contendr&aacute;     <span style="color: #000000;">
un objeto JSON con la siguiente estructura:    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    "documents" : [{</code></div>
<div class="line"><code class="plain">        "id" : {string},</code></div>
<div class="line"><code class="plain">        "url" : {string},</code></div>
<div class="line"><code class="plain">        "content: {string},</code></div>
<div class="line"><code class="plain">        "result" : {</code></div>
<div class="line"><code class="plain">            "status" : {string},</code></div>
<div class="line"><code class="plain">            "details" : {</code></div>
<div class="line"><code class="plain">                 "message" : {string}</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de los documentos firmados en el proceso.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de uno de los documentos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].url</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> que corresponde a uno de los documentos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].content</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL de uno de los documentos.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].result</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Resultado de la firma de uno de los documentos:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">&quot;finished&quot;</tt>: El documento ha sido firmado con &eacute;xito.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;failed&quot;</tt>: El documento no ha sido firmado porque se ha producido un error.    </p>
</li><li class=" ">    <p  ><tt class=" ">&quot;canceled&quot;</tt>: El documento no ha sido firmado porque el proceso de firma fue cancelado    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">documents[].details.message</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Mensaje que describe el error en la firma de uno de los documentos. Esta propiedad solo est&aacute; presente cuando el resultado de la firma del documento es <tt class=" ">failed.</tt>    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240706">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener un documento</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240706_TX_EIDAS_4.1.4.0-Obtenerundocumento-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240706_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW5kb2N1bWVudG8tRGVzY3JpcGNpw7Nu">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240706_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW5kb2N1bWVudG8tUGV0aWNpw7Nu">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240706_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW5kb2N1bWVudG8tUGFyw6FtZXRyb3M">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240706_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW5kb2N1bWVudG8tQXV0b3JpemFjacOzbg">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240706_TX_EIDAS_4.1.4.0-Obtenerundocumento-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240706_TX_EIDAS_4.1.4.0-Obtenerundocumento-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240706_TX_EIDAS_4.1.4.0-Obtenerundocumento-Cuerpo">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240706_TX_EIDAS_4.1.4.0-Obtenerundocumento-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignerProcessDocumentContentReading</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240706_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW5kb2N1bWVudG8tRGVzY3JpcGNpw7Nu">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Obtiene un documento sobre el que se realiza (o se ha realizado) una operaci&oacute;n de firma (e.g. se <a   href="#src-96240704">TX_EIDAS_4.1.4.0 - Ejecutar un proceso de firma de documentos</a> sobre &eacute;l). En el caso de que esta operaci&oacute;n haya terminado con &eacute;xito, el documento contendr&aacute; la firma que se haya generado como consecuencia de la misma.    </p>
    </div>
    <div class="section section-6" id="src-96240706_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW5kb2N1bWVudG8tUGV0aWNpw7Nu">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">GET /trustedx-resources/esignsp/v2/documents/{doc_and_sigdefs_id}/content</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240706_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW5kb2N1bWVudG8tUGFyw6FtZXRyb3M">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">doc_and_sigdefs_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>    <span style="color: #000000;">
 que contiene el documento que se quiere obtener    </span>
. En el caso de que se trate de un documento sobre el que se est&aacute; ejecutando (o se ha ejecutado) un proceso de firma, la cadena <tt class=" ">documents/{document_id}</tt> podr&aacute; extrarse de la representaci&oacute;n JSON de dicho proceso de firma, representaci&oacute;n que se encuentra en el cuerpo de la respuesta que se recibe cuando se ejecuta la <a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a>. En particular, dicha cadena deber&aacute; extrarse del campo <tt class=" ">url</tt> del &uacute;nico elemento que actualmente contiene el <i class=" ">array</i> <tt class=" ">documents</tt> de un <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> reci&eacute;n creado.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240706_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVydW5kb2N1bWVudG8tQXV0b3JpemFjacOzbg">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >El <i class=" ">token</i> de acceso puede obtenerse mediante un flujo OAuth 2.0 de tipo <i class=" ">Authorization Code Grant</i> o mediante uno de tipo <i class=" ">Client Credentials Grant</i>.    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240706_TX_EIDAS_4.1.4.0-Obtenerundocumento-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240706_TX_EIDAS_4.1.4.0-Obtenerundocumento-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Valor    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 200 OK</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Se proporciona el documento en el cuerpo de la respuesta (<tt class=" ">Content-Type: application/pdf</tt>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 404 Not Found</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El documento solicitado no existe (<tt class=" ">Content-Type: application/json</tt>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Otros    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >V&eacute;anse todos los casos posibles en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a>    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240706_TX_EIDAS_4.1.4.0-Obtenerundocumento-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Documento solicitado u objeto JSON que describe el error.    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240707">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Eliminar un recurso Documento y definiciones de firmas</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240707_TX_EIDAS_4.1.4.0-EliminarunrecursoDocumentoydefinicionesdefirmas-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240707_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1EZXNjcmlwY2nDs24">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240707_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1QZXRpY2nDs24">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240707_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1QYXLDoW1ldHJvcw">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240707_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1BdXRvcml6YWNpw7Nu">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240707_TX_EIDAS_4.1.4.0-EliminarunrecursoDocumentoydefinicionesdefirmas-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240707_TX_EIDAS_4.1.4.0-EliminarunrecursoDocumentoydefinicionesdefirmas-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240707_TX_EIDAS_4.1.4.0-EliminarunrecursoDocumentoydefinicionesdefirmas-Cuerpo">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240707_TX_EIDAS_4.1.4.0-EliminarunrecursoDocumentoydefinicionesdefirmas-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">DocumentDeletion</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240707_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1EZXNjcmlwY2nDs24">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Elimina un     <span style="color: #000000;">
recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>    </span>
    <span style="color: #000000;">
.    </span>
    </p>
    </div>
    <div class="section section-6" id="src-96240707_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1QZXRpY2nDs24">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">DELETE /trustedx-resources/esignsp/v2/documents/{doc_and_sigdefs_id}</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240707_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1QYXLDoW1ldHJvcw">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">doc_and_sigdefs_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> que se quiere eliminar.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240707_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucmVjdXJzb0RvY3VtZW50b3lkZWZpbmljaW9uZXNkZWZpcm1hcy1BdXRvcml6YWNpw7Nu">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >La aplicaci&oacute;n cliente deber&aacute; obtener el <i class=" ">token</i> de acceso requerido mediante una interacci&oacute;n OAuth 2.0 de tipo <i class=" ">Client Credentials Grant </i>con la plataforma.    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240707_TX_EIDAS_4.1.4.0-EliminarunrecursoDocumentoydefinicionesdefirmas-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240707_TX_EIDAS_4.1.4.0-EliminarunrecursoDocumentoydefinicionesdefirmas-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Valor    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 204 No Content</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> ha sido eliminado con &eacute;xito y la respuesta no tiene cuerpo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 404 Not Found</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> que se ha solicitado eliminar no existe (<tt class=" ">Content-Type: application/json</tt>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Otros    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >V&eacute;anse todos los casos posibles en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240707_TX_EIDAS_4.1.4.0-EliminarunrecursoDocumentoydefinicionesdefirmas-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Si el recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> se elimina con &eacute;xito, la respuesta no tendr&aacute; cuerpo. En caso contrario, s&iacute; lo tendr&aacute; y contendr&aacute; un objeto JSON que describa el error.    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240708">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Eliminar un proceso de firma de documentos</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240708_TX_EIDAS_4.1.4.0-Eliminarunprocesodefirmadedocumentos-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240708_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtRGVzY3JpcGNpw7Nu">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240708_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGV0aWNpw7Nu">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240708_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGFyw6FtZXRyb3M">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240708_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtQXV0b3JpemFjacOzbg">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240708_TX_EIDAS_4.1.4.0-Eliminarunprocesodefirmadedocumentos-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240708_TX_EIDAS_4.1.4.0-Eliminarunprocesodefirmadedocumentos-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240708_TX_EIDAS_4.1.4.0-Eliminarunprocesodefirmadedocumentos-Cuerpo">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240708_TX_EIDAS_4.1.4.0-Eliminarunprocesodefirmadedocumentos-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignerProcessDeletion</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240708_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtRGVzY3JpcGNpw7Nu">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Elimina un <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a>.     <span style="color: #000000;">
Tambi&eacute;n elimina el recurso     </span>
<a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>    <span style="color: #000000;">
 que corresponda a dicho proceso.    </span>
    </p>
    </div>
    <div class="section section-6" id="src-96240708_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGV0aWNpw7Nu">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">DELETE /trustedx-resources/esignsp/v2/signer_processes/{signature_process_id}</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240708_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtUGFyw6FtZXRyb3M">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped relative-table confluenceTable">
                    <colgroup>
                                    <col  width="22%"/>
                                    <col  width="6%"/>
                                    <col  width="11%"/>
                                    <col  width="59%"/>
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_process_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> que se quiere eliminar.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240708_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlZmlybWFkZWRvY3VtZW50b3MtQXV0b3JpemFjacOzbg">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >El <i class=" ">token</i> de acceso puede obtenerse mediante un flujo OAuth 2.0 de tipo <i class=" ">Authorization Code Grant</i> o mediante uno de tipo <i class=" ">Client Credentials Grant</i>.    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240708_TX_EIDAS_4.1.4.0-Eliminarunprocesodefirmadedocumentos-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240708_TX_EIDAS_4.1.4.0-Eliminarunprocesodefirmadedocumentos-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Valor    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 204 No Content</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> ha sido eliminado con &eacute;xito y la respuesta no tiene cuerpo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 404 Not Found</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> que se ha solicitado eliminar no existe (<tt class=" ">Content-Type: application/json</tt>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Otros    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >V&eacute;anse todos los casos posibles en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240708_TX_EIDAS_4.1.4.0-Eliminarunprocesodefirmadedocumentos-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Si el <a   href="#src-96240698">TX_EIDAS_4.1.4.0 - Proceso de firma de documentos</a> se elimina con &eacute;xito, la respuesta no tendr&aacute; cuerpo. En caso contrario, s&iacute; lo tendr&aacute; y contendr&aacute; un objeto JSON que describa el error.    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240709">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Crear una definici&oacute;n de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1BbGlhcw">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1EZXNjcmlwY2nDs24">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1QZXRpY2nDs24">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1QYXLDoW1ldHJvcw">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1BdXRvcml6YWNpw7Nu">Autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZQ">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DdWVycG8">Cuerpo</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1SZXNwdWVzdGE">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1TdGF0dXMtTGluZQ">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUxvY2F0aW9u">Cabecera Location</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZS4x">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DdWVycG8uMQ">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1BbGlhcw">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">DocumentSignerCreation</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1EZXNjcmlwY2nDs24">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >    <span style="color: #000000;">
Crea una <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> dentro de un recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>. La firma definida se realizar&aacute; sobre el documento que est&eacute; contenido en el recurso.    </span>
Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
    </div>
    <div class="section section-6" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1QZXRpY2nDs24">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">POST /trustedx-resources/esignsp/v2/documents/{doc_and_sigdefs_id}/signers</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1QYXLDoW1ldHJvcw">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped relative-table confluenceTable">
                    <colgroup>
                                    <col  width="16%"/>
                                    <col  width="5%"/>
                                    <col  width="8%"/>
                                    <col  width="69%"/>
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">doc_and_sigdefs_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> en el que se quiere crear la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1BdXRvcml6YWNpw7Nu">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >La aplicaci&oacute;n cliente deber&aacute; obtener el <i class=" ">token</i> de acceso requerido mediante una interacci&oacute;n OAuth 2.0 de tipo <i class=" ">Client Credentials Grant</i> con la plataforma.    </p>
    </div>
    <div class="section section-7" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZQ">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DdWVycG8">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >    <span style="color: #000000;">
<a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que se quiere crear.    </span>
    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1SZXNwdWVzdGE">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1TdGF0dXMtTGluZQ">
        <h7 class="heading "><span>Status-Line</span></h7>
    <p  >Si la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>    <span style="color: #000000;">
     </span>
se crea con &eacute;xito, la respuesta HTTP contendr&aacute; la siguiente <tt class=" ">Status-Line </tt>(v&eacute;anse en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a> todos los casos posibles).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 201 Created</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUxvY2F0aW9u">
        <h7 class="heading "><span>Cabecera Location</span></h7>
    <p  >URL de la    <span style="color: #000000;">
 <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>     </span>
que se haya creado. Esta URL tiene la siguiente estructura:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Location: https://&lt;host&gt;:&lt;port&gt;/trustedx-resources/esignsp/v2/documents/{doc_and_sigdefs_id}/signers/{signature_definition_id}</code></div>
</div>
    </div>
    <p  >Donde <tt class=" ">{doc_and_sigdefs_id}</tt> es el identificador del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> en el que se haya creado la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> y <tt class=" ">{signature_definition_id}</tt> es el identificador de esta definici&oacute;n.    </p>
    </div>
    <div class="section section-7" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZS4x">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240709_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DdWVycG8uMQ">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Contiene un objeto JSON con la siguiente estructura:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"id" : {string},    </code></div>
<div class="line"><code class="plain">	"self" : {string}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> creada.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">self</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL de la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> creada.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240710">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Actualizar una definici&oacute;n de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUFsaWFz">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLURlc2NyaXBjacOzbg">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLVBldGljacOzbg">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLVBhcsOhbWV0cm9z">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUF1dG9yaXphY2nDs24">Autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUNhYmVjZXJhQ29udGVudC1UeXBl">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUN1ZXJwbw">Cuerpo</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLVJlc3B1ZXN0YQ">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLVN0YXR1cy1MaW5l">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUN1ZXJwby4x">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUFsaWFz">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">DocumentSignerUpdate</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLURlc2NyaXBjacOzbg">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >    <span style="color: #000000;">
Modifica (actualiza) una <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> de un recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a>. Actualmente solo se pueden realizar las siguientes modificaciones:    </span>
    </p>
<ul class=" "><li class=" ">    <p  >    <span style="color: #000000;">
Proporcionar (o sustituir) el certificado del firmante respetando el resto de par&aacute;metros que ya tenga la definici&oacute;n de firma.     <span style="color: #000000;">
Es decir, proporcionar el valor     </span>
    <span style="color: #000000;">
de la propiedad     </span>
<tt class=" ">parameters.certificate</tt> de     <span style="color: #000000;">
la definici&oacute;n de firma.    </span>
    </span>
    </p>
</li><li class=" ">    <p  >    <span style="color: #000000;">
    <span style="color: #000000;">
Proporcionar     </span>
los par&aacute;metros de la definici&oacute;n de firma, sustituyendo en su totalidad (si es el caso) el conjunto de par&aacute;metros que ya tenga dicha definici&oacute;n. Es decir, proporcionar el valor de    </span>
    <span style="color: #000000;">
 la propiedad     </span>
<tt class=" ">parameters</tt> de     <span style="color: #000000;">
la definici&oacute;n de firma.    </span>
    </p>
</li><li class=" ">    <p  >    <span style="color: #000000;">
Proporcionar la f    </span>
    <span style="color: #000000;">
irma digital (PKCS #1) del documento al que se aplica la definici&oacute;n de firma.     <span style="color: #000000;">
Es decir, proporcionar el valor     </span>
    <span style="color: #000000;">
que de la propiedad <tt class=" ">signature</tt>     </span>
    <span style="color: #000000;">
de     </span>
    <span style="color: #000000;">
la definici&oacute;n de firma.    </span>
    </span>
    </p>
</li><li class=" ">    <p  >    <span style="color: #000000;">
    <span style="color: #000000;">
    <span style="color: #000000;">
Proporcionar el sello de tiempo de la firma que corresponde a la definici&oacute;n de firma.    </span>
    </span>
    </span>
    </p>
</li></ul>    <p  >Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
    </div>
    <div class="section section-6" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLVBldGljacOzbg">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">PATCH /trustedx-resources/esignsp/v2/documents/{doc_and_sigdefs_id}/signers/{signature_definition_id}</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLVBhcsOhbWV0cm9z">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">doc_and_sigdefs_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> que contiene la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que se quiere actualizar.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_definition_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que se quiere actualizar.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUF1dG9yaXphY2nDs24">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >La aplicaci&oacute;n cliente deber&aacute; obtener el <i class=" ">token</i> de acceso requerido mediante una interacci&oacute;n OAuth 2.0 de tipo <i class=" ">Client Credentials Grant</i> con la plataforma.    </p>
    </div>
    <div class="section section-7" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUNhYmVjZXJhQ29udGVudC1UeXBl">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUN1ZXJwbw">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >    <span style="color: #000000;">
Contiene un objeto JSON con la siguiente estructura:    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    "parameters" : {Parameters},</code></div>
<div class="line"><code class="plain">    "signature" : {string},</code></div>
<div class="line"><code class="plain">    "timestamps" : [{string}]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  >    <span style="color: #000000;">
Las propiedades <tt class=" ">parameters, </tt><tt class=" ">signature</tt> y <tt class=" ">timestamps</tt> son mutuamente excluyentes y siempre tiene que estar presente una de ellas.    </span>
    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">parameters</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Caracter&iacute;sticas con las que se extiende y/o cambia lo que establece la pol&iacute;tica de firma de la definici&oacute;n de firma. Esta propiedad es opcional, pero tiene que estar presente siempre que no lo est&eacute;n la propiedad <tt class=" ">signature</tt> y la propiedad <tt class=" ">timestamps.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Firma digital (PKCS #1) del documento al que se aplica la definici&oacute;n de firma, codificada en base64. Esta propiedad es opcional, pero tiene que estar presente siempre que no lo est&eacute;n la propiedad <tt class=" ">parameters</tt> y la propiedad <tt class=" ">timestamps.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">timestamps[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Sellos de tiempo de la firma codificados en base64 (actualmente solo se permite indicar un sello de tiempo). Esta propiedad es opcional, pero tiene que estar presente siempre que no lo est&eacute;n la propiedad <tt class=" ">parameters</tt> y la propiedad <tt class=" ">signature</tt>    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain" /></div>
</div>
    </div>
    <p  ><tt class="text plain ">Content-Type: application/json</tt><br/><tt class="text spaces "> </tt><br/><tt class="text plain ">{</tt><br/><tt class="text spaces "> </tt><tt class="text plain ">&quot;timestamps&quot; : [</tt><br/><tt class="text spaces "> </tt><tt class="text plain ">{</tt><br/><tt class="text spaces "> </tt><tt class="text plain ">&quot;type&quot; : &quot;rfc3161_timestamp_token&quot;,</tt><br/><tt class="text spaces "> </tt><tt class="text plain ">&quot;timestamp&quot; : &quot;MAAFADSFASDFASDF...=&quot;</tt><br/><tt class="text spaces "> </tt><tt class="text plain ">}</tt><br/><tt class="text plain ">}</tt>    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLVJlc3B1ZXN0YQ">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLVN0YXR1cy1MaW5l">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Valor    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 204 No Content</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >La <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> se ha actualizado con &eacute;xito y la respuesta no tiene cuerpo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 409 Conflict</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Se ha intentado actualizar una <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> para la que ya se hab&iacute;a obtenido el <i class=" ">hash </i>del documento al que se aplica.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Otros    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >V&eacute;anse todos los casos posibles en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240710_safe-id-VFhfRUlEQVNfNC4xLjQuMC1BY3R1YWxpemFydW5hZGVmaW5pY2nDs25kZWZpcm1hLUN1ZXJwby4x">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Si la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> se actualiza con &eacute;xito, la respuesta no tendr&aacute; cuerpo. En caso contrario, s&iacute; lo tendr&aacute; y contendr&aacute; un objeto JSON que describa el error.    </p>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240711">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1BbGlhcw">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1EZXNjcmlwY2nDs24">Descripci&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1Db21wb3J0YW1pZW50b2FudGVsYWZhbHRhZGVwYXLDoW1ldHJvc2VubGFkZWZpbmljacOzbmRlZmlybWE">Comportamiento ante la falta de par&aacute;metros en la definici&oacute;n de firma</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1QZXRpY2nDs24">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1QYXLDoW1ldHJvcw">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1BdXRvcml6YWNpw7Nu">Autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZQ">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DdWVycG8">Cuerpo</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1SZXNwdWVzdGE">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1TdGF0dXMtTGluZQ">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZS4x">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DdWVycG8uMQ">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1BbGlhcw">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">DocumentSignerToBeSignedCalculation</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1EZXNjcmlwY2nDs24">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >    <span style="color: #000000;">
Obtiene el <i class=" ">hash </i>de un documento seg&uacute;n una <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> y modifica &eacute;sta con la informaci&oacute;n de dicho <i class=" ">hash</i>     <span style="color: #000000;">
(propiedad     </span>
    </span>
<tt class=" ">to_be_signed</tt>).    <span style="color: #000000;">
 De manera opcional, puede modificar los par&aacute;metros de la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> antes de obtener el <i class=" ">hash</i>    </span>
    <span style="color: #000000;">
. Actualmente solo permite realizar las siguientes modificaciones:    </span>
    </p>
<ul class=" "><li class=" ">    <p  >    <span style="color: #000000;">
Proporcionar (o sustituir) el certificado del firmante respetando el resto de par&aacute;metros que ya tenga la definici&oacute;n de firma.     </span>
    <span style="color: #000000;">
Es decir, proporcionar el valor     </span>
    <span style="color: #000000;">
de la propiedad     </span>
<tt class=" ">parameters.certificate</tt>    <span style="color: #000000;">
 de     </span>
    <span style="color: #000000;">
la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>.    </span>
    </p>
</li><li class=" ">    <p  >    <span style="color: #000000;">
Proporcionar los par&aacute;metros de la definici&oacute;n de firma, sustituyendo en su totalidad (si es el caso) el conjunto de par&aacute;metros que ya tenga dicha definici&oacute;n. Es decir, proporcionar el valor de    </span>
    <span style="color: #000000;">
 la propiedad     </span>
<tt class=" ">parameters</tt> de     <span style="color: #000000;">
la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>.    </span>
    <span style="color: #000000;">
    </span>
    </p>
</li></ul>    <p  >Error rendering macro 'panel' : com.atlassian.renderer.v2.macro.basic.validator.MacroParameterValidationException: Color value is invalid    </p>
    <div class="section section-7" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1Db21wb3J0YW1pZW50b2FudGVsYWZhbHRhZGVwYXLDoW1ldHJvc2VubGFkZWZpbmljacOzbmRlZmlybWE">
        <h7 class="heading "><span>Comportamiento ante la falta de par&aacute;metros en la definici&oacute;n de firma</span></h7>
    <p  >Si bien es posible crear una definici&oacute;n de firma que carezca de la propiedad <tt class=" ">parameters</tt>, dicha propiedad es necesaria para poder calcular el <i class=" ">hash</i> de los datos que se quieren firmar. Por eso, si en el momento de ejectuar esta operaci&oacute;n, la definici&oacute;n de firma carecece de la propiedad <tt class=" ">parameters</tt> &eacute;sta deber&aacute; proporcionarse en el <a   href="#src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DdWVycG8">Cuerpo</a>.    </p>
    <p  >Distinguimos el caso en el que la definici&oacute;n de firma corresponde a una firma PAdES, del caso en el que corresponde a una firma XMLDSig/XAdES.    </p>
    <div class="section section-8" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1GYWx0YWRlcGFyw6FtZXRyb3NlbnVuYWRlZmluaWNpw7NuZGVmaXJtYVBBZEVT">
        <h8 class="heading "><span>Falta de par&aacute;metros en una definici&oacute;n de firma PAdES</span></h8>
    <p  >    <span style="color: #333333;">
Cuando se ejecuta esta operaci&oacute;n sobre una definici&oacute;n de firma que se aplica a un documento PDF, se crean dentro del documento PDF (y se inicializan) las estructuras de datos necesarias para contener la informaci&oacute;n de la firma (principalmente, el diccionario de firma). Si en ese momento la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> carece de algunas propiedades de <tt class=" ">parameters</tt>, estas estructuras ser&aacute;n informadas de modo que correspondan a una firma PAdES-Basic de ETSI (ETSI TS 102 778-2) sin apariencia y en cuya obtenci&oacute;n se emplea el algoritmo SHA-256. Se informar&aacute;, adem&aacute;s, que se trata de una firma ordinaria (no de certificaci&oacute;n) y se reservar&aacute; (dentro del diccionario de firma) un espacio de 12228 bytes para poner la firma electr&oacute;nica propiamente dicha.    </span>
    </p>
    <p  >Por otro lado, si la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> contiene par&aacute;metros (i.e. tiene la propiedad <tt class=" ">parameters</tt>), las estructuras de datos del PDF ser&aacute;n informadas sin tener en cuenta los parametros opcionales que no est&eacute;n presentes, exceptuando los siguientes casos:    </p>
<ul class=" "><li class=" ">    <p  >    <span style="color: #333333;">
Si la propiedad <tt class=" ">estimated_signature_size</tt> no est&aacute; presente, se tomar&aacute; el valor 12288 por defecto.    </span>
    </p>
</li><li class=" ">    <p  >    <span style="color: #333333;">
Si la propiead <tt class=" ">certification_level</tt> no est&aacute; presente, se tomar&aacute; el valor 0 por defecto. En consecuencia, la firma ser&aacute; ordinaria (no ser&aacute; una firma de certificaci&oacute;n).    </span>
    </p>
</li><li class=" ">    <p  >    <span style="color: #333333;">
Si la propiedad <tt class=" ">appearance.signature_details</tt> est&aacute; presente pero no lo est&aacute; la propiedad     </span>
    <span style="color: #333333;">
<tt class=" ">appearance.signature_details.font.style</tt>, se tomar&aacute; el valor     </span>
<tt class=" ">&quot;normal&quot;</tt> por defecto     <span style="color: #333333;">
. En consecuencia, el estilo de la fuente que se utilice en la apariencia de la firma ser&aacute; normal.    </span>
    </p>
</li><li class=" ">    <p  >Si la propiedad <tt class=" ">appearance.signature_details</tt> est&aacute; presente pero no lo est&aacute; la propiedad <tt class=" ">appearance.signature_details.</tt><tt class=" ">font.color</tt>, se tomar&aacute; el valor <tt class=" ">{r=0; g=0; b=0}</tt> por defecto. En consecuencia, el color de la fuente que se utilice en la apariencia de la firma ser&aacute; negro.    </p>
</li><li class=" ">    <p  >Si la propiedad <tt class=" ">appearance.signature_details</tt> est&aacute; presente pero no lo est&aacute; la propiedad <tt class=" ">appearance.signature_details.</tt><tt class=" ">font.encoding</tt>, se tomar&aacute; el valor <tt class=" ">&quot;latin1&quot;</tt> por defecto. En consecuencia, el c&oacute;digo de caracteres que se utilice en la apariencia de la firma ser&aacute; ISO-8859-1 (Latin 1).    </p>
</li><li class=" ">    <p  >Si la propiedad <tt class=" ">appearance.signature_details</tt> est&aacute; presente pero no lo est&aacute; la propiedad <tt class=" ">appearance.signature_details.font.embed</tt>, se tomar&aacute; el valor <tt class=" ">true</tt> por defecto. En consecuencia, la fuente que se utilice en la apariencia de la firma se incluir&aacute; en el documento PDF.    </p>
</li><li class=" ">    <p  >Si la propiedad <tt class=" ">appearance.signature_details</tt> est&aacute; presente, uno de los elementos del <i class=" ">array</i><tt class=" ">appearance.signature_details.</tt><tt class=" ">details[]</tt> es de tipo <tt class=" ">date</tt> y la definici&oacute;n de firma no especifica la propiedad <tt class=" ">timezone</tt> para dicho elemento<tt class=" ">,</tt> se tomar&aacute; la zona horaria de la plataformaTrustedX eIDAS por defecto.    </p>
</li><li class=" ">    <p  >Si la propiedad <tt class=" ">appearance.signature_details</tt> est&aacute; presente, uno de los elementos del <i class=" ">array</i><tt class=" ">appearance.signature_details.</tt><tt class=" ">details[]</tt> es de tipo <tt class=" ">date</tt> y la definici&oacute;n de firma no especifica la propiedad <tt class=" ">format</tt> para dicho elemento<tt class=" ">,</tt> se tomar&aacute; el valor <tt class=" ">&quot;yyyy.MM.dd hh:mm:ss XXX&quot;</tt> por defecto.    </p>
</li></ul>    </div>
    <div class="section section-8" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1GYWx0YWRlcGFyw6FtZXRyb3NlbnVuZGVmaW5pY2nDs25kZWZpcm1hWE1MRFNpZy9YQWRFUw">
        <h8 class="heading "><span>Falta de par&aacute;metros en un definici&oacute;n de firma XMLDSig/XAdES</span></h8>
    <p  >Cuando se ejecuta esta operaci&oacute;n sobre una <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que corresponde a una firma XMLDSig/XAdES, la obligatoriedad u opcionalidad de las distintas propiedades de <tt class=" ">parameters</tt> y, en su caso, los valores por defecto que toman las propiedades opcionales depender&aacute;n de la posici&oacute;n de la firma respecto a los datos firmados que indique la propiedad obligatoria <tt class=" ">signature_target.signature_packaging.</tt>    </p>
<ul class=" "><li class=" ">    <p  >Si la definici&oacute;n de firma corresponde a una firma <i class=" ">detached </i>y solo est&aacute; presente la propiedad <tt class=" ">type</tt> (que es obligatoria), se generar&aacute; una firma <i class=" ">externally detached</i> del documento (de cualquier tipo) al que se aplica la definici&oacute;n de firma. La firma se pondr&aacute; en un documento distinto y referenciar&aacute; al documento firmado con una URI de la forma <tt class=" ">&quot;file:///&lt;docname&gt;&quot;</tt>, siendo <tt class=" ">&lt;docname&gt;</tt> el nombre del documento en cuesti&oacute;n.    </p>
</li><li class=" ">    <p  >Si la definici&oacute;n de firma corresponde a una firma <i class=" ">enveloped </i>y solo est&aacute; presente la propiedad <tt class=" ">type</tt> (que es obligatoria), se generar&aacute; una firma del documento XML al que se aplica la definici&oacute;n de firma y dicha firma se a&ntilde;adir&aacute; a dicho documento como el &uacute;ltimo nodo hijo del nodo ra&iacute;z.    </p>
</li></ul>    </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1QZXRpY2nDs24">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">PUT /trustedx-resources/esignsp/v2/documents/{doc_and_sigdefs_id}/signers/{signature_definition_id}/to_be_signed</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1QYXLDoW1ldHJvcw">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">doc_and_sigdefs_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> que contiene la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que se aplica para obtener el <i class=" ">hash</i>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_definition_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que se aplica para obtener el <i class=" ">hash</i>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1BdXRvcml6YWNpw7Nu">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >La aplicaci&oacute;n cliente deber&aacute; obtener el <i class=" ">token</i> de acceso requerido mediante una interacci&oacute;n OAuth 2.0 de tipo <i class=" ">Client Credentials Grant</i> con la plataforma.    </p>
    </div>
    <div class="section section-7" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZQ">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <p  >En el caso de que antes de obtener el <i class=" ">hash</i> se quiera modificar la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que se tiene que aplicar (e.g. para pasar el certificado del firmante), la petici&oacute;n deber&aacute; incluir la siguiente cabecera <tt class=" ">Content-Type:</tt>    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DdWVycG8">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >En el caso de que antes de obtener el <i class=" ">hash</i> se quiera modificar la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que se tiene que aplicar (e.g. para pasar el certificado del firmante), el cuerpo de la petici&oacute;n deber&aacute; incluir el siguiente     <span style="color: #000000;">
objeto JSON:    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    "parameters" : {Parameters}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">parameters</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio si la petici&oacute;n tiene cuerpo    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Caracter&iacute;sticas con las que se extiende y/o cambia lo que establece la pol&iacute;tica de firma de la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1SZXNwdWVzdGE">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1TdGF0dXMtTGluZQ">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Valor    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 200 OK</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >    <span style="color: #000000;">
El c&aacute;lculo del <i class=" ">hash</i> se ha realizado correctamente y los datos del mismo est&aacute;n en el cuerpo de la respuesta.    </span>
    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 409 Conflict</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Se ha intentado obtener el <i class=" ">hash</i> seg&uacute;n una <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> que ya se hab&iacute;a utilizado para obtener el <i class=" ">hash </i>del documento al que se aplica. Es decir, se ha intentado obtener el mismo <i class=" ">hash</i> por segunda vez.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Otros    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >V&eacute;anse todos los casos posibles en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZS4x">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240711_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmRvY3VtZW50b3NlZ8O6bnVuYWRlZmluaWNpw7NuZGVmaXJtYS1DdWVycG8uMQ">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Si el c&aacute;lculo de <i class=" ">hash</i> se realiza con &eacute;xito, el cuerpo contendr&aacute;     <span style="color: #000000;">
el siguiente objeto JSON:    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
<div class="line"><code class="plain">   </code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    "timestamps" : [</code></div>
<div class="line"><code class="plain">        {</code></div>
<div class="line"><code class="plain">            "type" : "rfc3161_timestamp_token",</code></div>
<div class="line"><code class="plain">            "timestamp" : "MAAFADSFASDFASDF...="</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Siempre tiene el valor <tt class=" ">&quot;x509&quot;.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de <i class=" ">hash</i>. El valor de esta propiedad puede ser <tt class=" ">sha1</tt>, <tt class=" ">sha256,</tt> <tt class=" ">sha384</tt> o <tt class=" ">sha512.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> del documento y de los atributos que se firman seg&uacute;n la definici&oacute;n de firma.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240712">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener el hash de una firma para solicitar un sello de tiempo</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240712_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmFmaXJtYXBhcmFzb2xpY2l0YXJ1bnNlbGxvZGV0aWVtcG8tRGVzY3JpcGNpw7Nu">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240712_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmFmaXJtYXBhcmFzb2xpY2l0YXJ1bnNlbGxvZGV0aWVtcG8tUGV0aWNpw7Nu">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240712_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmFmaXJtYXBhcmFzb2xpY2l0YXJ1bnNlbGxvZGV0aWVtcG8tUGFyw6FtZXRyb3M">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240712_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmFmaXJtYXBhcmFzb2xpY2l0YXJ1bnNlbGxvZGV0aWVtcG8tQXV0b3JpemFjacOzbg">Autorizaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-CabeceraContent-Type">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Cuerpo">Cuerpo</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-CabeceraContent-Type.1">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Cuerpo.1">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">DocumentSignerToBeTimeStampedCalculation</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240712_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmFmaXJtYXBhcmFzb2xpY2l0YXJ1bnNlbGxvZGV0aWVtcG8tRGVzY3JpcGNpw7Nu">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >    <span style="color: #000000;">
Obtiene el     </span>
<i class=" ">hash </i>    <span style="color: #000000;">
de una firma que se realiza seg&uacute;n una     </span>
<a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>    <span style="color: #000000;">
     </span>
    <span style="color: #000000;">
y modifica &eacute;sta    </span>
    <span style="color: #000000;">
     </span>
    <span style="color: #000000;">
con la informaci&oacute;n     </span>
    <span style="color: #000000;">
del <i class=" ">hash</i> (propiedad     </span>
<tt class=" ">to_be_timestamped).</tt>    <span style="color: #000000;">
 Antes de realizar esta actualizaci&oacute;n, modifica     </span>
    <span style="color: #000000;">
la     </span>
<a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a>    <span style="color: #000000;">
 con la firma digital (PKCS #1) del documento al que se aplica la definici&oacute;n.    </span>
    </p>
    <p  >    <span style="color: #000000;">
El <i class=" ">hash</i> de la firma se obtiene utilizando el algoritmo que indica el atributo <tt class=" ">parameters.default_digest_algorithm</tt> de la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> de la firma o, en su defecto, el algoritmo SHA-256.    </span>
    </p>
    <p  >    <span style="color: #000000;">
El     </span>
<i class=" ">hash</i>    <span style="color: #000000;">
 que se obtiene por medio de esta operaci&oacute;n debe utlizarse para solicitar un sello de tiempo de la firma.    </span>
    </p>
    </div>
    <div class="section section-6" id="src-96240712_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmFmaXJtYXBhcmFzb2xpY2l0YXJ1bnNlbGxvZGV0aWVtcG8tUGV0aWNpw7Nu">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">PUT /trustedx-resources/esignsp/v2/documents/{doc_and_sigdefs_id}/signers/{signature_definition_id}/to_be_timestamped</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240712_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmFmaXJtYXBhcmFzb2xpY2l0YXJ1bnNlbGxvZGV0aWVtcG8tUGFyw6FtZXRyb3M">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">doc_and_sigdefs_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del recurso <a   href="#src-96240699">TX_EIDAS_4.1.4.0 - Documento y definiciones de firmas</a> que contiene la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> de la firma de la que se solicita el <i class=" ">hash</i>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_definition_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la <a   href="#src-96240700">TX_EIDAS_4.1.4.0 - Definici&oacute;n de firma</a> de la firma de la que se solicita el <i class=" ">hash</i>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240712_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxoYXNoZGV1bmFmaXJtYXBhcmFzb2xpY2l0YXJ1bnNlbGxvZGV0aWVtcG8tQXV0b3JpemFjacOzbg">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de la plataforma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:process:document</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> de acceso debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >La aplicaci&oacute;n cliente deber&aacute; obtener el <i class=" ">token</i> de acceso requerido mediante una interacci&oacute;n OAuth 2.0 de tipo <i class=" ">Client Credentials Grant</i> con la plataforma.    </p>
    </div>
    <div class="section section-7" id="src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-CabeceraContent-Type">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >El cuerpo de la petici&oacute;n debe incluir el siguiente     <span style="color: #000000;">
objeto JSON:    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"signature" : {string}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Codificaci&oacute;n en base64 de la firma digital (PKCS #1) correspondiente a la firma de la que se solicita el <i class=" ">hash</i>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Valor    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 200 OK</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >    <span style="color: #000000;">
El c&aacute;lculo del <i class=" ">hash</i> de la firma se ha realizado correctamente y los datos del mismo est&aacute;n en el cuerpo de la respuesta.    </span>
    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 409 Conflict</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Se ha intentado obtener el <i class=" ">hash</i> de una firma que ya se hab&iacute;a obtenido anteriormente o que ya se hab&iacute;a actualizado con la firma digital    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Otros    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >V&eacute;anse todos los casos posibles en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a>.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-CabeceraContent-Type.1">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240712_TX_EIDAS_4.1.4.0-Obtenerelhashdeunafirmaparasolicitarunsellodetiempo-Cuerpo.1">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Si el c&aacute;lculo de <i class=" ">hash</i> se realiza con &eacute;xito, el cuerpo contendr&aacute;     <span style="color: #000000;">
el siguiente objeto JSON:    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"type" : "message_imprint",    </code></div>
<div class="line"><code class="plain">	"digest_algorithm" : {string},    </code></div>
<div class="line"><code class="plain">	"digest_value" : {string}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Siempre tiene el valor <tt class=" ">&quot;message_imprint</tt>&quot;.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de <i class=" ">hash</i>. El valor de esta propiedad puede ser <tt class=" ">sha1</tt>, <tt class=" ">sha256,</tt> <tt class=" ">sha384</tt> o <tt class=" ">sha512.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de la firma realizada seg&uacute;n la definici&oacute;n de firma.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    </div>
    <div class="section section-4" id="src-96240713">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de firma de documentos - Autorizaci&oacute;n</span></h4>
    <p  >    </p>
    <p  >La siguiente tabla contiene las operaciones de las que consta la API de firma de documentos. Para cada una de ellas se indica el valor que deber&aacute; contener el <i class=" ">scope</i> del <i class=" ">token</i> de acceso que se ponga en el mensaje de petici&oacute;n de la operaci&oacute;n para que la aplicaci&oacute;n solicitante pueda realizar la operaci&oacute;n. Esta indicaci&oacute;n se realiza poniendo el tipo de flujo OAuth mediante el que deber&aacute; obtenerse el <i class=" ">token</i> de acceso en cuesti&oacute;n (ACG se refiere a los flujos <i class=" ">Authorization Code Grant</i> y CCG a los <i class=" ">Client Credentials Grant</i>).    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Operaci&oacute;n \ Scope    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >urn:safelayer:eidas:sign:process:document    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240702">TX_EIDAS_4.1.4.0 - Crear un proceso de firma de documentos</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240706">TX_EIDAS_4.1.4.0 - Obtener un documento</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240708">TX_EIDAS_4.1.4.0 - Eliminar un proceso de firma de documentos</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240703">TX_EIDAS_4.1.4.0 - Crear un recurso Documento y definiciones de firmas</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240709">TX_EIDAS_4.1.4.0 - Crear una definici&oacute;n de firma</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >CCG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240710">TX_EIDAS_4.1.4.0 - Actualizar una definici&oacute;n de firma</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >CCG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240711">TX_EIDAS_4.1.4.0 - Obtener el hash de un documento seg&uacute;n una definici&oacute;n de firma</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >CCG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240712">TX_EIDAS_4.1.4.0 - Obtener el hash de una firma para solicitar un sello de tiempo</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >CCG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240707">TX_EIDAS_4.1.4.0 - Eliminar un recurso Documento y definiciones de firmas</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >CCG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240705">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de documentos firmados</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-3" id="src-96240719">
        <h3 class="heading "><span>TX_EIDAS_4.1.4.0 - API de firma digital</span></h3>
    <p  >    </p>
    <p  >La API de firma digital sirve para generar firmas digitales (PKCS #1) con las identidades de firma (en servidor o en m&oacute;vil) que gestiona la plataforma. Normalmente las aplicaciones no tendr&aacute;n que utilizar esta API ya que, en la la mayor&iacute;a de los casos, la generaci&oacute;n de una firma digital tendr&aacute; lugar en el contexto de realizar una firma electr&oacute;nica avanzada y esta firma podr&aacute; solicitarse a TrustedX a trav&eacute;s de la <a   href="#src-96240696">TX_EIDAS_4.1.4.0 - API de firma de documentos</a>. As&iacute; pues, si una aplicaci&oacute;n necesita realizar una firma electr&oacute;nica avanzada, utilizar&aacute; la <a   href="#src-96240696">TX_EIDAS_4.1.4.0 - API de firma de documentos</a> de TrustedX eIDAS con este prop&oacute;sito y ser&aacute; esta API la que, a su vez, utilice internamente la API de firma digital.    </p>
    <p  >Puede obtener informaci&oacute;n sobre los recursos, operaciones y casos de uso de esta API en los siguientes enlaces:    </p>
    <p  >    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240720">TX_EIDAS_4.1.4.0 - API de firma digital - Recursos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240722">TX_EIDAS_4.1.4.0 - API de firma digital - Operaciones</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240730">TX_EIDAS_4.1.4.0 - API de firma digital - Autorizaci&oacute;n</a>    </p>
</li></ul>    <p  >    </p>
    <div class="section section-4" id="src-96240720">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de firma digital - Recursos</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240721">TX_EIDAS_4.1.4.0 - Proceso de creaci&oacute;n de firma</a>    </p>
</li></ul>    <p  >    </p>
    <div class="section section-5" id="src-96240721">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Proceso de creaci&oacute;n de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVVSSQ">URI</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLURlc2NyaXBjacOzbg">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVJlcHJlc2VudGFjacOzbg">Representaci&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVByb3BpZWRhZGlucHV0">Propiedad input</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLXNpZ25faWRlbnRpdHlfc2VsZWN0b3JzX2RldGFpbHNfcHJvcGVydHlQcm9waWVkYWRzaWduX2lkZW50aXR5X3NlbGVjdG9yc1tdLmRldGFpbHM">Propiedad sign_identity_selectors[].details</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVByb3BpZWRhZHJlc3VsdC5kZXZpY2VfdHlwZQ">Propiedad result.device_type</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLU9wZXJhY2lvbmVz">Operaciones</a>    </p>
</li></ul>    <div class="section section-6" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVVSSQ">
        <h6 class="heading "><span>URI</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">/trustedx-resources/esigp/v1/signatures/{signature_id}</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLURlc2NyaXBjacOzbg">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Recurso que contiene informaci&oacute;n sobre un proceso de creaci&oacute;n de firma que se realiza con un dispositivo m&oacute;vil.    </p>
    </div>
    <div class="section section-6" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVJlcHJlc2VudGFjacOzbg">
        <h6 class="heading "><span>Representaci&oacute;n</span></h6>
    <p  >Un proceso de creaci&oacute;n de firma se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"id" : {string},    </code></div>
<div class="line"><code class="plain">	"self" : {string},    </code></div>
<div class="line"><code class="plain">	"input" : {InputData},    </code></div>
<div class="line"><code class="plain">	"operation_type" : {string},    </code></div>
<div class="line"><code class="plain">	"creation_time" : {string},    </code></div>
<div class="line"><code class="plain">	"sign_identity_selectors" : [ {        </code></div>
<div class="line"><code class="plain">		"labels" : [ {string} ],        </code></div>
<div class="line"><code class="plain">		"device_id" : {string},        </code></div>
<div class="line"><code class="plain">		"type" : {string},        </code></div>
<div class="line"><code class="plain">		"details" : {SignIdentitySelectorDetails}    </code></div>
<div class="line"><code class="plain">	} ],    </code></div>
<div class="line"><code class="plain">	"device_configuration_url" : {string},    </code></div>
<div class="line"><code class="plain">	"domain" : {string},    </code></div>
<div class="line"><code class="plain">	"service" : {        </code></div>
<div class="line"><code class="plain">		"id" : {string},        </code></div>
<div class="line"><code class="plain">		"name" : {string},        </code></div>
<div class="line"><code class="plain">		"domain" : {string}    </code></div>
<div class="line"><code class="plain">	},    </code></div>
<div class="line"><code class="plain">	"result" : {        </code></div>
<div class="line"><code class="plain">		"status" : {string},        </code></div>
<div class="line"><code class="plain">		"value" : {string},        </code></div>
<div class="line"><code class="plain">		"signature_algorithm" : {string},        </code></div>
<div class="line"><code class="plain">		"sign_identity" : {SignIdentity},        </code></div>
<div class="line"><code class="plain">		"device_type" : {DeviceType}     </code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	"links" : {        </code></div>
<div class="line"><code class="plain">		"finish" : {string},        </code></div>
<div class="line"><code class="plain">		"fail" : {string},        </code></div>
<div class="line"><code class="plain">		"cancel" : {string}    </code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del proceso de creaci&oacute;n de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">self</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL de acceso al recurso.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">input</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre los datos que se firman. V&eacute;ase <a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVByb3BpZWRhZGlucHV0">propiedad <tt class=" ">input</tt></a>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">operation_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de firma que crea el proceso:    </p>
<ul class=" "><li class=" ">    <p  >Firma raw: <tt class=" ">sign:raw</tt>    </p>
</li><li class=" ">    <p  >Firma de una transacci&oacute;n: <tt class=" ">sign:commitment:transaction</tt>    </p>
</li><li class=" ">    <p  >Firma de un documento: <tt class=" ">sign:commitment:document</tt>    </p>
</li><li class=" ">    <p  >Firma de autenticaci&oacute;n de un usuario: <tt class=" ">authentication</tt>    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">creation_time</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Instante de inicio del proceso expresado en el formato <tt class=" ">date-time</tt> de <a  class="external-link" href="https://tools.ietf.org/html/rfc3339">RFC 3339</a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">domain</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Dominio del usuario que firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identity_selectors[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Selectores de identidad de firma. La identidad de firma que se utilice para crear la firma deber&aacute; cumplir las condiciones de alguno de los selectores especificados.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identity_selectors[].labels[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Etiquetas que la identidad de firma debe tener seg&uacute;n un selector.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identity_selectors[].details</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional y contiene condiciones que la identidad de firma debe cumplir seg&uacute;n un selector, que s&oacute;lo son aplicables a las identidades de firma de un determinado tipo. V&eacute;ase <a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLXNpZ25faWRlbnRpdHlfc2VsZWN0b3JzX2RldGFpbHNfcHJvcGVydHk">propiedad <tt class=" ">sign_identity_selectors[].details</tt> </a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identity_selectors[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional (obligatoria si existe la propiedad <tt class=" ">sign_identity_selectors[].details</tt>) y contiene el tipo del que tiene que ser la identidad de firma seg&uacute;n un selector.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identity_selectors[].device_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional (obligatoria si existe la propiedad <tt class=" ">sign_identity_selectors[].details)</tt> y contiene el identificador del dispositivo en el que seg&uacute;n un selector debe estar la parte privada de las claves asociadas a la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_configuration_url</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Plantilla de la URL en la que el dispositivo puede acceder a datos de configuraci&oacute;n espec&iacute;ficos para la creaci&oacute;n de firmas (e.g. la pol&iacute;tica de firma).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Servicio que solicita la creaci&oacute;n de la firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del servicio.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.name</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nombre del servicio.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.domain</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Dominio del servicio.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">result</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Resultado del proceso de creaci&oacute;n de firma. Esta propiedad s&oacute;lo existe en los procesos de creaci&oacute;n de firma que hayan finalizado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">result.status</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Estado en que ha finalizado el proceso de creaci&oacute;n de firma (<tt class=" ">finished</tt>, <tt class=" ">failed</tt> o <tt class=" ">canceled)</tt>:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">finished</tt>: El proceso ha terminado despu&eacute;s de crear la firma con &eacute;xito.    </p>
</li><li class=" ">    <p  ><tt class=" ">failed</tt>: El proceso ha terminado sin poder crear la firma porque se ha producido un error.    </p>
</li><li class=" ">    <p  ><tt class=" ">canceled</tt>: El proceso ha terminado sin poder crear la firma porque ha sido cancelado.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">result.value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Valor devuelto por el proceso de creaci&oacute;n de firma. Este valor depende del estado en el que haya finalizado el proceso:    </p>
<ul class=" "><li class=" ">    <p  >Si el proceso ha terminado en estado <tt class=" ">finished</tt>: firma que se haya creado codificada en base64.    </p>
</li><li class=" ">    <p  >Si el proceso ha terminado en estado <tt class=" ">failed</tt>: informaci&oacute;n sobre el error que se haya producido (puede no haber ninguna informaci&oacute;n).    </p>
</li><li class=" ">    <p  >Si el proceso ha terminado en estado <tt class=" ">canceled</tt>: informaci&oacute;n sobre la cancelaci&oacute;n que se haya producido (puede no haber ninguna informaci&oacute;n).    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">result.signature_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de firma utilizado en el proceso (<tt class=" ">rsa-sha1</tt>, <tt class=" ">rsa-sha256</tt>, <tt class=" ">rsa-sha384</tt>, <tt class=" ">rsa-sha512</tt>, <tt class=" ">ecdsa-sha1</tt>, <tt class=" ">ecdsa-sha256</tt>, <tt class=" ">ecdsa-sha384</tt> y <tt class=" ">ecdsa-sha512</tt>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">result.sign_identity</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240741">TX_EIDAS_4.1.4.0 - Identidad de firma</a> utilizada (aplicada) en el proceso.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">result.device_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre el tipo de dispositivo utilizado en el proceso. Esta propiedad s&oacute;lo existe en los procesos de creaci&oacute;n de firma que finalizan con &eacute;xito (<tt class=" ">finished</tt>). V&eacute;ase <a   href="#src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVByb3BpZWRhZHJlc3VsdC5kZXZpY2VfdHlwZQ">propiedad <tt class=" ">result.device_type</tt> </a>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">links</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URLs para terminar el proceso de firma. S&oacute;lo se permite el acceso a estas URL a los dispositivos en los que se encuentran las identidades de firma que seleccionan los selectores.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">links.finish</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL para finalizar el proceso de firma poniendo el valor de la firma generada en <tt class=" ">result.value </tt>y el valor <tt class=" ">finished </tt>en <tt class=" ">result.status.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">links.fail</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL para finalizar el proceso de firma poniendo informaci&oacute;n de error en <tt class=" ">result.value </tt>y el valor <tt class=" ">failed</tt> en <tt class=" ">result.status.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">links.cancel</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL para finalizar el proceso de firma poniendo informaci&oacute;n de cancelaci&oacute;n en <tt class=" ">result.value </tt>y el valor <tt class=" ">canceled</tt> en <tt class=" ">result.status.</tt>    </p>
    <p  >URL para finalizar el proceso en estado <tt class=" ">failed</tt>URL que responder&aacute; al verbo <tt class=" ">PUT</tt>. El cuerpo, opcional, contendr&aacute; informaci&oacute;n del error.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="section section-7" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVByb3BpZWRhZGlucHV0">
        <h7 class="heading "><span>Propiedad input</span></h7>
    <p  >La representaci&oacute;n de la propiedad <tt class=" ">input</tt> depende del tipo firma que se vaya a crear.    </p>
    <div class="section section-8" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLUZpcm1hZGV1bmRvY3VtZW50bw">
        <h8 class="heading "><span>Firma de un documento</span></h8>
    <p  >Cuando se tiene que crear la firma de un documento, la propiedad <tt class=" ">input</tt> se representa del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"service" : {        </code></div>
<div class="line"><code class="plain">		"id" : {string},        </code></div>
<div class="line"><code class="plain">		"name" : {string},        </code></div>
<div class="line"><code class="plain">		"domain" : {string}    </code></div>
<div class="line"><code class="plain">	},    </code></div>
<div class="line"><code class="plain">	"digest_url" : {string},    </code></div>
<div class="line"><code class="plain">	"digest_value" : {string},    </code></div>
<div class="line"><code class="plain">	"digest_algorithm" : {string},    </code></div>
<div class="line"><code class="plain">	"document_url" : {string},    </code></div>
<div class="line"><code class="plain">	"document_alias" : {string},    </code></div>
<div class="line"><code class="plain">	"root_certs" : [ {string} ],    </code></div>
<div class="line"><code class="plain">	"document_info" : {        </code></div>
<div class="line"><code class="plain">		"html" : {string}    </code></div>
<div class="line"><code class="plain">	} </code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Aplicaci&oacute;n cliente que solicita la creaci&oacute;n de la firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.name</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nombre de la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.domain</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Dominio de la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_url</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL que permite obtener tanto el <i class=" ">hash</i> a firmar codificado en base64 como el algoritmo de <i class=" ">hash</i> utilizado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> del documento que hay firmar codificado en base64.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo utilizado para calcular el <i class=" ">hash</i> del documento (<tt class=" ">sha1</tt>, <tt class=" ">sha256</tt>, <tt class=" ">sha384</tt> y <tt class=" ">sha512).</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">document_url</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL del documento que hay que firmar.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">document_alias</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Alias del documento que hay que firmar.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">root_certs</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Certificados codificados en base64 de las cadenas de certificaci&oacute;n de los servidores TLS de<tt class=" "> digest_url </tt>y<tt class=" "> document_url.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">document_info</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n adicional sobre el documento a firmar.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">document_info.html</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >HTML codificado en base64 con la informaci&oacute;n del documento a firmar que se mostrar&aacute; al usuario.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-8" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLUZpcm1hZGV1bmF0cmFuc2FjY2nDs24">
        <h8 class="heading "><span>Firma de una transacci&oacute;n</span></h8>
    <p  >    <span style="color: #3d3d3d;">
Cuando se tiene que crear la firma de     <span style="color: #3d3d3d;">
una transacci&oacute;n    </span>
, la propiedad <tt class=" ">input</tt> se representa del siguiente modo:    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"service" : {        </code></div>
<div class="line"><code class="plain">		"id" : {string},        </code></div>
<div class="line"><code class="plain">		"name" : {string},        </code></div>
<div class="line"><code class="plain">		"domain" : {string}    </code></div>
<div class="line"><code class="plain">	},    </code></div>
<div class="line"><code class="plain">	"data" : {string},    </code></div>
<div class="line"><code class="plain">	"digest_algorithm" : {string}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  >    <span style="color: #3d3d3d;">
<br/>    </span>
    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Aplicaci&oacute;n cliente que solicita la confirmaci&oacute;n de la transacci&oacute;n.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.name</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nombre de la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.domain</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Dominio de la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">data</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >HTML que se mostrar&aacute; al usuario para pedirle que confirme la transacci&oacute;n y que contiene los datos de la misma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional y contiene el algoritmo de <i class=" ">hash</i> que se tiene que utilizar para crear la firma (<tt class=" ">sha1</tt>, <tt class=" ">sha256</tt>, <tt class=" ">sha384</tt> y <tt class=" ">sha512)</tt>. Si no est&aacute; presente, el algoritmo que se utilizar&aacute; depender&aacute; del tipo de dispositivo con el que se cree la firma.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-8" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLUZpcm1hYsOhc2ljYQ">
        <h8 class="heading "><span>Firma b&aacute;sica</span></h8>
    <p  >    <span style="color: #3d3d3d;">
    <span style="color: #3d3d3d;">
Cuando se tiene que crear la firma     <span style="color: #3d3d3d;">
b&aacute;sica de unos datos    </span>
, la propiedad <tt class=" ">input</tt>     </span>
    <span style="color: #3d3d3d;">
se representa del siguiente modo:    </span>
    </span>
    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"service" : {        </code></div>
<div class="line"><code class="plain">		"id" : {string},        </code></div>
<div class="line"><code class="plain">		"name" : {string},        </code></div>
<div class="line"><code class="plain">		"domain" : {string}    </code></div>
<div class="line"><code class="plain">	},    </code></div>
<div class="line"><code class="plain">	"digest_url" : {string},    </code></div>
<div class="line"><code class="plain">	"digest_value" : {string},    </code></div>
<div class="line"><code class="plain">	"digest_algorithm" : {string},    </code></div>
<div class="line"><code class="plain">	"data_info" : {        </code></div>
<div class="line"><code class="plain">		"html" : {string}    </code></div>
<div class="line"><code class="plain">	},    </code></div>
<div class="line"><code class="plain">	"root_certs" : [ {string} ]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  >    <span style="color: #3d3d3d;">
<br/>    </span>
    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Aplicaci&oacute;n cliente que solicita la creaci&oacute;n de la firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.name</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Nombre de la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">service.domain</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Dominio de la aplicaci&oacute;n cliente.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_url</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL que permite obtener tanto el <i class=" ">hash</i> a firmar codificado en base64 como el algoritmo de <i class=" ">hash</i> utilizado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de los datos que hay firmar codificado en base64.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo utilizado para calcular el <i class=" ">hash</i> de los datos (<tt class=" ">sha1</tt>, <tt class=" ">sha256</tt>, <tt class=" ">sha384</tt> y <tt class=" ">sha512).</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">data_info</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de los datos a firmar.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">data_info.html</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >HTML codificado en base64 con la informaci&oacute;n de los datos a firmar que se mostrar&aacute; al usuario.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">root_certs</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Certificados codificados en base64 de la cadena de certificaci&oacute;n del servidor TLS de <tt class=" ">digest_url.</tt>    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-7" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLXNpZ25faWRlbnRpdHlfc2VsZWN0b3JzX2RldGFpbHNfcHJvcGVydHlQcm9waWVkYWRzaWduX2lkZW50aXR5X3NlbGVjdG9yc1tdLmRldGFpbHM">
        <h7 class="heading "><span id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLXNpZ25faWRlbnRpdHlfc2VsZWN0b3JzX2RldGFpbHNfcHJvcGVydHk" class="confluence-anchor-link"></span><span>Propiedad sign_identity_selectors[].details</span></h7>
    <p  >La propiedad <tt class=" ">sign_identity_selectors[].details</tt> contiene criterios de selecci&oacute;n de identidades de firma que solo son aplicables a las identidades de firma de un determinado tipo. Por lo tanto, su representaci&oacute;n depende del tipo identidad de firma en el que se quiere realizar la selecci&oacute;n.    </p>
    <div class="section section-8" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLUlkZW50aWRhZGRlZmlybWFkZXRpcG9wa2k6eDUwOQ">
        <h8 class="heading "><span>Identidad de firma de tipo pki:x509</span></h8>
    <p  >    <span style="color: #3d3d3d;">
Cuando se quiere seleccionar una identidad de firma de tipo <tt class=" ">pki_x509</tt>, la propiedad     </span>
<tt class=" ">sign_identity_selectors[].details</tt> se representa del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"certificate" : "&lt;certificate base64 encoded&gt;"</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">certificate</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Certificado asociado a la identidad de firma codificado en base64.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-7" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLVByb3BpZWRhZHJlc3VsdC5kZXZpY2VfdHlwZQ">
        <h7 class="heading "><span>Propiedad result.device_type</span></h7>
    <p  >La propiedad <tt class=" ">result.device_type</tt> contiene informaci&oacute;n sobre el tipo de dispositivo utilizado en el proceso y se representa del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"id" : {string},    </code></div>
<div class="line"><code class="plain">	"notifications_service_id" : {string},    </code></div>
<div class="line"><code class="plain">	"wakeup_uri_scheme" : {string},    </code></div>
<div class="line"><code class="plain">	"verification_policy" : {string},    </code></div>
<div class="line"><code class="plain">	"application" : {        </code></div>
<div class="line"><code class="plain">		"id" : {string},        </code></div>
<div class="line"><code class="plain">		"version" : {string}    </code></div>
<div class="line"><code class="plain">	},    </code></div>
<div class="line"><code class="plain">	"server_configuration" : {...}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">notifications_service_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del servicio de notificaciones que utiliza este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">wakeup_uri_scheme</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esquema de la URL que abre la aplicaci&oacute;n de firma (Mobile ID) en este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">verification_policy</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la pol&iacute;tica de verificaci&oacute;n que se utiliza para validar las firmas de autenticaci&oacute;n y de transacciones que se crean con este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">application</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de la aplicaci&oacute;n de firma (MobileID) instalada en este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">application.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la aplicaci&oacute;n de firma (MobileID) instalada en este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">version</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Versi&oacute;n de la aplicaci&oacute;n de firma (MobileID) instalada en este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">server_configuration</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Configuraci&oacute;n adicional de este tipo de dispositivo registrada en el servidor.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240721_safe-id-VFhfRUlEQVNfNC4xLjQuMC1Qcm9jZXNvZGVjcmVhY2nDs25kZWZpcm1hLU9wZXJhY2lvbmVz">
        <h6 class="heading "><span>Operaciones</span></h6>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240728">TX_EIDAS_4.1.4.0 - Obtener el resultado de un proceso de creaci&oacute;n de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240729">TX_EIDAS_4.1.4.0 - Eliminar un proceso de creaci&oacute;n de firma</a>    </p>
</li></ul>    <p  >    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-4" id="src-96240722">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de firma digital - Operaciones</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240723">TX_EIDAS_4.1.4.0 - Crear una firma digital en servidor</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240724">TX_EIDAS_4.1.4.0 - Crear un lote de firmas digitales en servidor</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240728">TX_EIDAS_4.1.4.0 - Obtener el resultado de un proceso de creaci&oacute;n de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240729">TX_EIDAS_4.1.4.0 - Eliminar un proceso de creaci&oacute;n de firma</a>    </p>
</li></ul>    <div class="section section-5" id="src-96240723">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Crear una firma digital en servidor</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240723_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWZpcm1hZGlnaXRhbGVuc2Vydmlkb3ItRGVzY3JpcGNpw7Nu">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240723_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWZpcm1hZGlnaXRhbGVuc2Vydmlkb3ItUGV0aWNpw7Nu">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-CabeceraContent-Type">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Cuerpo">Cuerpo</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240723_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWZpcm1hZGlnaXRhbGVuc2Vydmlkb3ItQXV0b3JpemFjacOzbg">Autorizaci&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240723_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWZpcm1hZGlnaXRhbGVuc2Vydmlkb3ItUmVxdWlzaXRvc2FkaWNpb25hbGVzc2lsYWFjdGl2YWNpw7NuZGVsYWlkZW50aWRhZGRlZmlybWFlc21lZGlhbnRlY29udHJhc2XDsWFlbmVsSFNN">Requisitos adicionales si la activaci&oacute;n de la identidad de firma es mediante contrase&ntilde;a en el HSM</a>    </p>
</li></ul></li></ul></li><li class=" ">    <p  ><a   href="#src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-CabeceraContent-Type.1">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Cuerpo.1">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignatureWithServerCreation</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240723_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWZpcm1hZGlnaXRhbGVuc2Vydmlkb3ItRGVzY3JpcGNpw7Nu">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Crea la firma digital (PKCS #1) de unos datos a partir de su <i class=" ">hash</i> utilizando una <a   href="#src-96240741">TX_EIDAS_4.1.4.0 - Identidad de firma</a> en servidor.    </p>
    <p  >La firma se crea con la identidad de firma en servidor que se indica en la petici&oacute;n. Esta identidad debe pertenecer al usuario en cuyo nombre se realiza la operaci&oacute;n.    </p>
    </div>
    <div class="section section-6" id="src-96240723_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWZpcm1hZGlnaXRhbGVuc2Vydmlkb3ItUGV0aWNpw7Nu">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">POST /trustedx-resources/esigp/v1/signatures/server/raw</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-CabeceraContent-Type">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >El cuerpo de la petici&oacute;n contiene el siguiente objeto JSON    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    "digest_value" : {string},</code></div>
<div class="line"><code class="plain">    "signature_algorithm" : {string},</code></div>
<div class="line"><code class="plain">    "sign_identity_id" : {string}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">Hash</i> de los datos que hay firmar codificado en base64.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo con el que se tiene que crear la firma digital (<tt class=" ">rsa-sha1</tt>, <tt class=" ">rsa-sha256</tt>, <tt class=" ">rsa-sha384</tt> y <tt class=" ">rsa-sha512</tt><tt class=" ">).</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identity_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la identidad de firma que se tiene que utilizar para generar la firma (debe tratarse de una identidad de firma en servidor y pertenecer al usuario en cuyo nombre se realiza la operaci&oacute;n).    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240723_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWZpcm1hZGlnaXRhbGVuc2Vydmlkb3ItQXV0b3JpemFjacOzbg">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n asociado al dominio de la identidad de firma con la que se quiere generar la firma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor que se haya configurado para la identidad de firma (por defecto, <tt class=" ">urn:safelayer:eidas:sign:identity:use:server</tt>) y debe utilizarse como se explica en <a  class="external-link" href="https://www.ietf.org/rfc/rfc6750.txt">RFC 6750</a>. En definitiva, el <i class=" ">token</i> debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >    <span style="color: #000000;">
El     </span>
<i class=" ">token</i>     <span style="color: #000000;">
de acceso tiene que obtenerse mediante un flujo OAuth 2.0 de tipo     </span>
<i class=" ">Authorization Code Grant</i>    <span style="color: #000000;">
.    </span>
    </p>
    <div class="section section-8" id="src-96240723_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVuYWZpcm1hZGlnaXRhbGVuc2Vydmlkb3ItUmVxdWlzaXRvc2FkaWNpb25hbGVzc2lsYWFjdGl2YWNpw7NuZGVsYWlkZW50aWRhZGRlZmlybWFlc21lZGlhbnRlY29udHJhc2XDsWFlbmVsSFNN">
        <h8 class="heading "><span>Requisitos adicionales si la activaci&oacute;n de la identidad de firma es mediante contrase&ntilde;a en el HSM</span></h8>
    <p  >Si la identidad de firma con la que se quiere crear la firma digital se activa mediante una contrase&ntilde;a validada por el HSM, en la <a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a> del flujo OAuth 2.0 se tiene que incluir lo siguiente:    </p>
<ul class=" "><li class=" ">    <p  >el par&aacute;metro <tt class=" ">sign_identity_id</tt> y su valor debe ser el identificador de la identidad de firma con la que se quiere crear la firma digital.    </p>
</li><li class=" ">    <p  >el par&aacute;metro <tt class=" ">digests_summary</tt> y su valor debe ser el <i class=" ">hash </i>criptogr&aacute;fico codificado en base64 del <i class=" ">hash</i> criptogr&aacute;fico de los datos que se quieren firmar digitalmente. Este &uacute;ltimo <i class=" ">hash</i> debe ser el mismo que el que se indique despu&eacute;s en la petici&oacute;n de la operaci&oacute;n.    </p>
</li><li class=" ">    <p  >par&aacute;metro <tt class=" ">digests_summary_algorithm</tt> y su valor debe ser el algoritmo con el que obtiene el <i class=" ">hash </i>criptogr&aacute;fico anterior.    </p>
</li></ul>    </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <p  >Si la firma se crea con &eacute;xito, la respuesta HTTP contendr&aacute; la siguiente <tt class=" ">Status-Line </tt>(v&eacute;anse en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a> todos los casos posibles).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 200 OK</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-CabeceraContent-Type.1">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/octet-string</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240723_TX_EIDAS_4.1.4.0-Crearunafirmadigitalenservidor-Cuerpo.1">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Contiene el valor binario de la firma.    </p>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240724">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Crear un lote de firmas digitales en servidor</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240724_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVubG90ZWRlZmlybWFzZGlnaXRhbGVzZW5zZXJ2aWRvci1EZXNjcmlwY2nDs24">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240724_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVubG90ZWRlZmlybWFzZGlnaXRhbGVzZW5zZXJ2aWRvci1QZXRpY2nDs24">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-CabeceraContent-Type">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Cuerpo">Cuerpo</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Controldeacceso">Control de acceso</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240724_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVubG90ZWRlZmlybWFzZGlnaXRhbGVzZW5zZXJ2aWRvci1SZXF1aXNpdG9zYWRpY2lvbmFsZXNzaWxhYWN0aXZhY2nDs25kZWxhaWRlbnRpZGFkZGVmaXJtYWVzbWVkaWFudGVjb250cmFzZcOxYWVuZWxIU00">Requisitos adicionales si la activaci&oacute;n de la identidad de firma es mediante contrase&ntilde;a en el HSM</a>    </p>
</li></ul></li></ul></li><li class=" ">    <p  ><a   href="#src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-CabeceraContent-Type.1">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Cuerpo.1">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignatureWithServerBatchCreation</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240724_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVubG90ZWRlZmlybWFzZGlnaXRhbGVzZW5zZXJ2aWRvci1EZXNjcmlwY2nDs24">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Crea un lote de firmas digitales partiendo de los <i class=" ">hashes</i> de los datos que se tienen que firmar y utilizando una identidad de firma en servidor.    </p>
    </div>
    <div class="section section-6" id="src-96240724_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVubG90ZWRlZmlybWFzZGlnaXRhbGVzZW5zZXJ2aWRvci1QZXRpY2nDs24">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">POST /signatures/server/raw/batch</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-CabeceraContent-Type">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >El cuerpo de la petici&oacute;n contiene el siguiente objeto JSON:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"sign_identity_id" : {string},    </code></div>
<div class="line"><code class="plain">	"signature_algorithm" : {string},    </code></div>
<div class="line"><code class="plain">	"requests" : [        </code></div>
<div class="line"><code class="plain">		{            </code></div>
<div class="line"><code class="plain">		"digest_value" : {string},            </code></div>
<div class="line"><code class="plain">		"signature_algorithm" : {string}       </code></div>
<div class="line"><code class="plain">		}    </code></div>
<div class="line"><code class="plain">	]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <pre class=" ">sign_identity_id</pre>            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la identidad de firma con la que se tienen que crear las firmas digitales.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de obtenci&oacute;n de los <i class=" ">hashes</i> criptogr&aacute;ficos con los que se tienen que generar las firmas (<tt class=" ">rsa-sha1</tt>, <tt class=" ">rsa-sha256</tt>, <tt class=" ">rsa-sha384</tt> y <tt class=" ">rsa-sha512</tt>) si no se especifica otro distinto para cada uno de ellos. Esta propiedad es opcional. Si no se utiliza, deber&aacute; indicarse el algoritmo de obtenci&oacute;n de cada uno de los <i class=" ">hashes</i> criptogr&aacute;ficos por separado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">requests[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre los <i class=" ">hashes</i> criptogr&aacute;ficos con los que se tienen que generar las firmas    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >r<tt class=" ">equests[].digest_value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Codificaci&oacute;n en base64 del<i class=" "> hash</i> criptogr&aacute;fico con el que se tiene que generar una de las firmas.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">requests[].signature_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de obtenci&oacute;n del <i class=" ">hash</i> criptogr&aacute;fico con el que se tiene que generar una de las firmas. Esta propiedad es opcional. Si no se utiliza deber&aacute; indicarse el algoritmo con el que se obtienen todos los <i class=" ">hashes</i> criptogr&aacute;ficos    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Controldeacceso">
        <h7 class="heading "><span>Control de acceso</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n asociado al dominio de la identidad de firma con la que se quiere generar la firma. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor que se haya configurado para la identidad de firma (por defecto, <tt class=" ">urn:safelayer:eidas:sign:identity:use:server</tt>) y debe utilizarse como se explica en <a  class="external-link" href="https://www.ietf.org/rfc/rfc6750.txt">RFC 6750</a>. En definitiva, el <i class=" ">token</i> debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >    <span style="color: #000000;">
El     </span>
<i class=" ">token</i>     <span style="color: #000000;">
de acceso tiene que obtenerse mediante un flujo OAuth 2.0 de tipo     </span>
<i class=" ">Authorization Code Grant</i>    <span style="color: #000000;">
.    </span>
    </p>
    <div class="section section-8" id="src-96240724_safe-id-VFhfRUlEQVNfNC4xLjQuMC1DcmVhcnVubG90ZWRlZmlybWFzZGlnaXRhbGVzZW5zZXJ2aWRvci1SZXF1aXNpdG9zYWRpY2lvbmFsZXNzaWxhYWN0aXZhY2nDs25kZWxhaWRlbnRpZGFkZGVmaXJtYWVzbWVkaWFudGVjb250cmFzZcOxYWVuZWxIU00">
        <h8 class="heading "><span>Requisitos adicionales si la activaci&oacute;n de la identidad de firma es mediante contrase&ntilde;a en el HSM</span></h8>
    <p  >Si la identidad de firma con la que se quieren crear las firmas digitales se activa mediante una contrase&ntilde;a validada por el HSM, en la <a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a> del flujo OAuth 2.0 se tiene que incluir lo siguiente:    </p>
<ul class=" "><li class=" ">    <p  >el par&aacute;metro <tt class=" ">sign_identity_id</tt> y su valor debe ser el identificador de la identidad de firma con la que se quieren crear las firmas digitales.    </p>
</li><li class=" ">    <p  >el par&aacute;metro <tt class=" ">digests_summary</tt> y su valor debe ser el <i class=" ">hash </i>criptogr&aacute;fico codificado en base64 de la concatenaci&oacute;n de los <i class=" ">hashes</i> criptogr&aacute;ficos con los que se tienen que crear las firmas digitales. La concatenaci&oacute;n tiene que realizarse en el mismo orden y con los mismos <i class=" ">hashes</i> que se indique despu&eacute;s en la petici&oacute;n de la operaci&oacute;n.    </p>
</li><li class=" ">    <p  >el par&aacute;metro <tt class=" ">digests_summary_algorithm</tt> y su valor debe ser el algoritmo con el que obtiene el <i class=" ">hash </i>criptogr&aacute;fico anterior.    </p>
</li></ul>    </div>
    </div>
    </div>
    <div class="section section-6" id="src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <p  >Si las firmas se crean con &eacute;xito, la respuesta HTTP contendr&aacute; la siguiente <tt class=" ">Status-Line </tt>(v&eacute;anse en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a> todos los casos posibles).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 200 OK</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-CabeceraContent-Type.1">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240724_TX_EIDAS_4.1.4.0-Crearunlotedefirmasdigitalesenservidor-Cuerpo.1">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Lista de las firmas digitales creadas    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{    </code></div>
<div class="line"><code class="plain">	"signatures" : [ {string} ]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <pre class=" ">signatures[]</pre>            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Firmas digitales codificadas en base64. Las firmas siguen el mismo orden que el que tienen en la petici&oacute;n los <i class=" ">hashes</i> criptogr&aacute;ficos a partir de los que han sido creadas.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240728">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener el resultado de un proceso de creaci&oacute;n de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1BbGlhcw">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1EZXNjcmlwY2nDs24">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1QZXRpY2nDs24">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1QYXLDoW1ldHJvcw">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1BdXRvcml6YWNpw7Nu">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1SZXNwdWVzdGE">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1TdGF0dXMtTGluZQ">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1DdWVycG8">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1BbGlhcw">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignatureResultReading</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1EZXNjcmlwY2nDs24">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Obtiene el resultado de un <a   href="#src-96240721">TX_EIDAS_4.1.4.0 - Proceso de creaci&oacute;n de firma</a>.    </p>
    </div>
    <div class="section section-6" id="src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1QZXRpY2nDs24">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">GET /trustedx-resources/esigp/v1/signatures/{signature_id}/result</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1QYXLDoW1ldHJvcw">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del proceso de creaci&oacute;n de firma cuyo resultado se desea obtener.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1BdXRvcml6YWNpw7Nu">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de confianza del servicio al que se pide el resultado del proceso y asociado al dominio de la identidad de firma con la que se ha realizado dicho proceso. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:identity:use:device</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://www.ietf.org/rfc/rfc6750.txt">RFC 6750</a>. En definitiva, el <i class=" ">token</i> debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >    <span style="color: #000000;">
El     </span>
<i class=" ">token</i>    <span style="color: #000000;">
 de acceso tiene que obtenerse mediante un flujo OAuth 2.0 de tipo     </span>
<i class=" ">Authorization Code Grant</i>    <span style="color: #000000;">
.    </span>
    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1SZXNwdWVzdGE">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1TdGF0dXMtTGluZQ">
        <h7 class="heading "><span>Status-Line</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Valor    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 200 OK</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El proceso de creaci&oacute;n de firma ha terminado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 404 Not Found</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El proceso de creaci&oacute;n de firma no ha terminado.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">HTTP/1.1 410 Gone</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >El proceso de creaci&oacute;n de firma no existe.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >V&eacute;anse en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a> todos los casos posibles.    </p>
    </div>
    <div class="section section-7" id="src-96240728_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyZWxyZXN1bHRhZG9kZXVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1DdWVycG8">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Si el proceso de creaci&oacute;n de firma ha finalizado, contiene la representaci&oacute;n JSON del subrecurso <tt class=" ">result</tt> de dicho <a   href="#src-96240721">TX_EIDAS_4.1.4.0 - Proceso de creaci&oacute;n de firma</a>. Es decir, contiene un objeto JSON con la siguiente estructura:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    "status" : {string},</code></div>
<div class="line"><code class="plain">    "value" : {string},</code></div>
<div class="line"><code class="plain">    "signature_algorithm" : {string},</code></div>
<div class="line"><code class="plain">    "sign_identity" : {string},</code></div>
<div class="line"><code class="plain">    "device_type" : {</code></div>
<div class="line"><code class="plain">        "id" : {string},</code></div>
<div class="line"><code class="plain">        "notifications_service_id" : {string},</code></div>
<div class="line"><code class="plain">        "wakeup_uri_scheme" : {string},</code></div>
<div class="line"><code class="plain">        "verification_policy" : {string},</code></div>
<div class="line"><code class="plain">        "application" : {</code></div>
<div class="line"><code class="plain">            "id" : {string},</code></div>
<div class="line"><code class="plain">            "version" : {string}</code></div>
<div class="line"><code class="plain">        },</code></div>
<div class="line"><code class="plain">        "server_configuration" : {...}</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain"> }</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">status</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Estado en que ha finalizado el proceso de creaci&oacute;n de firma (<tt class=" ">finished</tt>, <tt class=" ">failed</tt> o <tt class=" ">canceled)</tt>:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">finished</tt>: El proceso ha terminado despu&eacute;s de crear la firma con &eacute;xito.    </p>
</li><li class=" ">    <p  ><tt class=" ">failed</tt>: El proceso ha terminado sin poder crear la firma porque se ha producido un error.    </p>
</li><li class=" ">    <p  ><tt class=" ">canceled</tt>: El proceso ha terminado sin poder crear la firma porque ha sido cancelado.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esta propiedad es opcional y contiene el valor devuelto por el proceso de creaci&oacute;n de firma. Este valor depende del estado en el que haya finalizado el proceso:    </p>
<ul class=" "><li class=" ">    <p  >Si el proceso ha terminado en estado <tt class=" ">finished</tt>: firma que se haya creado codificada en base64.    </p>
</li><li class=" ">    <p  >Si el proceso ha terminado en estado <tt class=" ">failed</tt>: informaci&oacute;n sobre el error que se haya producido (puede no haber ninguna informaci&oacute;n).    </p>
</li><li class=" ">    <p  >Si el proceso ha terminado en estado <tt class=" ">canceled</tt>: informaci&oacute;n sobre la cancelaci&oacute;n que se haya producido (puede no haber ninguna informaci&oacute;n).    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_algorithm</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Algoritmo de firma utilizado en el proceso (<tt class=" ">rsa-sha1</tt>, <tt class=" ">rsa-sha256</tt>, <tt class=" ">rsa-sha384</tt>, <tt class=" ">rsa-sha512</tt>,<tt class=" "> ecdsa-sha1</tt>,<tt class=" "> ecdsa-sha256</tt>, <tt class=" ">ecdsa-sha384</tt> y<tt class=" "> ecdsa-sha512</tt>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identity</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240741">TX_EIDAS_4.1.4.0 - Identidad de firma</a> utilizada (aplicada) en el proceso.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n del tipo de dispositivo utilizado en el proceso. Esta propiedad s&oacute;lo existe en los procesos de creaci&oacute;n de firma que finalizan con &eacute;xito (<tt class=" ">finished</tt>).    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_type.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_type.notifications_service_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del servicio de notificaciones que utiliza este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_type.wakeup_uri_scheme</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Esquema de la URL que abre la aplicaci&oacute;n de firma (Mobile ID) en este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_type.verification_policy</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la pol&iacute;tica de verificaci&oacute;n que se utiliza para validar las firmas de autenticaci&oacute;n y de transacciones que se crean con este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_type.application</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de la aplicaci&oacute;n de firma (MobileID) instalada en este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_type.application.id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la aplicaci&oacute;n de firma (MobileID) instalada en este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_type.application.version</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Versi&oacute;n de la aplicaci&oacute;n de firma (MobileID) instalada en este tipo de dispositivo.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_type.server_configuration</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Configuraci&oacute;n adicional de este tipo dispositivo registrada en el servidor.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240729">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Eliminar un proceso de creaci&oacute;n de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1BbGlhcw">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1EZXNjcmlwY2nDs24">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1QZXRpY2nDs24">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1QYXLDoW1ldHJvcw">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1BdXRvcml6YWNpw7Nu">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1SZXNwdWVzdGE">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1TdGF0dXMtTGluZQ">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZQ">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1DdWVycG8">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1BbGlhcw">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignatureDeletion</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1EZXNjcmlwY2nDs24">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Elimina un <a   href="#src-96240721">TX_EIDAS_4.1.4.0 - Proceso de creaci&oacute;n de firma</a> que haya sido creado para generar una firma con un dispositivo m&oacute;vil.    </p>
    </div>
    <div class="section section-6" id="src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1QZXRpY2nDs24">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">DELETE /trustedx-resources/esigp/v1/signatures/{signature_id}</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1QYXLDoW1ldHJvcw">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">signature_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador del proceso de creaci&oacute;n de firma que se quiere eliminar.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1BdXRvcml6YWNpw7Nu">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de confianza del servicio al que se pide eliminar el proceso y asociado al dominio de la identidad de firma con la que se ha realizado dicho proceso. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:identity:use:device</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://www.ietf.org/rfc/rfc6750.txt">RFC 6750</a>. En definitiva, el <i class=" ">token</i> debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >    <span style="color: #000000;">
El     </span>
<i class=" ">token</i>    <span style="color: #000000;">
 de acceso tiene que obtenerse mediante un flujo OAuth 2.0 de tipo     </span>
<i class=" ">Authorization Code Grant</i>    <span style="color: #000000;">
.    </span>
    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1SZXNwdWVzdGE">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1TdGF0dXMtTGluZQ">
        <h7 class="heading "><span>Status-Line</span></h7>
    <p  >Si el proceso de creaci&oacute;n de firma se elimina con &eacute;xito, la respuesta HTTP contendr&aacute; la siguiente <tt class=" ">Status-Line </tt>(v&eacute;anse en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a> todos los casos posibles).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 200 OK</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1DYWJlY2VyYUNvbnRlbnQtVHlwZQ">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json;charset=UTF-8</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240729_safe-id-VFhfRUlEQVNfNC4xLjQuMC1FbGltaW5hcnVucHJvY2Vzb2RlY3JlYWNpw7NuZGVmaXJtYS1DdWVycG8">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  >Representaci&oacute;n JSON del <a   href="#src-96240721">TX_EIDAS_4.1.4.0 - Proceso de creaci&oacute;n de firma</a> que se haya eliminado.    </p>
    </div>
    </div>
    </div>
    </div>
    <div class="section section-4" id="src-96240730">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de firma digital - Autorizaci&oacute;n</span></h4>
    <p  >La siguiente tabla contiene las operaciones de las que consta la API de firma digital. Para cada una de ellas se indica el valor que deber&aacute; contener el <i class=" ">scope</i> del <i class=" ">token</i> de acceso que se ponga en el mensaje de petici&oacute;n de la operaci&oacute;n para que la aplicaci&oacute;n solicitante pueda realizar la operaci&oacute;n. Esta indicaci&oacute;n se realiza poniendo el tipo de flujo OAuth mediante el que deber&aacute; obtenerse el <i class=" ">token</i> de acceso en cuesti&oacute;n (ACG se refiere a los flujos <i class=" ">Authorization Code Grant</i> y CCG a los <i class=" ">Client Credentials Grant</i>).    </p>
    <div  class="tablewrap">
        <table class="wrapped relative-table confluenceTable">
                    <colgroup>
                                    <col  width="453"/>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Operaci&oacute;n \ Scope    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >use:server    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >    <span style="color: #000000;">
use:device    </span>
    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240723">TX_EIDAS_4.1.4.0 - Crear una firma digital en servidor</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >&nbsp;    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240724">TX_EIDAS_4.1.4.0 - Crear un lote de firmas digitales en servidor</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >&nbsp;    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240728">TX_EIDAS_4.1.4.0 - Obtener el resultado de un proceso de creaci&oacute;n de firma</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >&nbsp;    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240729">TX_EIDAS_4.1.4.0 - Eliminar un proceso de creaci&oacute;n de firma</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >&nbsp;    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >Los valores indicados son abreviaturas de los siguientes valores (que son los que realmente deber&aacute; contener el <i class=" ">scope</i>).    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Abreviatura    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Valor    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">use:server</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:sign:identity:use:server</tt>    </p>
    <p  >o bien el <i class=" ">scope</i> configurado para la identidad de firma escogida    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">use:device</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">urn:safelayer:eidas:sign:identity:use:device</tt>    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-3" id="src-96240739">
        <h3 class="heading "><span>TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma</span></h3>
    <p  >    </p>
    <p  >La API de gesti&oacute;n de identidades de firma sirve principalmente para crear y eliminar las identidades de firma que gestiona la plataforma. Estas operaciones no suelen invocarlas directamente las aplicaciones sino que normalmente las invoca la <a  class="createlink" href="/pages/createpage.action?spaceKey=SPBONNIE&amp;title=TX_EIDAS_4.1.4.0+-+API+de+registro+de+identidades+de+firma&amp;linkCreation=true&amp;fromPageId=96240739">TX_EIDAS_4.1.4.0 - API de registro de identidades de firma</a>. Esta API sirve tambi&eacute;n para obtener una lista de todas o algunas de las identidades de firma de un usuario y para obtener los datos de cualquiera de ellas.    </p>
    <p  >Puede obtener informaci&oacute;n sobre los recursos, operaciones y casos de uso de esta API en los siguientes enlaces:    </p>
    <p  >    </p>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240740">TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma - Recursos</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240743">TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma - Operaciones</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240753">TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma - Autorizaci&oacute;n</a>    </p>
</li></ul>    <p  >    </p>
    <div class="section section-4" id="src-96240740">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma - Recursos</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240741">TX_EIDAS_4.1.4.0 - Identidad de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240742">TX_EIDAS_4.1.4.0 - Lista de identidades de firma</a>    </p>
</li></ul>    <div class="section section-5" id="src-96240741">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Identidad de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240741_TX_EIDAS_4.1.4.0-Identidaddefirma-URI">URI</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240741_safe-id-VFhfRUlEQVNfNC4xLjQuMC1JZGVudGlkYWRkZWZpcm1hLURlc2NyaXBjacOzbg">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240741_safe-id-VFhfRUlEQVNfNC4xLjQuMC1JZGVudGlkYWRkZWZpcm1hLVJlcHJlc2VudGFjacOzbg">Representaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240741_TX_EIDAS_4.1.4.0-Identidaddefirma-Operaciones">Operaciones</a>    </p>
</li></ul>    <div class="section section-6" id="src-96240741_TX_EIDAS_4.1.4.0-Identidaddefirma-URI">
        <h6 class="heading "><span>URI</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">/trustedx-resources/esigp/v1/sign_identities/{sign_identity_id}</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240741_safe-id-VFhfRUlEQVNfNC4xLjQuMC1JZGVudGlkYWRkZWZpcm1hLURlc2NyaXBjacOzbg">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Recurso que contiene informaci&oacute;n sobre unas claves de firma concretas (el certificado X.509 que corresponde a estas claves, las etiquetas que permiten la selecci&oacute;n de estas claves, etc). Dependiendo de donde se encuentre la parte privada de las claves a las que se refiere una identidad de firma, se distingue entre:    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" ">Identidad de firma en servidor</strong>: la parte privada de las claves est&aacute; en un proveedor de firma de TrustedX eIDAS (t&iacute;picamente, en un HSM al que la plataforma tiene acceso).    </p>
</li><li class=" ">    <p  ><strong class=" ">Identidad de firma en dispositivo m&oacute;vil</strong>: la parte privada de las claves est&aacute; en un dispositivo m&oacute;vil (e.g. un <i class=" ">smartphone</i>).    </p>
</li></ul>    </div>
    <div class="section section-6" id="src-96240741_safe-id-VFhfRUlEQVNfNC4xLjQuMC1JZGVudGlkYWRkZWZpcm1hLVJlcHJlc2VudGFjacOzbg">
        <h6 class="heading "><span>Representaci&oacute;n</span></h6>
    <p  >Una identidad de firma se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    "id" : {string},</code></div>
<div class="line"><code class="plain">    "self" : {string},</code></div>
<div class="line"><code class="plain">    "description" : {string},</code></div>
<div class="line"><code class="plain">    "labels" : [ {string} ],</code></div>
<div class="line"><code class="plain">    "type" : {string},</code></div>
<div class="line"><code class="plain">    "device_id" : {string},</code></div>
<div class="line"><code class="plain">    "domain" : {string},</code></div>
<div class="line"><code class="plain">    "access" : [ {</code></div>
<div class="line"><code class="plain">        "user_id" : {string}</code></div>
<div class="line"><code class="plain">    } ],</code></div>
<div class="line"><code class="plain">    "details" : {</code></div>
<div class="line"><code class="plain">        "certificate" : {string},</code></div>
<div class="line"><code class="plain">        "public_key" : {string}</code></div>
<div class="line"><code class="plain">    },     </code></div>
<div class="line"><code class="plain">    "links" :  {</code></div>
<div class="line"><code class="plain">        &lt;operation_alias&gt; : {</code></div>
<div class="line"><code class="plain">            "auth" : {</code></div>
<div class="line"><code class="plain">                "oauth2": {</code></div>
<div class="line"><code class="plain">                    "scopes": [ {string} ]</code></div>
<div class="line"><code class="plain">                }</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        }    </code></div>
<div class="line"><code class="plain">    },</code></div>
<div class="line"><code class="plain">    "status" : {</code></div>
<div class="line"><code class="plain">        "value" : {string},</code></div>
<div class="line"><code class="plain">        "reason" : {string}</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Propiedad    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">self</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL de acceso a la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">description</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n de la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">labels[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Lista de etiquetas asociadas a la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de identidad de firma. Actualmente esta propiedad siempre tiene el valor <tt class=" ">pki:x509</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Dispositivo en el que se encuentra la parte privada de las claves asociadas a la identidad de firma. Este propiedad s&oacute;lo la tienen las identidades de firma en dispositivo m&oacute;vil.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">domain</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Dominio al que pertenece la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">access[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de control de acceso a la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">access[].user_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de un usuario con acceso a la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Detalles de implementaci&oacute;n de la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details.certificate</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Certificado X.509 codificado en DER y base64. Esta propiedad s&oacute;lo la tienen las identidades de firma de tipo <tt class=" ">pki:x509</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details.activation_mode</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Modo de activaci&oacute;n de la identidad de firma. Esta propiedad s&oacute;lo la tienen las identidades de firma en servidor y sus posibles valores son los siguientes:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">trustedx</tt>: la identidad de firma se activa mediante una autenticaci&oacute;n del usuario que realiza TrustedX eIDAS.    </p>
</li><li class=" ">    <p  ><tt class=" ">hsm-pwd</tt>: la identidad de firma se activa mediante una contrase&ntilde;a que presenta el usuario y que valida el HSM.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">details.public_key</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Parte p&uacute;blica de las claves asociadas a la identidad de firma. Estructura ASN.1 <tt class=" ">PublicKeyInfo</tt> codificada en DER y base64. Esta propiedad s&oacute;lo la tienen las identidades de firma de tipo <tt class=" ">pki:x509</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">links</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n relativa a operaciones que utilizan la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">links.&lt;operation_alias&gt;</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de la operaci&oacute;n cuyo alias es <tt class=" ">&lt;operation_alias&gt;</tt> en lo que respecta al uso de la identidad de firma. Actualmente el &uacute;nico valor posible de <tt class=" ">&lt;operation_alias&gt;</tt> es <tt class=" ">TX_EIDAS_4.1.4.0 - Crear una firma digital en servidor</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">links.&lt;operation_alias&gt;.auth</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de autorizaci&oacute;n de la operaci&oacute;n <tt class=" ">&lt;operation_alias&gt; </tt>en lo que respecta al uso de la identidad de firma<tt class=" ">.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">links.&lt;operation_alias&gt;.auth.oauth2</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de autorizaci&oacute;n OAuth 2.0 de la operaci&oacute;n <tt class=" ">&lt;operation_alias&gt; </tt>en lo que respecta al uso de la identidad de firma<tt class=" ">.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">links.&lt;operation_alias&gt;.auth.oauth2.scopes[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Conjunto de <i class=" ">scopes</i> OAuth 2.0 necesarios para acceder a la operaci&oacute;n <tt class=" ">&lt;operation_alias&gt;</tt> de modo que &eacute;sta utilice la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">status</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre el estado de la identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">status.value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Estado en el que se encuentra la identidad de firma:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">enabled</tt>: la identidad de firma est&aacute; habilitada.    </p>
</li><li class=" ">    <p  ><tt class=" ">disabled:</tt> la identidad de firma est&aacute; inhabilitada.    </p>
</li><li class=" ">    <p  ><tt class=" ">locked:</tt> la identidad de firma est&aacute; bloqueada.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">status.reason</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Raz&oacute;n por la que la identidad de firma se encuentra en su estado actual. Esta propiedad es opcional y suele utilizarse para indicar la raz&oacute;n por la que una identidad de firma ha sido inhabilitada o bloqueada.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-6" id="src-96240741_TX_EIDAS_4.1.4.0-Identidaddefirma-Operaciones">
        <h6 class="heading "><span>Operaciones</span></h6>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240751">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de una identidad de firma</a>    </p>
</li></ul>    </div>
    </div>
    <div class="section section-5" id="src-96240742">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Lista de identidades de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240742_TX_EIDAS_4.1.4.0-Listadeidentidadesdefirma-URI">URI</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240742_safe-id-VFhfRUlEQVNfNC4xLjQuMC1MaXN0YWRlaWRlbnRpZGFkZXNkZWZpcm1hLURlc2NyaXBjacOzbg">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240742_safe-id-VFhfRUlEQVNfNC4xLjQuMC1MaXN0YWRlaWRlbnRpZGFkZXNkZWZpcm1hLVJlcHJlc2VudGFjacOzbg">Representaci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240742_TX_EIDAS_4.1.4.0-Listadeidentidadesdefirma-Operaciones">Operaciones</a>    </p>
</li></ul>    <div class="section section-6" id="src-96240742_TX_EIDAS_4.1.4.0-Listadeidentidadesdefirma-URI">
        <h6 class="heading "><span>URI</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">/trustedx-resources/esigp/v1/sign_identities</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240742_safe-id-VFhfRUlEQVNfNC4xLjQuMC1MaXN0YWRlaWRlbnRpZGFkZXNkZWZpcm1hLURlc2NyaXBjacOzbg">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Recurso que contiene informaci&oacute;n sobre un conjunto de identidades de firma.    </p>
    </div>
    <div class="section section-6" id="src-96240742_safe-id-VFhfRUlEQVNfNC4xLjQuMC1MaXN0YWRlaWRlbnRpZGFkZXNkZWZpcm1hLVJlcHJlc2VudGFjacOzbg">
        <h6 class="heading "><span>Representaci&oacute;n</span></h6>
    <p  >Una lista de identidades de firma se representa en JSON del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    "sign_identities" : [ { </code></div>
<div class="line"><code class="plain">        "id" : {string},</code></div>
<div class="line"><code class="plain">        "self" : {string},</code></div>
<div class="line"><code class="plain">        "description" : {string},</code></div>
<div class="line"><code class="plain">        "labels" : [ {string} ],</code></div>
<div class="line"><code class="plain">        "type" : {string},</code></div>
<div class="line"><code class="plain">        "device_id" : {string},</code></div>
<div class="line"><code class="plain">        "domain" : {string},</code></div>
<div class="line"><code class="plain">        "access" : [ {"user_id" : {string}} ],</code></div>
<div class="line"><code class="plain">        "links" :  {</code></div>
<div class="line"><code class="plain">            &lt;operation_alias&gt; : {</code></div>
<div class="line"><code class="plain">                "auth" : {</code></div>
<div class="line"><code class="plain">                    "oauth2": {"scopes": [ {string} ]}</code></div>
<div class="line"><code class="plain">                }</code></div>
<div class="line"><code class="plain">            }  </code></div>
<div class="line"><code class="plain">         },</code></div>
<div class="line"><code class="plain">        "status" : {</code></div>
<div class="line"><code class="plain">            "value" : {string},</code></div>
<div class="line"><code class="plain">            "reason" : {string}</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Lista de identidades de firma. De cada <a   href="#src-96240741">TX_EIDAS_4.1.4.0 - Identidad de firma</a> se tienen todas sus propiedades excepto <tt class=" ">details.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].self</tt><a  class="external-link" href="http://sign_identities.id"></a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >URL de acceso a una de las identidades identidad de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].description</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n de una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].labels</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Lista de etiquetas asociadas a una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].type</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Tipo de una de las identidades de firma. Actualmente esta propiedad siempre tiene el valor <tt class=" ">pki:x509</tt> .    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].device_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Dispositivo en el que se encuentra la parte privada de las claves asociadas a una de las identidades de firma. Este propiedad s&oacute;lo la tienen las identidades de firma en dispositivo m&oacute;vil.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].domain</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Dominio al que pertenece una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].access[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de control de acceso a una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].access[].user_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de un usuario con acceso a una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].links</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n relativa a operaciones que utilizan una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].links.&lt;operation_alias&gt;</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de la operaci&oacute;n cuyo alias es <tt class=" ">&lt;operation_alias&gt;</tt> en lo que respecta al uso de una de las identidades de firma. Actualmente el &uacute;nico valor posible de <tt class=" ">&lt;operation_alias&gt;</tt> es <tt class=" ">Signatures.create.server.raw</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].links.&lt;operation_alias&gt;.auth</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de autorizaci&oacute;n de la operaci&oacute;n <tt class=" ">&lt;operation_alias&gt;</tt> en lo que respecta al uso de una de las identidades de firma<tt class=" ">.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].links.&lt;operation_alias&gt;.auth.oauth2</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n de autorizaci&oacute;n OAuth 2.0 de la operaci&oacute;n <tt class=" ">&lt;operation_alias&gt;</tt> en lo que respecta al uso de una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].links.&lt;operation_alias&gt;.auth.oauth2.scopes[]</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Conjunto de <i class=" ">scopes</i> OAuth 2.0 necesarios para acceder a la operaci&oacute;n <tt class=" ">&lt;operation_alias&gt;</tt> de modo que &eacute;sta utilice una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].status</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Informaci&oacute;n sobre el estado de una de las identidades de firma.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].status.value</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Estado en el que se encuentra una de las identidades de firma:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">enabled</tt>: la identidad de firma est&aacute; habilitada.    </p>
</li><li class=" ">    <p  ><tt class=" ">disabled:</tt> la identidad de firma est&aacute; inhabilitada.    </p>
</li><li class=" ">    <p  ><tt class=" ">locked:</tt> la identidad de firma est&aacute; bloqueada.    </p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identities[].status.reason</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Raz&oacute;n por la que una de las identidades de firma se encuentra en su estado actual. Esta propiedad es opcional y suele utilizarse para indicar la raz&oacute;n por la que una identidad de firma ha sido inhabilitada o bloqueada.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-6" id="src-96240742_TX_EIDAS_4.1.4.0-Listadeidentidadesdefirma-Operaciones">
        <h6 class="heading "><span>Operaciones</span></h6>
<ul class=" "><li class=" ">    <p  ><a   href="#src-96240750">TX_EIDAS_4.1.4.0 - Obtener identidades de firma</a>    </p>
</li></ul>    <p  >    </p>
    </div>
    </div>
    </div>
    <div class="section section-4" id="src-96240743">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma - Operaciones</span></h4>
<ul class="childpages-macro "><li class=" ">    <p  ><a   href="#src-96240750">TX_EIDAS_4.1.4.0 - Obtener identidades de firma</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240751">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de una identidad de firma</a>    </p>
</li></ul>    <p  >    </p>
    <div class="section section-5" id="src-96240750">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener identidades de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-Alias">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240750_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaWRlbnRpZGFkZXNkZWZpcm1hLURlc2NyaXBjacOzbg">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240750_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaWRlbnRpZGFkZXNkZWZpcm1hLVBldGljacOzbg">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240750_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaWRlbnRpZGFkZXNkZWZpcm1hLVBhcsOhbWV0cm9z">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240750_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaWRlbnRpZGFkZXNkZWZpcm1hLUF1dG9yaXphY2nDs24">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-Respuesta">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-Status-Line">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-CabeceraContent-Type">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-Cuerpo">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-Alias">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignIdentitiesList</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240750_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaWRlbnRpZGFkZXNkZWZpcm1hLURlc2NyaXBjacOzbg">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Proporciona una lista de identidades de firma que cumplen determinadas condiciones. Si el <i class=" ">token</i> de acceso que presenta la aplicaci&oacute;n que solicita la operaci&oacute;n se ha obtenido en un flujo <i class=" ">Client Credentials Grant</i>, las condiciones son las que se indican en los par&aacute;metros de la operaci&oacute;n. Por otro lado, si el <i class=" ">token</i> de acceso se ha obtenido en un flujo <i class=" ">Authorization Code Grant, </i>adem&aacute;s de las condiciones que indican los par&aacute;metros, se impondr&aacute; la condici&oacute;n de que el usuario que haya autorizado la consulta sea el titular de las identidades de firma que se incluyen en la lista.    </p>
    <p  >En definitiva, hay dos maneras de utilizar esta operaci&oacute;n:    </p>
<ul class=" "><li class=" ">    <p  >Una aplicaci&oacute;n autorizada por un usuario (<i class=" ">Authorization Code Grant</i>) consulta las identidades de firma de las que &eacute;ste es propietario indicando opcionalmente las etiquetas.    </p>
</li><li class=" ">    <p  >Una aplicaci&oacute;n autorizada administrativamente (<i class=" ">Client Credentials Grant</i>) consulta las identidades de firma de un usuario indicando un identificador del mismo o del dispositivo en el que se encuentra.    </p>
</li></ul>    </div>
    <div class="section section-6" id="src-96240750_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaWRlbnRpZGFkZXNkZWZpcm1hLVBldGljacOzbg">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">GET /trustedx-resources/esigp/v1/sign_identities</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240750_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaWRlbnRpZGFkZXNkZWZpcm1hLVBhcsOhbWV0cm9z">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Uso    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">labels</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">query</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Opcional    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Filtro para restringir la petici&oacute;n a las identidades de firma del usuario que contengan todas las etiquetas especificadas. El valor del par&aacute;metro es una lista de las etiquetas separadas por comas: <tt class=" ">label1,label2, ...,labelN</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">device_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">query</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio si el <i class=" ">token de acceso</i> se ha obtenido en un flujo OAuth 2.0 de tipo <i class=" ">Client Credentials Grant </i>y no se utiliza el par&aacute;metro <tt class=" ">user_id</tt>. Opcional en caso contrario.    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Filtro para restringir la petici&oacute;n a las identidades de firma del usuario cuyas claves asociadas est&aacute;n en un determinado dispositivo m&oacute;vil.    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">user_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">query</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Este par&aacute;metro no debe usarse si el <i class=" ">token de acceso</i> se ha obtenido en un flujo OAuth 2.0 de tipo <i class=" ">Authorization Code Grant; </i>Es obligatorio si el <i class=" ">token de acceso</i> se ha obtenido en un flujo OAuth 2.0 de tipo <i class=" ">Client Credentials Grant </i>y no se utiliza el par&aacute;metro <tt class=" ">device_id</tt> . En cualquier otro caso, es o pcional.    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Filtro para restringir la petici&oacute;n a las identidades de firma del usuario identificado por<tt class=" "> user_id.</tt>    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">domain</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">query</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Este par&aacute;metro no debe usarse si el <i class=" ">token de acceso</i> se ha obtenido en un flujo OAuth 2.0 de tipo <i class=" ">Authorization Code Grant. Es o</i>bligatorio si el <i class=" ">token de acceso</i> se ha obtenido en un flujo OAuth 2.0 de tipo <i class=" ">Client Credentials Grant , </i>lo ha generado un servidor de autorizaci&oacute;n que no est&aacute; asociado a ning&uacute;n dominio y se utiliza el par&aacute;metro <tt class=" ">user_id. </tt>En cualquier otro caso, es opcional.    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Filtro para restringir los resultados a las identidades de firma que sean de un determinado dominio de identidad.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240750_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaWRlbnRpZGFkZXNkZWZpcm1hLUF1dG9yaXphY2nDs24">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de confianza del servicio al que se solicita obtener las identidades de firma y asociado al dominio al que pertenecen dichas identidades. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:identity:profile</tt>, <tt class=" ">urn:safelayer:eidas:sign:identity:register </tt>o <tt class=" ">urn:safelayer:eidas:sign:identity:manage </tt>y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> debe ponerse en una cabecera <tt class=" ">Authorization</tt> del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >El <i class=" ">token</i> de acceso puede obtenerse mediante un flujo OAuth 2.0 de tipo <i class=" ">Authorization Code Grant</i> o mediante uno de tipo <i class=" ">Client Credentials Grant.</i>    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-Respuesta">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-Status-Line">
        <h7 class="heading "><span>Status-Line</span></h7>
    <p  >Si las identidades de firma se obtienen con &eacute;xito, la respuesta HTTP contendr&aacute; la siguiente <tt class=" ">Status-Line </tt>(v&eacute;anse en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a> todos los casos posibles):    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 200 OK</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-CabeceraContent-Type">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json;charset=UTF-8</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240750_TX_EIDAS_4.1.4.0-Obteneridentidadesdefirma-Cuerpo">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  ><a   href="#src-96240742">Lista de identidades de firma</a> que cumple las condiciones indicadas en la petici&oacute;n.    </p>
    </div>
    </div>
    </div>
    <div class="section section-5" id="src-96240751">
        <h5 class="heading "><span>TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de una identidad de firma</span></h5>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLUFsaWFz">Alias</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLURlc2NyaXBjacOzbg">Descripci&oacute;n</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLVBldGljacOzbg">Petici&oacute;n</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLVBhcsOhbWV0cm9z">Par&aacute;metros</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLUF1dG9yaXphY2nDs24">Autorizaci&oacute;n</a>    </p>
</li></ul></li><li class=" ">    <p  ><a   href="#src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLVJlc3B1ZXN0YQ">Respuesta</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLVN0YXR1cy1MaW5l">Status-Line</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLUNhYmVjZXJhQ29udGVudC1UeXBl">Cabecera Content-Type</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLUN1ZXJwbw">Cuerpo</a>    </p>
</li></ul></li></ul>    <div class="section section-6" id="src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLUFsaWFz">
        <h6 class="heading "><span>Alias</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">SignIdentityReading</code></div>
</div>
    </div>
    </div>
    <div class="section section-6" id="src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLURlc2NyaXBjacOzbg">
        <h6 class="heading "><span>Descripci&oacute;n</span></h6>
    <p  >Proporciona informaci&oacute;n sobre una identidad de firma.    </p>
    </div>
    <div class="section section-6" id="src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLVBldGljacOzbg">
        <h6 class="heading "><span>Petici&oacute;n</span></h6>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">GET /trustedx-resources/esigp/v1/sign_identities/{sign_identity_id}</code></div>
</div>
    </div>
    <div class="section section-7" id="src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLVBhcsOhbWV0cm9z">
        <h7 class="heading "><span>Par&aacute;metros</span></h7>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Nombre    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Tipo    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >    <span style="color: #000000;">
Uso    </span>
    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Descripci&oacute;n    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><tt class=" ">sign_identity_id</tt>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><i class=" ">path</i>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Obligatorio    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >Identificador de la identidad de firma de la que se solicita informaci&oacute;n    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-7" id="src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLUF1dG9yaXphY2nDs24">
        <h7 class="heading "><span>Autorizaci&oacute;n</span></h7>
    <p  >La petici&oacute;n debe contener un <i class=" ">token</i> de acceso de tipo <i class=" ">bearer</i> generado por un servidor de autorizaci&oacute;n de confianza del servicio al que se solicita informaci&oacute;n sobre la identidad de firma y asociado al dominio al que pertenece dicha identidad. Este <i class=" ">token</i> debe tener un <i class=" ">scope</i> que incluya el valor <tt class=" ">urn:safelayer:eidas:sign:identity:profile,</tt> <tt class=" ">urn:safelayer:eidas:sign:identity:register</tt> o <tt class=" ">urn:safelayer:eidas:sign:identity:manage</tt> y debe utilizarse como se explica en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. En definitiva, el <i class=" ">token</i> debe ponerse en una cabecera <tt class=" ">Authorization </tt>del siguiente modo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Authorization: Bearer &lt;token&gt;</code></div>
</div>
    </div>
    <p  >El <i class=" ">token</i> de acceso puede obtenerse mediante un flujo OAuth 2.0 de tipo <i class=" ">Authorization Code Grant</i> o mediante uno de tipo <i class=" ">Client Credentials Grant.</i>    </p>
    </div>
    </div>
    <div class="section section-6" id="src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLVJlc3B1ZXN0YQ">
        <h6 class="heading "><span>Respuesta</span></h6>
    <div class="section section-7" id="src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLVN0YXR1cy1MaW5l">
        <h7 class="heading "><span>Status-Line</span></h7>
    <p  >Si la informaci&oacute;n sobre la identidad de firma se obtiene con &eacute;xito, la respuesta HTTP contendr&aacute; la siguiente <tt class=" ">Status-Line </tt>(v&eacute;anse en <a   href="#src-96240766">TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</a> todos los casos posibles).    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 200 OK</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLUNhYmVjZXJhQ29udGVudC1UeXBl">
        <h7 class="heading "><span>Cabecera Content-Type</span></h7>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Content-Type: application/json;charset=UTF-8</code></div>
</div>
    </div>
    </div>
    <div class="section section-7" id="src-96240751_safe-id-VFhfRUlEQVNfNC4xLjQuMC1PYnRlbmVyaW5mb3JtYWNpw7NuZGV1bmFpZGVudGlkYWRkZWZpcm1hLUN1ZXJwbw">
        <h7 class="heading "><span>Cuerpo</span></h7>
    <p  ><a   href="#src-96240741">Identidad de firma</a> de la que se ha pedido informaci&oacute;n.    </p>
    <p  >    </p>
    <p  >    </p>
    </div>
    </div>
    </div>
    </div>
    <div class="section section-4" id="src-96240753">
        <h4 class="heading "><span>TX_EIDAS_4.1.4.0 - API de gesti&oacute;n de identidades de firma - Autorizaci&oacute;n</span></h4>
    <p  >La siguiente tabla contiene las operaciones de las que consta la API de gesti&oacute;n de identidades de firma. Para cada una de ellas se indica el valor que deber&aacute; contener el <i class=" ">scope</i> del <i class=" ">token</i> de acceso que se ponga en el mensaje de petici&oacute;n de la operaci&oacute;n para que la aplicaci&oacute;n solicitante pueda realizar la operaci&oacute;n. Esta indicaci&oacute;n se realiza poniendo el tipo de flujo OAuth mediante el que deber&aacute; obtenerse el <i class=" ">token</i> de acceso en cuesti&oacute;n (ACG se refiere a los flujos <i class=" ">Authorization Code Grant</i> y CCG a los <i class=" ">Client Credentials Grant</i>).    </p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >Operaci&oacute;n \ Scope    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >register    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >manage    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >profile    </p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
        <p  >manage:server:credentials    </p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240750">TX_EIDAS_4.1.4.0 - Obtener identidades de firma</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >&nbsp;    </p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  ><a   href="#src-96240751">TX_EIDAS_4.1.4.0 - Obtener informaci&oacute;n de una identidad de firma</a>    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >ACG, CCG    </p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
        <p  >&nbsp;    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >En las operaciones en las que se indica m&aacute;s de un valor, basta con que el <i class=" ">scope</i> contenga cualquiera de ellos. Por otro lado, los valores indicados son abreviaturas de los siguientes valores (que son los que realmente deber&aacute; contener el <i class=" ">scope)</i>:    </p>
<ul class=" "><li class=" ">    <p  ><strong class=" ">register</strong>: <tt class=" ">urn:safelayer:eidas:sign:identity:register</tt>    </p>
</li><li class=" ">    <p  ><strong class=" ">manage</strong>: <tt class=" ">urn:safelayer:eidas:sign:identity:manage</tt>    </p>
</li><li class=" ">    <p  ><strong class=" ">profile</strong>: <tt class=" ">urn:safelayer:eidas:sign:identity:profile</tt>    </p>
</li><li class=" ">    <p  ><strong class=" ">manage:server:credentials</strong>: <tt class=" ">urn:safelayer:eidas:sign:identity:manage:server:credentials</tt>    </p>
</li></ul>    <p  >    </p>
    </div>
    </div>
    <div class="section section-3" id="src-96240766">
        <h3 class="heading "><span>TX_EIDAS_4.1.4.0 - Status de las respuestas HTTP</span></h3>
    <p  class="emoticon emoticon-warning">El c&oacute;digo de estado (<i class=" ">status</i>) de la respuesta HTTP indica el resultado de la operaci&oacute;n, seg&uacute;n la convenci&oacute;n descrita en la <a  class="external-link" href="https://tools.ietf.org/html/rfc7231">RFC 7231</a>. En caso de error, el formato de la respuesta puede variar seg&uacute;n el tipo de error.    </p>
    <p  class="emoticon emoticon-warning">    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a   href="#src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUPDs2RpZ29zZGVlc3RhZG9kZW9wZXJhY2lvbmVzY29tcGxldGFkYXNjb3JyZWN0YW1lbnRl">C&oacute;digos de estado de operaciones completadas correctamente</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUPDs2RpZ29zZGVlc3RhZG9jb25wYXLDoW1ldHJvZXJyb3JlbmxhY2FiZWNlcmFIVFRQV1dXLUF1dGhlbnRpY2F0ZQ">C&oacute;digos de estado con par&aacute;metro error en la cabecera HTTP WWW-Authenticate</a>    </p>
</li><li class=" ">    <p  ><a   href="#src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUPDs2RpZ29zZGVlc3RhZG9jb25kZXNjcmlwY2nDs25vcGNpb25hbGRlbGVycm9yZW5lbGN1ZXJwb2RlbGFyZXNwdWVzdGE">C&oacute;digos de estado con descripci&oacute;n opcional del error en el cuerpo de la respuesta</a>    </p>
</li></ul>    <div class="section section-4" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUPDs2RpZ29zZGVlc3RhZG9kZW9wZXJhY2lvbmVzY29tcGxldGFkYXNjb3JyZWN0YW1lbnRl">
        <h4 class="heading "><span>C&oacute;digos de estado de operaciones completadas correctamente</span></h4>
    <p  >Cuando una operaci&oacute;n se puede completar de forma satisfactoria, es posible que el cuerpo de la respuesta contenga m&aacute;s informaci&oacute;n sobre el resultado de la operaci&oacute;n.    </p>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xMjAwT0s">
        <h5 class="heading "><span>HTTP/1.1 200 OK</span></h5>
    <p  >La operaci&oacute;n se ha completado correctamente. El cuerpo de la respuesta puede incluir m&aacute;s informaci&oacute;n sobre el resultado de la operaci&oacute;n.    </p>
    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xMjAxQ3JlYXRlZA">
        <h5 class="heading "><span>HTTP/1.1 201 Created</span></h5>
    <p  >La operaci&oacute;n de creaci&oacute;n de un nuevo recurso se ha completado correctamente. El cuerpo de la respuesta incluye informaci&oacute;n sobre el recurso creado o la cabecera <tt class=" ">Location</tt> contiene la URL de acceso a &eacute;ste.    </p>
    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xMjA0Tm9jb250ZW50">
        <h5 class="heading "><span>HTTP/1.1 204 No content</span></h5>
    <p  >La operaci&oacute;n se ha completado correctamente. No se obtiene ninguna entidad como respuesta y el cuerpo est&aacute; vac&iacute;o.    </p>
    </div>
    </div>
    <div class="section section-4" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUPDs2RpZ29zZGVlc3RhZG9jb25wYXLDoW1ldHJvZXJyb3JlbmxhY2FiZWNlcmFIVFRQV1dXLUF1dGhlbnRpY2F0ZQ">
        <h4 class="heading "><span>C&oacute;digos de estado con par&aacute;metro error en la cabecera HTTP WWW-Authenticate</span></h4>
    <p  class="emoticon emoticon-warning">Cuando se produce un error de autorizaci&oacute;n, se obtiene un c&oacute;digo de error en el par&aacute;metro <tt class=" ">error</tt> de la cabecera HTTP <tt class=" ">WWW-Authenticate</tt> de la respuesta, como se describe en <a  class="external-link" href="https://tools.ietf.org/html/rfc6750">RFC 6750</a>. Por ejemplo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 401 Unauthorized</code></div>
<div class="line"><code class="plain">WWW-Authenticate: Bearer error="invalid_token"</code></div>
</div>
    </div>
    <p  >A continuaci&oacute;n se listan los c&oacute;digos de estado que pueden ir acompa&ntilde;ados de una cabecera <tt class=" ">WWW-Authenticate</tt>, y los posibles valores del par&aacute;metro <tt class=" ">error</tt> en cada caso.    </p>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDAwQmFkUmVxdWVzdA">
        <h5 class="heading "><span>HTTP/1.1 400 Bad Request</span></h5>
<ul class=" "><li class=" ">    <p  ><tt class=" ">invalid_request</tt>: No es posible procesar la petici&oacute;n debido a una sintaxis incorrecta de la cabecera HTTP <tt class=" ">Authorization</tt>, posiblemente porque est&aacute; mal formada o hay m&aacute;s de una.    </p>
</li></ul>    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDAxVW5hdXRob3JpemVk">
        <h5 class="heading "><span>HTTP/1.1 401 Unauthorized</span></h5>
<ul class=" "><li class=" ">    <p  >Sin c&oacute;digo de error: Las condiciones de autenticaci&oacute;n requeridas no han sido satisfechas porque la petici&oacute;n no incluye una cabecera HTTP <tt class=" ">Authorization</tt>, o bien la incluye pero con un esquema de autenticaci&oacute;n HTTP no reconocido.    </p>
</li><li class=" ">    <p  ><tt class=" ">invalid_token</tt>: El <i class=" ">token</i> de autorizaci&oacute;n no es v&aacute;lido o est&aacute; caducado. En el caso de los <i class=" ">tokens</i> OAuth, el <i class=" ">token</i> caduca al cabo del n&uacute;mero de segundos indicado en el resultado de la operaci&oacute;n <a   href="#src-96240666">TX_EIDAS_4.1.4.0 - Obtener un token de acceso</a> (par&aacute;metro <tt class=" ">expires_in</tt>). Por otro lado, el servidor de autorizaci&oacute;n considera v&aacute;lidos los <i class=" ">tokens</i> JWT cuyo instante de emisi&oacute;n se encuentra en el rango de tiempo de 10 minutos inmediatamente anteriores o posteriores a la hora del servidor.    </p>
</li></ul>    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDAzRm9yYmlkZGVu">
        <h5 class="heading "><span>HTTP/1.1 403 Forbidden</span></h5>
<ul class=" "><li class=" ">    <p  ><tt class=" ">insufficient_scope</tt>: Los <i class=" ">scopes</i> a los que est&aacute; asociado el <i class=" ">token</i> de acceso OAuth no son suficientes para acceder al recurso protegido. La cabecera WWW-<tt class=" ">Authenticate</tt> incluye un par&aacute;metro adicional <tt class=" ">scope</tt> con el <i class=" ">scope</i> esperado. Un <i class=" ">token</i> OAuth est&aacute; asociado a los scopes que se hayan indicado en la operaci&oacute;n <a   href="#src-96240665">TX_EIDAS_4.1.4.0 - Obtener autorizaci&oacute;n</a> u <a   href="#src-96240666">TX_EIDAS_4.1.4.0 - Obtener un token de acceso</a>, seg&uacute;n el tipo de <i class=" ">grant</i> OAuth que se haya utilizado para obtener el token.    </p>
</li></ul>    </div>
    </div>
    <div class="section section-4" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUPDs2RpZ29zZGVlc3RhZG9jb25kZXNjcmlwY2nDs25vcGNpb25hbGRlbGVycm9yZW5lbGN1ZXJwb2RlbGFyZXNwdWVzdGE">
        <h4 class="heading "><span>C&oacute;digos de estado con descripci&oacute;n opcional del error en el cuerpo de la respuesta</span></h4>
    <p  >Para cualquier otro tipo de error, es habitual que el cuerpo de la respuesta contenga una estructura de datos JSON con los siguientes par&aacute;metros:    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">error</tt>: C&oacute;digo de error.    </p>
</li><li class=" ">    <p  ><tt class=" ">error_description</tt>: Opcional. Descripci&oacute;n adicional del error.    </p>
</li><li class=" ">    <p  ><tt class=" ">error_details</tt>: Opcional. Detalles adicionales del error. El formato es un objeto JSON con subcampos.    </p>
</li></ul>    <p  >Por ejemplo:    </p>
    <div  class="confbox programlisting">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">HTTP/1.1 400 Bad Request</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    "error": "NotSupportedException",</code></div>
<div class="line"><code class="plain">    "error_description": "Cannot consume content type",</code></div>
<div class="line"><code class="plain">    "error_details": { }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  class="emoticon emoticon-warning">A continuaci&oacute;n se describen posibles valores del par&aacute;metro <tt class=" ">error</tt> para varios c&oacute;digos de estado.    </p>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDAwQmFkUmVxdWVzdC4x">
        <h5 class="heading "><span>HTTP/1.1 400 Bad Request</span></h5>
    <p  >La sintaxis de la petici&oacute;n no es correcta o no se cumplen las condiciones requeridas para completar la operaci&oacute;n.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">AccountAlreadyExistsException</tt>: El valor del atributo &uacute;nico indicado en la petici&oacute;n y que se desea usar como identificador expl&iacute;cito de la cuenta de usuario ya est&aacute; asignado a otra cuenta.    </p>
</li><li class=" ">    <p  ><tt class=" ">AccountAttributeNotDefinedException</tt>: Alguno de los atributos indicados en la petici&oacute;n no est&aacute; definido en el dominio de identidad o no est&aacute; mapeado a la cuenta de usuario.    </p>
</li><li class=" ">    <p  ><tt class=" ">AmbiguousSignIdentityTypeException</tt> y <tt class=" ">MultipleIdentitiesSelectedException</tt>: Las etiquetas solicitadas al proveedor de firma para crear una firma digital identifican a m&aacute;s de una identidad de firma disponible.    </p>
</li><li class=" ">    <p  ><tt class=" ">BadRequestException</tt>: La petici&oacute;n no es correcta.    </p>
</li><li class=" ">    <p  ><tt class=" ">BlockedDeviceException</tt>: El dispositivo de firma para el que se solicita la operaci&oacute;n tiene un proceso pendiente de completarse.    </p>
</li><li class=" ">    <p  ><tt class=" ">DeviceAlreadyExistsException</tt>: El dispositivo de firma que se solicita registrar ya existe.    </p>
</li><li class=" ">    <p  ><tt class=" ">DeviceTypesNotExistsException</tt>: El tipo de dispositivo de firma indicada en la creaci&oacute;n de la identidad de firma no se corresponde con ninguno registrado en la configuraci&oacute;n.    </p>
</li><li class=" ">    <p  ><tt class=" ">ExternalAccountAlreadyLinkedToOtherUserException</tt>: El identificador en el dominio externo de la identidad a vincular indicado en la petici&oacute;n ya est&aacute; asignado a otra cuenta de usuario.    </p>
</li><li class=" ">    <p  ><tt class=" ">IllegalArgumentException</tt>: El valor de uno de los par&aacute;metros indicados en la petici&oacute;n no est&aacute; soportado.    </p>
</li><li class=" ">    <p  ><tt class=" ">InconsistentLinkedAccountIdException</tt>: Se ha intentado actualizar la informaci&oacute;n de una cuenta vinculada indicando un identificador de dominio externo (campo <tt class=" ">domain</tt>) o un identificador de la identidad externa (campo <tt class=" ">account_id</tt>) que no coinciden con los que ya estaban asociados a la identidad vinculada. Una vez creada la identidad vinculada, estas propiedades no pueden modificarse.    </p>
</li><li class=" ">    <p  ><tt class=" ">IncorrectSignIdentitySelectorsException</tt>: El selector de identidades de firma solicitado es incorrecto o no existe ninguna identidad asociada.    </p>
</li><li class=" ">    <p  ><tt class=" ">InvalidAttributeValueException</tt>: Alguno de los atributos indicados en la petici&oacute;n no tiene valor o tiene un formato no soportado.    </p>
</li><li class=" ">    <p  ><tt class=" ">InvalidExternalDomainNameException</tt>: El nombre del dominio externo indicado en el cuerpo de la petici&oacute;n no es v&aacute;lido o el dominio externo no est&aacute; federado al dominio al que pertenece la cuenta de usuario.    </p>
</li><li class=" ">    <p  ><tt class=" ">InvalidCsrTemplateException</tt>: La plantilla para generar la petici&oacute;n de certificaci&oacute;n indicada en la creaci&oacute;n de la identidad de firma solicitada es incorrecta.    </p>
</li><li class=" ">    <p  ><tt class=" ">InvalidKeyTemplateException</tt>: La plantilla para generar las claves indicada en la creaci&oacute;n de la identidad de firma solicitada es incorrecta.    </p>
</li><li class=" ">    <p  ><tt class=" ">InvalidPkcs12Exception</tt>: El PKCS#12 y la contrase&ntilde;a recibidos para crear la identidad son incorrectos o no se pueden emplear.    </p>
</li><li class=" ">    <p  ><tt class=" ">InvalidQueryFilterException</tt>: El par&aacute;metro <tt class=" ">filter</tt> indicado en la petici&oacute;n est&aacute; mal formado, incluye un atributo que no est&aacute; definido en el dominio de identidad o no est&aacute; mapeado a las cuentas de usuario, o el atributo no est&aacute; definido como &uacute;nico.    </p>
</li><li class=" ">    <p  ><tt class=" ">JsonParseException </tt>y<tt class=" "> JsonProcessingException</tt>: El cuerpo de la petici&oacute;n est&aacute; mal formado.    </p>
</li><li class=" ">    <p  ><tt class=" ">LinkedAccountAlreadyExistsException</tt>: La cuenta de usuario ya tiene una identidad vinculada con el dominio externo (campo <tt class=" ">domain</tt>) y el identificador de la identidad externa (campo <tt class=" ">account_id</tt>) especificados.    </p>
</li><li class=" ">    <p  ><tt class=" ">MandatorySignatureException</tt>: El proceso de firma no tiene definida una definici&oacute;n de firma.    </p>
</li><li class=" ">    <p  ><tt class=" ">ModelValidationException</tt>: La petici&oacute;n no es correcta porque falta alg&uacute;n par&aacute;metro obligatorio en la URL o en el cuerpo, o porque el contenido del cuerpo est&aacute; vac&iacute;o o no es completo.    </p>
</li><li class=" ">    <p  ><tt class=" ">MissingExternalAccountIdException</tt>: El cuerpo de la petici&oacute;n no incluye el identificador de la identidad externa en el dominio de identidad federado (campo <tt class=" ">account_id</tt>).    </p>
</li><li class=" ">    <p  ><tt class=" ">MissingUserIdAttributeException</tt>: El cuerpo de la petici&oacute;n no incluye el valor del atributo que se usa para determinar el identificador expl&iacute;cito de la cuenta de usuario.    </p>
</li><li class=" ">    <p  ><tt class=" ">MultipleAccountsForUniqueAttributeException</tt>: El valor de un atributo &uacute;nico indicado en la petici&oacute;n ya est&aacute; asignado a otra cuenta de usuario.    </p>
</li><li class=" ">    <p  ><tt class=" ">MultipleValuesForUniqueAttributeException</tt>: Un atributo &uacute;nico indicado en la petici&oacute;n tiene m&uacute;ltiples valores.    </p>
</li><li class=" ">    <p  ><tt class=" ">NotSupportedException</tt>: La cabecera <tt class=" ">Content-type</tt> de la petici&oacute;n no es la esperada. La mayor&iacute;a de las operaciones esperan el valor <tt class=" ">application/json</tt> en esta cabecera.    </p>
</li><li class=" ">    <p  ><tt class=" ">NotSupportedSignatureParametersException</tt> y <tt class=" ">UnexpectedSignerParametersTypeException</tt>: Los par&aacute;metros solicitados en la definici&oacute;n de firma son incorrectos.    </p>
</li><li class=" ">    <p  ><tt class=" ">SignaturePolicyNotFoundException</tt>: No se ha indicado ninguna pol&iacute;tica de firma.    </p>
</li><li class=" ">    <p  ><tt class=" ">SignaturePolicyNotSupportedException</tt>: La pol&iacute;tica de firma solicitada no est&aacute; soportada.    </p>
</li><li class=" ">    <p  ><tt class=" ">UndefinedIdentityDomainException</tt>: El <i class=" ">token</i> de autorizaci&oacute;n est&aacute; asociado a un dominio de identidad no definido. Si se trata de un <i class=" ">token</i> JWT de un servidor delegado, significa que el campo <tt class=" ">sub</tt> del <i class=" ">token</i> no se ha establecido correctamente.    </p>
</li><li class=" ">    <p  ><tt class=" ">UnmatchingSignIdentityTypeException </tt>y<tt class=" "> UnsuitableDeviceForSignIdentityException</tt>: Las etiquetas de la identidad de firma que se solicita crear no tienen correspondencia con ning&uacute;n tipo de identidad establecido en la configuraci&oacute;n.    </p>
</li><li class=" ">    <p  ><tt class=" ">UnsupportedSignIdentityCapabilityException</tt>: La identidad de firma especificada no es compatible con la operaci&oacute;n solicitada.    </p>
</li></ul>    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDAxVW5hdXRob3JpemVkLjE">
        <h5 class="heading "><span>HTTP/1.1 401 Unauthorized</span></h5>
    <p  >La petici&oacute;n no incluye credenciales de autenticaci&oacute;n v&aacute;lidas.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">UserAuthenticationRequiredException</tt>: El <i class=" ">token</i> de acceso no est&aacute; asociado a un usuario.    </p>
</li></ul>    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDAzRm9yYmlkZGVuLjE">
        <h5 class="heading "><span>HTTP/1.1 403 Forbidden</span></h5>
    <p  >El servidor no autoriza el acceso al recurso, por ejemplo, porque el tipo de autorizaci&oacute;n utilizada no es correcta o no ofrece permisos suficientes.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">DisabledSignIdentityException</tt>: La identidad de firma est&aacute; inhabilitada.    </p>
</li><li class=" ">    <p  ><tt class=" ">InsufficientPermissionsException </tt>y<tt class=" "> PermissionsRequiredException</tt>: Los permisos otorgados por el <i class=" ">token</i> de autorizaci&oacute;n no son suficientes para acceder al recurso protegido. Si se ha utilizado un <i class=" ">token</i> JWT, los permisos del <i class=" ">token</i> son fijos.    </p>
</li><li class=" ">    <p  ><tt class=" ">InsufficientPermissionsForAttributeException</tt>: Los permisos otorgados por el <i class=" ">token</i> de autorizaci&oacute;n no son suficientes para obtener alguno de los atributos solicitados en la petici&oacute;n.    </p>
</li><li class=" ">    <p  ><tt class=" ">InvalidPrivilegeException</tt> y <tt class=" ">NoSuchPrivilegeException</tt>: Los permisos otorgados por el token de autorizaci&oacute;n no son suficientes para ejecutar la operaci&oacute;n.    </p>
</li><li class=" ">    <p  ><tt class=" ">NotAuthorizedException</tt>: El <i class=" ">token</i> de autorizaci&oacute;n no se ha obtenido con el flujo OAuth adecuado, o bien no se ha especificado ni se puede deducir el dominio de identidad.    </p>
</li><li class=" ">    <p  ><tt class=" ">LockedSignIdentityException</tt>: La identidad de firma en servidor est&aacute; bloqueada.    </p>
</li><li class=" ">    <p  ><tt class=" ">UserNotAuthorizedException</tt>: El <i class=" ">token</i> de autorizaci&oacute;n no deber&iacute;a estar asociado a un usuario, o no est&aacute; asociado al mismo usuario que se indica en la petici&oacute;n.    </p>
</li><li class=" ">    <p  ><tt class=" ">UserDomainAccessRequiredException</tt>: Se requiere autorizaci&oacute;n administrativa de acceso al dominio de identidad. Si se ha autorizado la llamada mediante un <i class=" ">token</i> OAuth, este error puede ser debido a que el <i class=" ">token</i> ha sido emitido por un servidor de autorizaci&oacute;n que no est&aacute; asociado a ning&uacute;n dominio de identidad.    </p>
</li></ul>    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDA0Tm90Rm91bmQ">
        <h5 class="heading "><span>HTTP/1.1 404 Not Found</span></h5>
    <p  >Recurso no encontrado.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">DocumentNotFoundException</tt> y <tt class=" ">DocumentNotFoundRuntimeException</tt>: El documento sobre el que se desea realizar una operaci&oacute;n no existe.    </p>
</li><li class=" ">    <p  ><tt class=" ">ItemNotFoundException</tt> y <tt class=" ">NotFoundException</tt>: El recurso sobre el que se desea realizar una operaci&oacute;n no existe.    </p>
</li><li class=" ">    <p  ><tt class=" ">PasswordNotSetException</tt>: No existe una contrase&ntilde;a registrada con ese nombre para el usuario.    </p>
</li><li class=" ">    <p  ><tt class=" ">ProcessNotFoundException</tt>: El proceso de firma de un documento sobre el que se desea realizar una operaci&oacute;n no existe.    </p>
</li><li class=" ">    <p  ><tt class=" ">UnknownLinkedAccountException</tt>: La identidad vinculada indicada en la petici&oacute;n no pertenece al usuario.    </p>
</li><li class=" ">    <p  ><tt class=" ">UnknownUserAccountException</tt>: No existe la cuenta de usuario indicada en la petici&oacute;n.    </p>
</li></ul>    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDA1TWV0aG9kTm90QWxsb3dlZA">
        <h5 class="heading "><span>HTTP/1.1 405 Method Not Allowed</span></h5>
    <p  >El m&eacute;todo HTTP indicado en la petici&oacute;n no es adecuado para acceder al recurso.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">NotAllowedException</tt>: El servicio no soporta la operaci&oacute;n HTTP indicada en la petici&oacute;n.    </p>
</li></ul>    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDA5Q29uZmxpY3Q">
        <h5 class="heading "><span>HTTP/1.1 409 Conflict</span></h5>
    <p  >La modificaci&oacute;n solicitada en la petici&oacute;n no puede aplicarse dado el estado actual del recurso.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">InvalidStateException</tt>: El estado del recurso no permite realizar la operaci&oacute;n.    </p>
</li></ul>    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDEwR29uZQ">
        <h5 class="heading "><span>HTTP/1.1 410 Gone</span></h5>
    <p  >El recurso no existe ni exisitir&aacute;.    </p>
    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDE1VW5zdXBwb3J0ZWRNZWRpYVR5cGU">
        <h5 class="heading "><span>HTTP/1.1 415 Unsupported Media Type</span></h5>
    <p  >Los datos enviados al servidor no son del tipo requerido por la operaci&oacute;n.    </p>
    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNDIyVW5wcm9jZXNzYWJsZUVudGl0eQ">
        <h5 class="heading "><span>HTTP/1.1 422 Unprocessable Entity</span></h5>
    <p  >La modificaci&oacute;n solicitada es correcta, pero no puede realizarse porque dejar&iacute;a al recurso en un estado inv&aacute;lido.    </p>
<ul class=" "><li class=" ">    <p  ><tt class=" ">InconsistentUpdateRequestException</tt>: No se pueden aplicar simult&aacute;neamente los cambios en el recurso.    </p>
</li></ul>    </div>
    <div class="section section-5" id="src-96240766_safe-id-VFhfRUlEQVNfNC4xLjQuMC1TdGF0dXNkZWxhc3Jlc3B1ZXN0YXNIVFRQLUhUVFAvMS4xNTAwSW50ZXJuYWxTZXJ2ZXJFcnJvcg">
        <h5 class="heading "><span>HTTP/1.1 500 Internal Server Error</span></h5>
    <p  >Error no esperado por el servidor. En estos casos, el administrador de TrustedX debe consultar los logs para diagnosticar el problema.    </p>
    </div>
    </div>
    </div>
    </div>
    </div>
        </div>

    </article>


    
            
    
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>


</body>
</html>
